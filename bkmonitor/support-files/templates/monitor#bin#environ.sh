#!/bin/bash

export LANG=zh_CN.utf8
export DJANGO_CONF_MODULE="conf.worker.production.${PLATFORM}"
export BKAPP_DEPLOY_PLATFORM=${PLATFORM}

# 运行时配置相关环境变量注入
source bin/runtime.env

# 公共内容
export LAN_IP="__LAN_IP__"
export BK_HOME="__BK_HOME__"
export BK_DOMAIN="__BK_DOMAIN__"
export BK_CERT_PATH="__BK_CERT_PATH__"
export BK_FILE_PATH=__BK_HOME__/bkmonitorv3/cert/saas_priv.txt

# Consul配置
export BK_CONSUL_HTTPS_PORT="__BK_CONSUL_HTTPS_PORT__"
export BK_CONSUL_CA_FILE="__BK_CONSUL_CA_FILE__"
export BK_CONSUL_CLIENT_KEY_FILE="__BK_CONSUL_CLIENT_KEY_FILE__"
export BK_CONSUL_CLIENT_CERT_FILE="__BK_CONSUL_CLIENT_CERT_FILE__"

# PaaS MySQL配置
export BK_PAAS_MYSQL_HOST="__BK_PAAS_MYSQL_HOST__"
export BK_PAAS_MYSQL_PORT="__BK_PAAS_MYSQL_PORT__"
export BK_PAAS_MYSQL_USER="__BK_PAAS_MYSQL_USER__"
export BK_PAAS_MYSQL_PASSWORD="__BK_PAAS_MYSQL_PASSWORD__"

# 平台相关配置
export BK_JOB_PUBLIC_URL="__BK_JOB_PUBLIC_URL__"
export BK_CMDB_PUBLIC_URL="__BK_CMDB_PUBLIC_URL__"
export BK_PAAS_PUBLIC_URL="__BK_PAAS_PUBLIC_URL__"
export BK_PAAS_PRIVATE_URL="__BK_PAAS_PRIVATE_URL__"
export BK_GSE_ZK_HOST="__BK_GSE_ZK_HOST__"
export BK_GSE_ZK_PORT="__BK_GSE_ZK_PORT__"
export BK_LICENSE_HOST="__BK_LICENSE_HOST__"
export BK_LICENSE_PORT="__BK_LICENSE_PORT__"
export BK_ESB_SUPER_USER="__BK_ESB_SUPER_USER__"

# 应用配置
export BK_MONITOR_APP_SECRET="__BK_MONITOR_APP_SECRET__"
export BK_MONITOR_APP_CODE="__BK_MONITOR_APP_CODE__"

# 监控其他模块配置
export BK_INFLUXDB_PROXY_PORT="__BK_INFLUXDB_PROXY_PORT__"
export BK_INFLUXDB_PROXY_HOST="__BK_INFLUXDB_PROXY_HOST__"
export BK_MONITOR_INFLUXDB_PORT="__BK_MONITOR_INFLUXDB_PORT__"
export BK_TRANSFER_HOST="__BK_TRANSFER_HOST__"
export BK_TRANSFER_HTTP_PORT="__BK_TRANSFER_HTTP_PORT__"
export BK_MONITOR_KERNELAPI_PORT="__BK_MONITOR_KERNELAPI_PORT__"
export BK_MONITOR_UNIFY_QUERY_HOST="__BK_UNIFY_QUERY_HOST__"
export BK_MONITOR_UNIFY_QUERY_PORT="__BK_UNIFY_QUERY_PORT__"

# 周边依赖模块
# 监控告警存储 ES7
export BK_FTA_ES7_HOST="__BK_MONITOR_ALERT_ES7_HOST__"
export BK_FTA_ES7_TRANSPORT_PORT="__BK_MONITOR_ALERT_ES7_TRANSPORT_PORT__"
export BK_FTA_ES7_REST_PORT="__BK_MONITOR_ALERT_ES7_REST_PORT__"
export BK_FTA_ES7_USER="__BK_MONITOR_ALERT_ES7_USER__"
export BK_FTA_ES7_PASSWORD="__BK_MONITOR_ALERT_ES7_PASSWORD__"
# 监控自定义事件 ES7
export BK_MONITOR_ES7_HOST="__BK_MONITOR_ES7_HOST__"
export BK_MONITOR_ES7_TRANSPORT_PORT="__BK_MONITOR_ES7_TRANSPORT_PORT__"
export BK_MONITOR_ES7_REST_PORT="__BK_MONITOR_ES7_REST_PORT__"
export BK_MONITOR_ES7_USER="__BK_MONITOR_ES7_USER__"
export BK_MONITOR_ES7_PASSWORD="__BK_MONITOR_ES7_PASSWORD__"
# kafka
export BK_MONITOR_KAFKA_HOST="__BK_MONITOR_KAFKA_HOST__"
export BK_MONITOR_KAFKA_PORT="__BK_MONITOR_KAFKA_PORT__"
# mysql
export BK_MONITOR_MYSQL_HOST="__BK_MONITOR_MYSQL_HOST__"
export BK_MONITOR_MYSQL_PORT="__BK_MONITOR_MYSQL_PORT__"
export BK_MONITOR_MYSQL_USER="__BK_MONITOR_MYSQL_USER__"
export BK_MONITOR_MYSQL_PASSWORD="__BK_MONITOR_MYSQL_PASSWORD__"
# redis
# standalone: 单实例
# sentinel： 哨兵
export BK_MONITOR_REDIS_MODE="__BK_MONITOR_REDIS_MODE__"
export BK_MONITOR_REDIS_PASSWORD="__BK_MONITOR_REDIS_PASSWORD__"
# redis sentinel模式
export BK_MONITOR_REDIS_SENTINEL_PASSWORD="__BK_MONITOR_REDIS_SENTINEL_PASSWORD__"
export BK_MONITOR_REDIS_SENTINEL_HOST="__BK_MONITOR_REDIS_SENTINEL_HOST__"
export BK_MONITOR_REDIS_SENTINEL_PORT="__BK_MONITOR_REDIS_SENTINEL_PORT__"
export BK_MONITOR_REDIS_SENTINEL_MASTER_NAME="__BK_MONITOR_REDIS_SENTINEL_MASTER_NAME__"
# redis standalone模式
export BK_MONITOR_REDIS_PORT="__BK_MONITOR_REDIS_PORT__"
export BK_MONITOR_REDIS_HOST="__BK_MONITOR_REDIS_HOST__"
# RABBITMQ
export BK_MONITOR_RABBITMQ_HOST="__BK_MONITOR_RABBITMQ_HOST__"
export BK_MONITOR_RABBITMQ_VHOST="__BK_MONITOR_RABBITMQ_VHOST__"
export BK_MONITOR_RABBITMQ_PORT="__BK_MONITOR_RABBITMQ_PORT__"
export BK_MONITOR_RABBITMQ_USERNAME="__BK_MONITOR_RABBITMQ_USERNAME__"
export BK_MONITOR_RABBITMQ_PASSWORD="__BK_MONITOR_RABBITMQ_PASSWORD__"
# IAM
export BK_IAM_V3_INNER_HOST="http://__BK_IAM_PRIVATE_ADDR__"
# BCS
export BK_BCS_API_GATEWAY_TOKEN="__BK_BCS_API_GATEWAY_TOKEN__"
export BK_BCS_API_GATEWAY_HOST="__BK_BCS_API_GATEWAY_HOST__"
export BK_BCS_API_GATEWAY_PORT="__BK_BCS_API_GATEWAY_PORT__"
export BK_BCS_API_GATEWAY_SCHEMA="__BK_BCS_API_GATEWAY_SCHEMA__"
export BK_BCS_CLUSTER_SOURCE="__BK_BCS_CLUSTER_SOURCE__"
export BK_BCS_URL="__BK_BCS_URL__"
export BK_SSM_HOST="http://__BK_SSM_HOST__"
export BK_SSM_PORT="__BK_SSM_PORT__"
export BKAPP_BCS_CC_API_URL="__BCS_CC_API_URL__"
# 聚合上报网关端口
export BK_MONITOR_PROM_PORT="__BK_MONITOR_PROM_PORT__"
# Transfer
export BK_MONITOR_TRANSFER_REDIS_MODE="__BK_MONITOR_TRANSFER_REDIS_MODE__"
export BK_MONITOR_TRANSFER_REDIS_HOST="__BK_MONITOR_TRANSFER_REDIS_HOST__"
export BK_MONITOR_TRANSFER_REDIS_PORT="__BK_MONITOR_TRANSFER_REDIS_PORT__"
export BK_MONITOR_TRANSFER_REDIS_PASSWORD="__BK_MONITOR_TRANSFER_REDIS_PASSWORD__"
export BK_MONITOR_TRANSFER_REDIS_SENTINEL_MASTER_NAME="__BK_MONITOR_TRANSFER_REDIS_SENTINEL_MASTER_NAME__"
export BK_MONITOR_TRANSFER_REDIS_SENTINEL_HOST="__BK_MONITOR_TRANSFER_REDIS_SENTINEL_HOST__"
export BK_MONITOR_TRANSFER_REDIS_SENTINEL_PORT="__BK_MONITOR_TRANSFER_REDIS_SENTINEL_PORT__"
export BK_MONITOR_TRANSFER_REDIS_SENTINEL_PASSWORD="__BK_MONITOR_TRANSFER_REDIS_SENTINEL_PASSWORD__"
export BK_MONITOR_TRANSFER_REDIS_DB="__BK_MONITOR_TRANSFER_REDIS_DB__"
# grafana
export BKAPP_GRAFANA_DB_HOST="__BK_MONITOR_MYSQL_HOST__"
export BKAPP_GRAFANA_DB_PORT="__BK_MONITOR_MYSQL_PORT__"
export BKAPP_GRAFANA_DB_USER="__BK_MONITOR_MYSQL_USER__"
export BKAPP_GRAFANA_DB_PASSWORD="""__BK_MONITOR_MYSQL_PASSWORD__"""
