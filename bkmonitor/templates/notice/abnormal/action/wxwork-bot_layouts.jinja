[
  {
    "type": "column_layout",
    "style": {
      "vertical_line": "{% if alarm.level == 1 %}red{% elif alarm.level == 2 %}yellow{% else %}blue{% endif %}"
    },
    "components": [
      {
        "type": "markdown",
        "text": "{% if alarm.level == 1 %}**`[{{level_name | safe}}]` {{alert.alert_name | safe}}**{% else %}**[{{level_name | safe}}] {{alert.alert_name | safe}}**{% endif %}"
      },
      {
        "type": "markdown",
        "text": "{{user_content | safe}}"
      },
      {
        "type": "divider"
      }
    ]
  },
  {
    "type": "flex_layout",
    "num_inline": 2,
    "weight": [1, 1],
    "components": [
      {
        "type": "button",
        "text": "查看详情",
        "button_style": {
          "type": "outstand",
          "color": "positive"
        },
        "interaction": {
          "type": 2002,
          "data": {
            "url": "{{ alarm.detail_url | safe }}"
          }
        }
      },
      {% if alarm.query_url %}
      {
        "type": "button",
        "text": "数据检索",
        "button_style": {
          "type": "outstand",
          "color": "positive"
        },
        "interaction": {
          "type": 2002,
          "data": {
            "url": "{{ alarm.query_url | safe }}"
          }
        }
      }
      {% elif alarm.log_search_url %}
      {
        "type": "button",
        "text": "日志检索",
        "button_style": {
          "type": "outstand",
          "color": "positive"
        },
        "interaction": {
          "type": 2002,
          "data": {
            "url": "{{ alarm.log_search_url | safe }}"
          }
        }
      }
      {% else %}
      {
        "type": "button",
        "text": "数据检索",
        "button_style": {
          "type": "outstand",
          "color": "gray"
        },
        "interaction": {
          "type": 2002,
          "data": {
            "url": "{{ alarm.detail_url | safe }}"
          }
        }
      }
      {% endif %}
    ]
  },
  {% if alarm.quick_ack_url or alarm.quick_shield_url %}
  {
    "type": "flex_layout",
    "num_inline": 2,
    "weight": [1, 1],
    "components": [
      {% if alarm.quick_ack_url %}
      {
        "type": "button",
        "text": "告警确认",
        "button_style": {
          "type": "outstand",
          "color": "positive"
        },
        "interaction": {
          "type": 2002,
          "data": {
            "url": "{{ alarm.quick_ack_url | safe }}"
          }
        }
      }{% if alarm.quick_shield_url %},{% endif %}
      {% endif %}
      {% if alarm.quick_shield_url %}
      {
        "type": "button",
        "text": "告警屏蔽",
        "button_style": {
          "type": "outstand",
          "color": "positive"
        },
        "interaction": {
          "type": 2002,
          "data": {
            "url": "{{ alarm.quick_shield_url | safe }}"
          }
        }
      }
      {% endif %}
    ]
  }
  {% endif %}
]

