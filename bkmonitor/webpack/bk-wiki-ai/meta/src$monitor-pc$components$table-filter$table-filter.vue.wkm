{"ops":[{"insert":"这是一个表格筛选组件，名为 `TableFilter`。它主要用于在表格或数据展示界面中提供多选（checkbox）或单选（radio）的筛选功能，用户可以通过该组件选择不同的标签或选项来对数据进行过滤。\n\n基本用途"},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n- 提供一个弹出式筛选面板，支持用户通过 复选框（多选） 或单选按钮（单选）的方式选择筛选条件。\n- 常用于数据表格、列表页面等需要对数据进行按条件筛选的场景，比如按照标签、状态、类型等维度进行筛选。\n\n主要功能"},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n1. 支持两种筛选模式"},{"attributes":{"header":2},"insert":"\n"},{"insert":"- 多选模式（checkbox）：用户可以勾选多个选项，用于同时根据多个条件筛选数据。\n- 单选模式（radio）：用户只能选择一个选项，适用于互斥的筛选条件，如状态类型等。\n\n2. 筛选交互功能"},{"attributes":{"header":2},"insert":"\n"},{"insert":"- 用户点击目标元素（如按钮或标签）时，弹出筛选选项面板。\n- 用户可以选择一个或多个选项，然后点击“确定”应用筛选，或点击“重置”清空已选项。\n- 支持动态更新筛选选项（通过监听 `menuList` 变化）。\n\n3. 与父组件通信"},{"attributes":{"header":2},"insert":"\n"},{"insert":"- 通过 **props** 接收外部传入的配置和数据，比如是否显示、筛选类型、选项列表等。\n- 通过 **events（事件）** 向父组件传递用户的筛选行为，包括：\n  - `selected`: 当前选中的筛选项 ID 列表（多选时）。\n  - `confirm`: 用户点击“确定”后触发的筛选确认事件，返回选中的值。\n  - `reset`: 用户点击“重置”后触发，通知父组件清空筛选。\n  - `hide`: 隐藏筛选面板。\n\n使用方法"},{"attributes":{"header":1},"insert":"\n"},{"attributes":{"code-block":"plain"},"insert":"\n"},{"insert":"<template>"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"  <div>"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"    <!-- 触发筛选的按钮 -->"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"    <button @click=\"showFilter = !showFilter\">筛选</button>"},{"attributes":{"code-block":"html"},"insert":"\n\n"},{"insert":"    <!-- TableFilter 筛选组件 -->"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"    <TableFilter"},{"attributes":{"code-block":"plain"},"insert":"\n"},{"insert":"      :show=\"showFilter\""},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"      :target=\"someElementRef\""},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"      :menu-list=\"filterOptions\""},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"      :filter-type=\"'checkbox'\" <!-- 或 'radio' -->"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"      :value=\"selectedValues\""},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"      @confirm=\"onFilterConfirm\""},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"      @reset=\"onFilterReset\""},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"      @selected=\"onSelectedChange\""},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"      @hide=\"onFilterHide\""},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"    />"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"  </div>"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"</template>"},{"attributes":{"code-block":"html"},"insert":"\n\n"},{"insert":"\n3. 组件使用示例（父组件脚本部分）"},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"<script>"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"import TableFilter from '@/components/TableFilter.vue'"},{"attributes":{"code-block":"javascript"},"insert":"\n\n"},{"insert":"export default {"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"  components: {"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    TableFilter"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"  },"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"  data() {"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    return {"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"      showFilter: false,"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"      selectedValues: [], // 多选时传入已选中的 id 数组；单选时可传入单个值"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"      someElementRef: null, // 通常是触发筛选的 DOM 元素引用，比如一个按钮"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"      filterOptions: ["},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"        { id: 'tag1', name: '标签一' },"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"        { id: 'tag2', name: '标签二' },"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"        { id: 'tag3', name: '标签三' },"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"      ]"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    }"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"  },"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"  methods: {"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    onFilterConfirm(selectedValue) {"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"      console.log('用户确认筛选，选中值：', selectedValue)"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"      // 根据 selectedValue 执行数据过滤逻辑"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    },"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    onFilterReset(resetValue) {"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"      console.log('用户重置筛选：', resetValue)"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"      this.selectedValues = [] // 重置选中项"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"      // 重新加载未筛选的数据"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    },"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    onSelectedChange(selectedIds) {"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"      console.log('当前选中项 IDs：', selectedIds)"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    },"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    onFilterHide(isHidden) {"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"      this.showFilter = false // 隐藏筛选面板"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    }"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"  }"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"}"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"</script>"},{"attributes":{"code-block":"javascript"},"insert":"\n\n"},{"insert":"\nProps 参数说明"},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n| 参数名         | 类型             | 默认值       | 说明 |\n|----------------|------------------|--------------|------|\n| show           | Boolean          | false        | 控制筛选面板是否显示 |\n| target         | null / DOM Ref   | null         | 筛选面板要绑定的目标元素（通常是触发按钮），用于定位弹出层 |\n| radioList      | Array            | []           | 单选模式下的选项列表，如：['选项1', '选项2'] |\n| menuList       | Array            | []           | 筛选项的数据源，格式：[{ id: 'xxx', name: 'xxx' }] |\n| filterType     | String           | 'checkbox'   | 筛选类型，可选值为 `'checkbox'`（多选） 或 `'radio'`（单选） |\n| value          | String / Array   | ''           | 当前已选中的值；多选时为数组（如选中的 id 列表），单选时为单个值 |\n\n事件说明（Event）"},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n| 事件名     | 参数             | 说明 |\n|------------|------------------|------|\n| selected   | Array            | 当前选中的筛选项 ID 列表（多选模式下实时更新） |\n| confirm    | String / Array   | 用户点击“确定”后触发，返回最终选中的值（多选是数组，单选可能是字符串） |\n| reset      | String           | 用户点击“重置”后触发，通常传空字符串，通知父组件清除筛选条件 |\n| hide       | Boolean          | 筛选面板隐藏时触发，通常用于关闭弹窗或重置状态 |\n\n组件内部实现要点"},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n- 使用了 **Vue 的响应式数据** 和 **watch 监听** 来控制筛选面板的显示、选项的生成与更新。\n- 内部使用了 **蓝鲸的 tippy / bk-popover 组件**（推测）来实现弹出层效果，通过 `$bkPopover` 方法动态挂载筛选选项内容。\n- 提供了 **重置、确定、多选状态管理** 等完整的交互逻辑。\n- 支持国际化（使用了 `$t('确定')` 和 `$t('重置')`，应该是基于 vue-i18n 的翻译函数）。\n"}],"extra":{"updator":"Austin","update_at":"2026-01-21 17:43:00"}}