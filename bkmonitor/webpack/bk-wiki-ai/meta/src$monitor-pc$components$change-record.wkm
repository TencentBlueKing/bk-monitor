{"ops":[{"insert":"基本用途"},{"attributes":{"header":1},"insert":"\n"},{"insert":"这是一个基于 Vue.js 的变更记录展示组件，用于以对话框形式展示某个实体的变更相关信息（如创建人、创建时间、更新人、更新时间等）。\n\n主要功能"},{"attributes":{"header":1},"insert":"\n"},{"insert":"1. **展示变更信息**：以列表形式展示创建人、创建时间、更新人、更新时间等变更相关数据\n2. **对话框形式**：使用 `bk-dialog` 组件以弹窗方式展示变更记录\n3. **国际化支持**：通过 `vue-i18n` 支持多语言显示标签文本\n4. **条件显示**：通过 `show` 属性控制对话框的显示/隐藏\n5. **响应式交互**：当对话框显示状态变化时，能够正确响应并同步内部状态\n\n文件结构"},{"attributes":{"header":1},"insert":"\n"},{"insert":"- `change-record.scss`：组件的样式文件，定义了变更记录的布局和外观\n- `change-record.tsx`：组件的逻辑实现文件，使用 Vue.js + TypeScript + 装饰器语法\n\n使用方法"},{"attributes":{"header":1},"insert":"\n"},{"insert":"在其他 Vue 组件中导入并使用该变更记录组件：\n"},{"attributes":{"code-block":"plain"},"insert":"\n"},{"insert":"import ChangeRecord from './path/to/change-record';"},{"attributes":{"code-block":"typescript"},"insert":"\n\n"},{"insert":"// 在 components 中注册"},{"attributes":{"code-block":"typescript"},"insert":"\n"},{"insert":"components: {"},{"attributes":{"code-block":"typescript"},"insert":"\n"},{"insert":"  ChangeRecord"},{"attributes":{"code-block":"plain"},"insert":"\n"},{"insert":"}"},{"attributes":{"code-block":"typescript"},"insert":"\n\n"},{"insert":"// 在模板中使用"},{"attributes":{"code-block":"typescript"},"insert":"\n"},{"insert":"<ChangeRecord "},{"attributes":{"code-block":"typescript"},"insert":"\n"},{"insert":"  :recordData=\"changeData\" "},{"attributes":{"code-block":"typescript"},"insert":"\n"},{"insert":"  :show=\"isShowChangeRecord\" "},{"attributes":{"code-block":"typescript"},"insert":"\n"},{"insert":"  @updateShow=\"handleUpdateShow\""},{"attributes":{"code-block":"typescript"},"insert":"\n"},{"insert":"/>"},{"attributes":{"code-block":"typescript"},"insert":"\n\n"},{"insert":"\nProps 参数"},{"attributes":{"header":1},"insert":"\n"},{"insert":"- `recordData` (Object): 包含变更记录数据的对象，有以下可选属性：\n  - `createTime`: 创建时间 (string | TranslateResult)\n  - `createUser`: 创建人 (string | TranslateResult)  \n  - `updateTime`: 更新时间 (string | TranslateResult)\n  - `updateUser`: 更新人 (string | TranslateResult)\n  \n- `show` (Boolean): 控制对话框是否显示\n\n事件"},{"attributes":{"header":1},"insert":"\n"},{"insert":"- `updateShow` (Boolean): 当对话框显示状态变化时触发，用于父组件同步显示状态\n\n样式"},{"attributes":{"header":1},"insert":"\n"},{"insert":"组件使用了独立的 SCSS 样式文件，定义了：\n- 整体垂直布局 (`flex-direction: column`)\n- 每个变更项的水平布局（标签和内容）\n- 标签固定宽度(131px)且右对齐，内容区域有左边距\n- 整体字体颜色和大小的设置\n\n技术特点"},{"attributes":{"header":1},"insert":"\n"},{"insert":"1. **Vue.js + TypeScript**: 使用 TypeScript 提供类型安全\n2. **装饰器语法**: 使用 `vue-property-decorator` 和 `vue-tsx-support` 提供类式组件写法\n3. **响应式数据**: 使用 Vue 的响应式系统管理组件状态\n4. **JSX/TSX**: 使用 TSX 语法编写组件的 render 函数\n5. **UI 组件库**: 使用了 `bk-dialog` 组件（可能是蓝鲸或类似 UI 库的对话框组件）\n6. **国际化**: 集成 vue-i18n 实现多语言支持\n\n工作原理"},{"attributes":{"header":1},"insert":"\n"},{"insert":"1. 组件接收外部传入的 `recordData` 和 `show` 属性\n2. 内部维护一个 `labelMap`，定义了各个字段的显示标签（通过国际化函数 `$t` 获取）\n3. 当 `show` 属性变化时，通过 watcher 同步到内部 `value` 状态\n4. 渲染时，遍历 `labelMap` 的键，为每个键值对生成一个列表项，显示对应的标签和数据\n5. 如果某个数据不存在，则显示默认值 `'--'`\n6. 用户可通过对话框的关闭操作触发 `updateShow` 事件通知父组件\n\n这个组件适用于需要在页面中以弹窗形式展示某个实体（如配置、文档、用户等）的变更历史或元信息的场景。\n"}],"extra":{"updator":"Austin","update_at":"2026-01-20 16:17:45"}}