{"ops":[{"insert":"这是一个空间选择组件（Space Select Component），主要用于在业务或空间管理场景中让用户选择特定的业务空间。\n\n组件基本用途"},{"attributes":{"header":1},"insert":"\n"},{"insert":"\nspace-select是一个自定义的下拉选择组件，用于展示和选择“空间”（可以理解为业务、项目、环境等）。它支持：\n\n- 单选 / 多选模式\n- 搜索过滤\n- 空间类型分类（如业务、研发项目、容器项目等）\n- 特殊选项（如“我有权限的空间”、“我有告警的空间”等）\n- 权限控制（无权限时显示“申请权限”按钮）\n- 错误状态、激活状态样式\n- 自定义样式主题\n- 国际化支持（通过 `this.$t` 和 `this.$tc`）\n\n主要功能"},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n1. 基础选择功能"},{"attributes":{"header":2},"insert":"\n"},{"insert":"- 支持单选和多选模式（通过 `multiple` 属性控制）\n- 用户可从下拉列表中选择一个或多个“空间”（业务/项目）\n- 默认可根据配置自动选中“当前空间”\n\n2. 搜索与筛选"},{"attributes":{"header":2},"insert":"\n"},{"insert":"- 输入关键词搜索空间名称、ID、编码等\n- 支持按空间类型筛选（如只看“研发项目”或“容器项目”）\n- 实时防抖搜索，提升性能\n\n3. 特殊选项支持"},{"attributes":{"header":2},"insert":"\n"},{"insert":"- **我有权限的空间**\n- **我有告警的空间**\n- **配置管理业务**\n- **告警接收业务**\n- 可通过 props 控制是否显示这些选项\n\n4. 权限与状态管理"},{"attributes":{"header":2},"insert":"\n"},{"insert":"- 无权限的空间会显示“申请权限”按钮\n- 支持禁用状态（disabled）\n- 错误状态样式（如未选择任何空间时可能标红）\n- 已选中的空间有明确的视觉反馈\n\n5. UI 与交互"},{"attributes":{"header":2},"insert":"\n"},{"insert":"- 下拉弹窗形式的选择界面\n- 空间类型标签分类展示，带有颜色区分\n- 支持滚动、分页加载更多\n- 空间类型标签支持横向滚动与左右切换按钮\n- 选中项展示名称与 ID（如 `#123` 或 `project-code`）\n- 支持清空选择（多选模式下）\n\n6. 样式定制"},{"attributes":{"header":2},"insert":"\n"},{"insert":"- 提供 `isCommonStyle` 属性，启用通用筛选样式（如显示“空间筛选：”前缀）\n- 支持错误（error）、激活（active）、禁用（disabled）等状态样式\n- SCSS 中定义了丰富的交互效果，如 hover、focus、选中态等\n\n使用方法"},{"attributes":{"header":1},"insert":"\n"},{"attributes":{"code-block":"plain"},"insert":"\n"},{"insert":"<template>"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  <SpaceSelect"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    v-model=\"selectedSpaceIds\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    :space-list=\"spaceList\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    :multiple=\"true\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    :need-authority-option=\"true\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    :need-alarm-option=\"true\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    :disabled=\"false\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    @change=\"onSpaceChange\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    @apply-auth=\"onApplyAuth\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  />"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"</template>"},{"attributes":{"code-block":"vue"},"insert":"\n\n"},{"insert":"<script lang=\"ts\">"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"import SpaceSelect from './path/to/space-select.tsx';"},{"attributes":{"code-block":"vue"},"insert":"\n\n"},{"insert":"export default {"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  components: {"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    SpaceSelect,"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  },"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  data() {"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    return {"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      selectedSpaceIds: [] as number[], // v-model 绑定选中的空间 ID 数组"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      spaceList: ["},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"        // 你的空间数据列表，通常是从 API 获取"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"        { bk_biz_id: 1, space_name: '业务1', space_type_id: 'bkcc', type_name: '业务类型', space_id: 'biz001' },"},{"attributes":{"code-block":"plain"},"insert":"\n"},{"insert":"        { bk_biz_id: 2, space_name: '研发项目1', space_type_id: 'bkci', type_name: '研发类型', space_code: 'proj001' },"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"        // ..."},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      ] as ISpaceItem[],"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    };"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  },"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  methods: {"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    onSpaceChange(ids: number[]) {"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      console.log('选中的空间ID:', ids);"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    },"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    onApplyAuth(bizId: number | string) {"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      console.log('申请权限的业务ID:', bizId);"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      // 跳转至权限申请页面或触发权限申请逻辑"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    },"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  },"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"};"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"</script>"},{"attributes":{"code-block":"vue"},"insert":"\n\n"},{"insert":"Props参数"},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n| 参数 | 类型 | 默认值 | 说明 |\n|------|------|--------|------|\n| `value / v-model` | `number[]` | `[]` | 选中的空间 ID 数组（双向绑定） |\n| `currentSpace` | `number \\| string` | `null` | 当前空间 ID，用于“设为当前空间”功能 |\n| `spaceList` | `ISpaceItem[]` | `[]` | 可选择的空间列表数据 |\n| `multiple` | `boolean` | `true` | 是否多选 |\n| `disabled` | `boolean` | `false` | 是否禁用整个组件 |\n| `needAuthorityOption` | `boolean` | `true` | 是否显示“我有权限的空间”选项 |\n| `needAlarmOption` | `boolean` | `true` | 是否显示“我有告警的空间”选项 |\n| `isCommonStyle` | `boolean` | `false` | 是否使用通用样式（显示“空间筛选：”前缀） |\n| `isAutoSelectCurrentSpace` | `boolean` | `false` | 是否自动选择当前空间 |\n\n事件（Events）"},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n| 事件名 | 参数 | 说明 |\n|--------|------|------|\n| `change` | `number[]`（选中的空间 ID 数组） | 选择发生变化时触发 |\n| `applyAuth` | `number[]`（业务 ID） | 点击“申请权限”时触发 |\n\n补充说明"},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n- **ISpaceItem**: 是传入的空间数据接口，至少应包含如 `bk_biz_id`、`space_name`、`space_type_id`、`type_name`、`space_id` / `space_code` 等字段。\n- **SPACE_TYPE_MAP**: 定义了不同空间类型（如 bkcc、bkci、bcs 等）的显示名称与样式颜色，用于分类标识。\n- **utils.ts** 中的 `SPACE_TYPE_MAP` 会被组件样式和逻辑引用，用来给不同类型的空间打标签和着色。\n"}],"extra":{"updator":"Austin","update_at":"2026-01-21 17:34:12"}}