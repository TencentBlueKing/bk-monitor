{"ops":[{"insert":"基本用途"},{"attributes":{"header":1},"insert":"\n"},{"insert":"\nIPSelect 是一个用于选择 IP 地址或节点的 Vue 组件，主要用于蓝鲸智云 PaaS 平台中。该组件提供了一个灵活的界面，允许用户通过多种方式选择静态 IP、业务拓扑中的节点、动态分组或外网 IP。\n\n主要功能"},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n1. 双栏布局：左侧为选择区域，右侧为已选择内容的展示区域\n2. 多种选择方式：\n   - 静态 IP 输入\n   - 业务拓扑选择\n   - 外网 IP 选择\n   - 动态分组选择\n   - 动态业务拓扑选择\n3. 可调整布局：左侧选择区域宽度可通过拖拽调整\n4. 搜索功能：支持对拓扑节点或 IP 进行搜索\n5. 标签页切换：在静态和动态选择方式间切换\n6. 自定义插槽：提供多个插槽用于自定义各部分的展示内容\n7. 加载状态：支持树形数据和表格数据的加载状态显示\n8. 空数据展示：当没有选择任何内容时显示友好的空状态\n\n基本用法"},{"attributes":{"header":1},"insert":"\n"},{"attributes":{"code-block":"plain"},"insert":"\n"},{"insert":"<template>"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  <IpSelect"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    :min-width=\"850\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    :height=\"460\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    :default-active=\"0\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    :get-default-data=\"getDefaultData\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    :get-fetch-data=\"getFetchData\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    @active-select-change=\"handleActiveSelectChange\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  />"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"</template>"},{"attributes":{"code-block":"vue"},"insert":"\n\n"},{"insert":"<script>"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"import IpSelect from './components/IpSelect.vue'"},{"attributes":{"code-block":"vue"},"insert":"\n\n"},{"insert":"export default {"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  components: {"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    IpSelect"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  },"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  methods: {"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    // 获取默认数据的方法"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    async getDefaultData(type) {"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      // 返回包含 treeData、checkedData、disabledData、tableData、defaultExpandNode 的对象"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      return {"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"        treeData: [], // 树形数据"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"        checkedData: [], // 默认勾选的数据"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"        disabledData: [], // 禁用的数据"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"        tableData: [], // 表格数据"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"        defaultExpandNode: 1 // 默认展开的节点"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      }"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    },"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    "},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    // 获取勾选数据的方法"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    async getFetchData(type, payload) {"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      // 根据选择的类型和payload获取数据"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      // 返回包含 checkedData、tableData、disabledData 的对象"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      return {"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"        checkedData: [], // 选中的数据"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"        tableData: [], // 表格展示的数据"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"        disabledData: [] // 禁用的数据"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      }"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    },"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    "},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    // 处理激活选择变更事件"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    handleActiveSelectChange({ newValue, oldValue }) {"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      console.log('选择方式变更:', newValue, oldValue)"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    }"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  }"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"}"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"</script>"},{"attributes":{"code-block":"vue"},"insert":"\n\n"},{"insert":"\nProps 参数说明"},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n| 参数名 | 类型 | 默认值 | 说明 |\n|--------|------|--------|------|\n| minWidth | Number/String | 850 | IP选择器最小宽度 |\n| maxWidth | Number/String | 9999 | IP选择器最大宽度 |\n| height | Number/String | 460 | IP选择器高度 |\n| idKey | String | 'id' | 数据项的唯一标识字段名 |\n| nameKey | String | 'name' | 数据项的名称字段名 |\n| childrenKey | String | 'children' | 树形数据子节点字段名 |\n| tabDisabled | Number | -1 | 禁用的tab页，0表示静态，1表示动态 |\n| activeDiabled | Array | [3] | 禁用的输入方式数组 |\n| activeUnshow | Array | [] | 不显示的输入方式选项 |\n| selectUnshow | Array | [] | 不显示的select框选项 |\n| defaultActive | Number | 必填 | 默认激活的tab页，0表示静态，1表示动态 |\n| defaultEmptyDesc | String | '在左侧选择主机/节点/动态分组' | 右侧表格空数据提示文本 |\n| inputIpSplit | String | '|' | 输入IP的分隔符 |\n| getDefaultData | Function | 必填 | 获取默认数据的函数 |\n| getFetchData | Function | 必填 | 获取勾选数据的函数 |\n| filterMethod | Function | 空函数 | 树形数据过滤方法 |\n| isShowTreeLoading | Boolean | true | 是否显示树形数据加载状态 |\n| isShowTableLoading | Boolean | true | 是否显示表格数据加载状态 |\n| isInstance | Boolean | false | 是否为实例对象（只能选择动态tab的业务拓扑） |\n| isExtranet | Boolean | false | 是否为外网环境 |\n| topoHeight | Number | - | 拓扑树的高度（设置此属性可开启虚拟滚动） |\n\n事件"},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n| 事件名 | 参数 | 说明 |\n|--------|------|------|\n| active-select-change | {newValue, oldValue} | 当前激活的select选项改变时触发 |\n\n插槽"},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n组件提供了多个插槽用于自定义不同部分的展示内容：\n1. left-tab：自定义左侧标签页文字\n2. static-input：自定义静态IP输入区域\n3. static-topo：自定义静态业务拓扑区域\n4. static-extranet-input：自定义静态外网IP输入区域\n5. dynamic-topo：自定义动态业务拓扑区域\n6. dynamic-group：自定义动态分组区域\n7. search-noData：自定义搜索无数据时的展示内容\n8. right-wrap：自定义右侧整体包装区域\n9. static-ip-panel：自定义静态IP面板内容\n10. dynamic-topo-panel：自定义动态拓扑面板内容\n11. dynamic-group-panel：自定义动态分组面板内容\n12. static-extranet-panel：自定义静态外网IP面板内容\n\n方法"},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n| 方法名 | 参数 | 说明 |\n|--------|------|------|\n| getValues() | 无 | 获取当前选中的值，返回包含staticIp和dynamicTopo的对象 |\n\n自定义配置示例"},{"attributes":{"header":1},"insert":"\n"},{"attributes":{"code-block":"plain"},"insert":"\n"},{"insert":"<template>"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  <IpSelect"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    :min-width=\"900\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    :height=\"500\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    :default-active=\"0\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    :is-extranet=\"true\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    :get-default-data=\"fetchDefaultData\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    :get-fetch-data=\"fetchSelectedData\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    @active-select-change=\"onActiveChange\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  >"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    <!-- 自定义左侧标签页 -->"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    <template #left-tab=\"{ active }\">"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      {{ active === 0 ? '静态IP' : '动态选择' }}"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    </template>"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    "},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    <!-- 自定义静态IP输入区域 -->"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    <template #static-input=\"{ defaultText, checked }\">"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      <custom-static-input "},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"        :default-text=\"defaultText\" "},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"        :checked=\"checked\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"        @checked=\"handleStaticChecked\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      />"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    </template>"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    "},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    <!-- 自定义右侧静态IP面板 -->"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    <template #static-ip-panel=\"{ data, deleteClick }\">"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      <custom-table :data=\"data\" @delete=\"deleteClick\" />"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    </template>"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  </IpSelect>"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"</template>"},{"attributes":{"code-block":"vue"},"insert":"\n\n"}],"extra":{"updator":"Austin","update_at":"2026-01-21 15:52:23"}}