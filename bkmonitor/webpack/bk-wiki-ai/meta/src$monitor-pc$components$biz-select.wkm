{"ops":[{"insert":"这是一个基于 Vue.js 的业务选择器组件，主要用于在界面上选择一个业务（Business）或空间（Space）。下面是对这些文件的详细说明：\n\n整体功能概述"},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n这个组件系统主要实现了一个下拉选择框，用于展示和选择业务信息，支持：\n- 展示业务列表，包括业务名称、ID、类型等；\n- 支持按业务类型筛选（如容器项目、普通业务等）；\n- 支持搜索业务名称或 ID；\n- 支持设置“常用业务”和“置顶业务”；\n- 支持将某个业务设为“默认业务”；\n- 支持主题切换（明暗主题：light / dark）；\n- 支持业务项的选中状态、悬停效果等交互；\n- 提供业务管理入口（如跳转到业务管理页面）；\n- 支持权限校验，如果无权限可跳转申请。\n\n它主要分为两个核心部分：\n1. biz-selec：外层选择器组件，负责 UI 交互、弹出层控制、搜索、主题、常用业务缓存等。\n2. list：内层列表组件，负责具体的业务项渲染、选中逻辑、默认业务设置弹窗等。\n"},{"attributes":{"header":1},"insert":"\n"},{"insert":"使用方法"},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n假设你在某个 Vue 页面或组件中需要使用这个业务选择器，可以按如下方式引入和使用：\n"},{"attributes":{"code-block":"plain"},"insert":"\n"},{"insert":"<template>"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  <div>"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    <BizSelect"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      :biz-list=\"businessList\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      :value=\"selectedBizId\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      :theme=\"'dark'\""},{"attributes":{"code-block":"plain"},"insert":"\n"},{"insert":"      :is-show-common=\"true\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      :can-set-default-space=\"true\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      @change=\"onBizChange\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      @open-space-manager=\"onOpenSpaceManager\""},{"attributes":{"code-block":"plain"},"insert":"\n"},{"insert":"    />"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  </div>"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"</template>"},{"attributes":{"code-block":"vue"},"insert":"\n\n"},{"insert":"<script lang=\"ts\">"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"import { defineComponent, ref } from 'vue';"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"import BizSelect from '@/components/BizSelect/biz-select'; // 路径根据实际调整"},{"attributes":{"code-block":"vue"},"insert":"\n\n"},{"insert":"export default defineComponent({"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  components: { BizSelect },"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  setup() {"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    const selectedBizId = ref<number>(1); // 假定选中的业务 ID"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    const businessList = ref<any[]>(["},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      // 你的业务数据，格式要符合 ISpaceItem 接口"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    ]);"},{"attributes":{"code-block":"vue"},"insert":"\n\n"},{"insert":"    const onBizChange = (id: number) => {"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      selectedBizId.value = id;"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      console.log('选中了业务 ID:', id);"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    };"},{"attributes":{"code-block":"vue"},"insert":"\n\n"},{"insert":"    const onOpenSpaceManager = () => {"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      console.log('打开业务管理页面');"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    };"},{"attributes":{"code-block":"vue"},"insert":"\n\n"},{"insert":"    return {"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      selectedBizId,"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      businessList,"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      onBizChange,"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      onOpenSpaceManager,"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    };"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  },"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"});"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"</script>"},{"attributes":{"code-block":"vue"},"insert":"\n\n"},{"insert":"\nProps 说明（给 biz-select 组件传参）："},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n| 参数名             | 类型       | 必填 | 说明 |\n|--------------------|------------|------|------|\n| bizList            | ISpaceItem[] | 是   | 业务数据列表 |\n| value              | number     | 否   | 当前选中的业务 ID |\n| theme              | 'light' / 'dark' | 否 | 主题，默认 light |\n| isShrink           | boolean    | 否   | 是否只显示首字母 |\n| isShowCommon       | boolean    | 否   | 是否显示常用业务 |\n| canSetDefaultSpace | boolean    | 否   | 是否允许设为默认业务 |\n| stickyList         | string[]   | 否   | 置顶业务 UID 列表 |\n| minWidth           | number     | 否   | 弹窗最小宽度 |\n| zIndex             | number     | 否   | 弹窗层级 |\n\n事件监听："},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n| 事件名     | 参数     | 说明 |\n|------------|----------|------|\n| change     | number   | 业务 ID 发生改变时触发 |\n| openSpaceManager | 无参数  | 点击“空间管理”按钮时触发 |\n\n---\n\n总结"},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n这套组件是一套功能完整、交互丰富、可主题定制、支持权限与缓存的业务选择器，适用于后台管理系统、运维平台、云产品控制台等需要选择某个业务/空间上下文的场景。\n\n核心亮点：\n- 支持明暗主题、自定义样式；\n- 支持搜索、筛选、置顶、常用缓存；\n- 支持默认业务设置与确认弹窗；\n- 支持权限控制与引导；\n- 组件化设计，结构清晰，易于扩展和维护。\n\n如需在其他项目中复用，只需确保传入正确的数据格式（ISpaceItem）以及处理相应的事件即可。\n"}],"extra":{"updator":"Austin","update_at":"2026-01-21 11:23:31"}}