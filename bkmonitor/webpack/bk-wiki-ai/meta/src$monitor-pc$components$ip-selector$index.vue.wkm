{"ops":[{"insert":"这是一个基于 Vue.js 框架开发的 IP 选择器组件（ip-selector），主要用于在用户界面中以可视化的方式选择和管理 IP 地址或相关资源（如服务器、节点等）。它通常用于运维平台、云计算管理平台或网络配置相关的系统中，比如腾讯蓝鲸智云 PaaS 平台。\n\n基本用途"},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n- 提供一个可交互的界面，让用户能够通过“树形结构”等方式浏览和选择 IP 或相关资源。\n- 支持将选择的 IP 或资源以“预览面板”的形式展示在侧边，方便查看与操作（如移除、复制等）。\n- 支持标签页（Tab）切换，可以在不同的资源分组或不同类型的 IP 列表之间进行切换。\n- 支持响应式布局，预览面板可以收起/展开，节省页面空间。\n\n主要功能"},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n1. 多面板支持（Tabs + 内容区）\n   - 通过 `panels` 属性传入多个面板配置，每个面板代表一组可选择的数据（比如不同业务、不同模块下的 IP 列表）。\n   - 使用 `SelectorTab` 组件实现标签页切换，用户可以选择不同的面板查看对应的 IP 数据。\n   - 内容区域通过 `SelectorContent` 渲染当前选中面板的具体内容（通常是树形结构或其他形式的资源列表）。\n\n2. IP/资源预览与操作\n   - 右侧预览区域（`SelectorPreview`）展示已选中的 IP 或资源，支持对选中项进行操作，例如：\n     - 移除节点（删除已选项）\n     - 菜单点击（自定义操作，比如复制、编辑等）\n   - 预览区域支持设置宽度、操作菜单、默认激活项等。\n\n3. 可折叠/展开的布局\n   - 默认情况下，预览区域是收起的，只显示一个“展开”按钮（位于左侧内容区域边缘）。\n   - 用户可以点击该按钮展开右侧预览面板，也可以通过属性控制其默认状态。\n\n4. 高度与尺寸控制\n   - 支持通过 props 设置组件整体高度、树形控件高度、预览区域宽度等，适配不同页面布局需求。\n\n5. 事件通信\n   - 支持多种自定义事件，比如：\n     - tab-change：标签页切换时触发\n     - menu-click：预览区菜单操作时触发\n     - remove-node：从预览区移除某个节点时触发\n   - 支持向父组件传递用户的选择和操作行为，便于后续处理（如提交、保存等）。\n\n使用方法"},{"attributes":{"header":1},"insert":"\n"},{"attributes":{"code-block":"plain"},"insert":"\n"},{"insert":"<template>"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"  <ip-selector"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"    :panels=\"panelList\""},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"    :tree-height=\"400\""},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"    :preview-data=\"selectedIPs\""},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"    :preview-operate-list=\"menuOptions\""},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"    :preview-range=\"[100, 500]\""},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"    :height=\"'500px'\""},{"attributes":{"code-block":"plain"},"insert":"\n"},{"insert":"    @tab-change=\"onTabChange\""},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"    @menu-click=\"onMenuClick\""},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"    @remove-node=\"onRemoveNode\""},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"  />"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"</template>"},{"attributes":{"code-block":"html"},"insert":"\n"},{"attributes":{"code-block":"plain"},"insert":"\n"},{"insert":"<script lang=\"ts\">"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"import IpSelector from '@/components/IpSelector.vue';"},{"attributes":{"code-block":"html"},"insert":"\n\n"},{"insert":"export default {"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"  components: {"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"    IpSelector,"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"  },"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"  data() {"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"    return {"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"      panelList: ["},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"        { name: 'panel1', label: '业务一' },"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"        { name: 'panel2', label: '业务二' },"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"      ],"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"      selectedIPs: [],"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"      menuOptions: [],"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"    };"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"  },"},{"attributes":{"code-block":"plain"},"insert":"\n"},{"insert":"  methods: {"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"    onTabChange(panelName) {"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"      console.log('切换到面板:', panelName);"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"    },"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"    onMenuClick({ menu, item }) {"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"      console.log('菜单点击:', menu, item);"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"    },"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"    onRemoveNode({ child, item }) {"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"      console.log('移除节点:', child, item);"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"    },"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"  },"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"};"},{"attributes":{"code-block":"html"},"insert":"\n"},{"insert":"</script>"},{"attributes":{"code-block":"html"},"insert":"\n\n"},{"insert":"\n主要 Props 说明"},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n| 参数名             | 类型                   | 默认值         | 说明 |\n|--------------------|------------------------|----------------|------|\n| panels             | Array<IPanel>          | 必填           | 标签页面板配置，每个对象一般包含 name 和 label 等字段，表示不同的 IP 分组或视图 |\n| active             | String                 | ''             | 当前激活的面板名称，如果不设置会默认取 panels 的第一个 |\n| tabVisible         | Boolean                | true           | 是否显示标签页切换栏 |\n| treeHeight         | Number / String        | 300            | 左侧树形内容区域的高度 |\n| previewWidth       | Number / String        | 280            | 预览区域的默认宽度 |\n| previewRange       | Array<Number>          | [150, 600]     | 预览区域允许调整的宽度范围 |\n| previewData        | Array<IPreviewData>    | []             | 当前已选中的 IP 或资源数据，用于在预览区展示 |\n| previewOperateList | Array<IMenu> / Function| []             | 预览区可执行的操作菜单，比如“移除”、“复制”等 |\n| height             | Number / String        | -              | 整个组件的高度，可以是固定像素值或百分比等 |\n| defaultActiveName  | Array                  | []             | 默认选中的节点名称，一般用于回显已选数据 |\n\n事件监听（@event）"},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n| 事件名         | 说明                                  | 参数 |\n|----------------|---------------------------------------|------|\n| tab-change     | 切换面板时触发                        | 当前激活的面板名称（String） |\n| menu-click     | 点击预览区操作菜单时触发              | 包含 menu（操作类型）和 item（数据项）的对象 |\n| remove-node    | 从预览区移除某个节点时触发            | 包含 child 和 item 的对象 |\n| update:active  | 更新当前激活面板（通常由 v-model 控制）| 新的面板名称 |\n\n内部组件结构"},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n该组件是一个组合式组件，由以下几个子组件构成：\n\n- **SelectorTab**：标签页切换栏，用于切换不同的面板（业务/分类视图）。\n- **SelectorContent**：内容区域，渲染当前选中面板中的具体数据（通常是树形结构）。\n- **SelectorPreview**：右侧预览区域，展示已选择的 IP 或资源，支持操作和动态宽度调整。\n"}],"extra":{"updator":"Austin","update_at":"2026-01-21 15:57:24"}}