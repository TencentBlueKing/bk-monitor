{"ops":[{"insert":"这是一个基于 Vue.js 和 TypeScript 开发的 **时间周期输入组件（CycleInput）**，主要用于让用户以友好的交互方式选择或输入一个时间间隔，比如“每 5 分钟”或“每 10 秒”这样的周期性任务配置。\n\n基本用途"},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n该组件的主要用途是提供一个可交互的输入控件，让用户能够方便地选择或输入一个时间周期（如秒、分钟等），并支持自定义选项和最小时间限制，常用于后台管理系统中配置定时任务、轮询间隔等场景。\n\n主要功能"},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n1. 时间单位切换"},{"attributes":{"header":2},"insert":"\n"},{"insert":"- 支持不同的时间单位，例如：秒（s）、分钟（m）等。\n- 用户可以点击单位按钮（如 “分”、“秒”）来切换当前输入的时间单位。\n\n2. 数值输入与选择"},{"attributes":{"header":2},"insert":"\n"},{"insert":"- 用户可以直接输入一个数字，也可以通过弹出的下拉列表选择一个预设的常用周期值（如 10 秒、30 秒、1 分钟等）。\n- 输入框会根据当前选择的单位显示相应的数值。\n\n3. 自动与手动模式"},{"attributes":{"header":2},"insert":"\n"},{"insert":"- 支持一个特殊选项 `auto`，表示“自动”或“默认”的周期，通常用于不需要用户干预的场景。\n- 可通过 props 控制是否显示 `auto` 选项，以及是否需要过滤掉它。\n\n4. 样式交互反馈"},{"attributes":{"header":2},"insert":"\n"},{"insert":"- 输入框和控制按钮有丰富的 hover、focus、选中态样式，提升用户体验。\n- 支持弹出层（Popover）展示可选周期值或单位，带有动画效果。\n\n5. 数据校验与转换"},{"attributes":{"header":2},"insert":"\n"},{"insert":"- 自动将用户输入或选择的值转换为以“秒”为单位的整数值，便于后端处理。\n- 支持设置最小时间限制（如最少 10 秒），低于此值的输入会被自动纠正。\n\n6. 高度可配置"},{"attributes":{"header":2},"insert":"\n"},{"insert":"- 支持自定义时间选项（如不同的秒数/分钟数候选值）。\n- 支持设置默认值、占位符、弹出层挂载位置等。\n"},{"attributes":{"header":1},"insert":"\n"},{"insert":"主要 Props（配置项）："},{"attributes":{"header":1},"insert":"\n"},{"insert":"\n| Prop 名称 | 类型 | 默认值 | 说明 |\n|----------|------|--------|------|\n| `value` | Number / String | 0 | 当前选中的时间周期值，支持双向绑定 |\n| `options` | Array | 默认包含秒/分的常用选项 | 时间周期的可选项，如 [{id: 10, name: 10}, {id: 'auto', name: 'auto'}] |\n| `minSec` | Number | 10 | 允许的最小秒数，低于此值会被自动调整 |\n| `appendTo` | String | 'body' | 弹出层挂载的 DOM 节点 |\n| `needAuto` | Boolean | true | 是否显示 “auto” 选项 |\n| `isNeedDefaultVal` | Boolean | false | 是否在值为 0 时填入默认值 |\n| `hasExpanded` | Boolean | false | 是否显示展开箭头等额外 UI |\n\n主要事件："},{"attributes":{"header":1},"insert":"\n"},{"insert":"- `@change`：当用户修改了时间周期时触发，返回的是以秒为单位的数值（或 `'auto'`）。\n\n内部状态："},{"attributes":{"header":1},"insert":"\n"},{"insert":"- `localValue`：当前输入的数值，可能是数字或 `'auto'`。\n- `unit`：当前选择的时间单位，如 `'s'`（秒）、`'m'`（分钟）。\n- `unitActive`：控制单位选择弹出层的显示状态。\n\n基本用法"},{"attributes":{"header":1},"insert":"\n"},{"attributes":{"code-block":"plain"},"insert":"\n"},{"insert":"<template>"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  <div>"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    <CycleInput"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      v-model=\"timeInterval\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      :min-sec=\"10\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      :options=\"myOptions\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      @change=\"onTimeIntervalChange\""},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    />"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  </div>"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"</template>"},{"attributes":{"code-block":"vue"},"insert":"\n\n"},{"insert":"<script lang=\"ts\">"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"import { defineComponent, ref } from 'vue';"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"import CycleInput from './path-to/CycleInput';"},{"attributes":{"code-block":"vue"},"insert":"\n\n"},{"insert":"export default defineComponent({"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  components: {"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    CycleInput,"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  },"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  setup() {"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    const timeInterval = ref(60); // 默认 60 秒"},{"attributes":{"code-block":"vue"},"insert":"\n\n"},{"insert":"    const myOptions = ["},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      { id: 's', name: '秒', children: ["},{"attributes":{"code-block":"plain"},"insert":"\n"},{"insert":"        { id: 10, name: 10 },"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"        { id: 30, name: 30 },"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"        { id: 60, name: 60 },"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      ]},"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      { id: 'm', name: '分', children: ["},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"        { id: 1, name: 1 },"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"        { id: 5, name: 5 },"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"        { id: 'auto', name: '自动' },"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      ]},"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    ];"},{"attributes":{"code-block":"vue"},"insert":"\n\n"},{"insert":"    const onTimeIntervalChange = (value: number | 'auto') => {"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      console.log('用户选择的时间间隔（秒）:', value);"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    };"},{"attributes":{"code-block":"vue"},"insert":"\n\n"},{"insert":"    return {"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      timeInterval,"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      myOptions,"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"      onTimeIntervalChange,"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"    };"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"  },"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"});"},{"attributes":{"code-block":"vue"},"insert":"\n"},{"insert":"</script>"},{"attributes":{"code-block":"vue"},"insert":"\n\n"},{"insert":"\n2. 参数解释"},{"attributes":{"header":1},"insert":"\n"},{"insert":"- `v-model=\"timeInterval\"`：绑定当前周期值，可以是数字（秒数）或字符串 `'auto'`。\n- `:min-sec=\"10\"`：设置允许的最小时间（10 秒），小于此值会被自动纠正。\n- `:options=\"myOptions\"`：自定义时间单位及其下属的周期选项。\n- `@change=\"onTimeIntervalChange\"`：监听用户修改事件，获取最新的周期值。\n\n如你还需要配套的英文文档、组件接入指南、或者想将该组件改写为 Composition API 风格，我也可以继续帮助你！\n"}],"extra":{"updator":"Austin","update_at":"2026-01-21 14:39:39"}}