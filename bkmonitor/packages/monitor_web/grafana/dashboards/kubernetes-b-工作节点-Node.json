{
  "annotations":{
    "list":[
      {
        "builtIn":1,
        "datasource":{
          "type":"datasource",
          "uid":"grafana"
        },
        "enable":true,
        "hide":true,
        "iconColor":"rgba(0, 211, 255, 1)",
        "name":"Annotations & Alerts",
        "target":{
          "limit":100,
          "matchAny":false,
          "tags":[

          ],
          "type":"dashboard"
        },
        "type":"dashboard"
      }
    ]
  },
  "editable":true,
  "fiscalYearStartMonth":0,
  "graphTooltip":0,
  "links":[

  ],
  "liveNow":false,
  "panels":[
    {
      "collapsed":false,
      "gridPos":{
        "h":1,
        "w":24,
        "x":0,
        "y":0
      },
      "id":47,
      "panels":[

      ],
      "title":"Node总体使用情况",
      "type":"row"
    },
    {
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "description":"容器内存每5分钟触顶总次数，健康应该为0",
      "fieldConfig":{
        "defaults":{
          "color":{
            "mode":"thresholds"
          },
          "mappings":[

          ],
          "max":1,
          "min":0,
          "thresholds":{
            "mode":"absolute",
            "steps":[
              {
                "color":"blue",
                "value":null
              },
              {
                "color":"orange",
                "value":0.000001
              }
            ]
          },
          "unit":"short"
        },
        "overrides":[

        ]
      },
      "gridPos":{
        "h":6,
        "w":3,
        "x":0,
        "y":1
      },
      "id":35,
      "links":[

      ],
      "maxDataPoints":100,
      "options":{
        "colorMode":"value",
        "graphMode":"area",
        "justifyMode":"auto",
        "orientation":"horizontal",
        "reduceOptions":{
          "calcs":[
            "mean"
          ],
          "fields":"",
          "values":false
        },
        "textMode":"auto"
      },
      "pluginVersion":"9.1.0",
      "targets":[
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[

          ],
          "format":"time_series",
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":true,
              "filter_dict":{

              },
              "functions":[
                {
                  "id":"irate",
                  "params":[
                    {
                      "id":"window",
                      "value":"5m"
                    }
                  ]
                }
              ],
              "group_by":[

              ],
              "interval":60,
              "interval_unit":"s",
              "method":"sum_without_time",
              "metric_field":"container_memory_failcnt",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"container",
                  "method":"neq",
                  "value":[
                    "POD"
                  ]
                },
                {
                  "condition":"and",
                  "key":"job",
                  "method":"eq",
                  "value":[
                    "kubelet",
                    "cadvisor"
                  ]
                },
                {
                  "condition":"and",
                  "key":"node",
                  "method":"eq",
                  "value":[
                    "$node"
                  ]
                }
              ]
            }
          ],
          "refId":"A",
          "source":"",
          "step":"",
          "type":"instant"
        }
      ],
      "title":"容器内存触顶次数",
      "type":"stat"
    },
    {
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "description":"容器每5分钟被CPU限流的总时间，合理情况下应该为0",
      "fieldConfig":{
        "defaults":{
          "color":{
            "mode":"thresholds"
          },
          "decimals":2,
          "mappings":[

          ],
          "max":1,
          "min":0,
          "thresholds":{
            "mode":"percentage",
            "steps":[
              {
                "color":"#299c46",
                "value":null
              },
              {
                "color":"red",
                "value":0.00001
              }
            ]
          },
          "unit":"short"
        },
        "overrides":[

        ]
      },
      "gridPos":{
        "h":6,
        "w":3,
        "x":3,
        "y":1
      },
      "id":37,
      "links":[

      ],
      "maxDataPoints":100,
      "options":{
        "colorMode":"value",
        "graphMode":"area",
        "justifyMode":"auto",
        "orientation":"horizontal",
        "reduceOptions":{
          "calcs":[
            "mean"
          ],
          "fields":"",
          "values":false
        },
        "textMode":"auto"
      },
      "pluginVersion":"9.1.0",
      "targets":[
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[

          ],
          "format":"time_series",
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":true,
              "filter_dict":{

              },
              "functions":[
                {
                  "id":"irate",
                  "params":[
                    {
                      "id":"window",
                      "value":"5m"
                    }
                  ]
                }
              ],
              "group_by":[

              ],
              "interval":60,
              "interval_unit":"s",
              "method":"sum_without_time",
              "metric_field":"container_cpu_cfs_throttled_seconds_total",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"container",
                  "method":"neq",
                  "value":[
                    "POD"
                  ]
                },
                {
                  "condition":"and",
                  "key":"job",
                  "method":"eq",
                  "value":[
                    "kubelet",
                    "cadvisor"
                  ]
                },
                {
                  "condition":"and",
                  "key":"node",
                  "method":"eq",
                  "value":[
                    "$node"
                  ]
                }
              ]
            }
          ],
          "refId":"A",
          "source":"",
          "step":"",
          "type":"instant"
        }
      ],
      "title":"ContainerThrottledTime",
      "type":"stat"
    },
    {
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "description":"预分配CPU核数",
      "fieldConfig":{
        "defaults":{
          "color":{
            "mode":"thresholds"
          },
          "mappings":[
            {
              "options":{
                "match":"null",
                "result":{
                  "text":"N/A"
                }
              },
              "type":"special"
            }
          ],
          "max":1,
          "min":0,
          "thresholds":{
            "mode":"percentage",
            "steps":[
              {
                "color":"blue",
                "value":null
              }
            ]
          },
          "unit":"short"
        },
        "overrides":[

        ]
      },
      "gridPos":{
        "h":3,
        "w":4,
        "x":6,
        "y":1
      },
      "id":25,
      "links":[

      ],
      "maxDataPoints":100,
      "options":{
        "colorMode":"value",
        "graphMode":"area",
        "justifyMode":"auto",
        "orientation":"horizontal",
        "reduceOptions":{
          "calcs":[
            "mean"
          ],
          "fields":"",
          "values":false
        },
        "textMode":"auto"
      },
      "pluginVersion":"9.1.0",
      "targets":[
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[
            {
              "active":true,
              "alias":"",
              "expression":"a/1000",
              "functions":[

              ]
            }
          ],
          "format":"time_series",
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":false,
              "filter_dict":{

              },
              "functions":[

              ],
              "group_by":[

              ],
              "interval":60,
              "interval_unit":"s",
              "method":"sum_without_time",
              "metric_field":"container_spec_cpu_shares",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"container",
                  "method":"neq",
                  "value":[
                    "POD"
                  ]
                },
                {
                  "condition":"and",
                  "key":"job",
                  "method":"eq",
                  "value":[
                    "kubelet",
                    "cadvisor"
                  ]
                },
                {
                  "condition":"and",
                  "key":"node",
                  "method":"eq",
                  "value":[
                    "$node"
                  ]
                }
              ]
            }
          ],
          "refId":"A",
          "source":"",
          "step":"",
          "type":"instant"
        }
      ],
      "title":"预分配CPU核数(Requests)",
      "type":"stat"
    },
    {
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "description":"Memory Requests Commitment",
      "fieldConfig":{
        "defaults":{
          "color":{
            "mode":"thresholds"
          },
          "mappings":[
            {
              "options":{
                "match":"null",
                "result":{
                  "text":"N/A"
                }
              },
              "type":"special"
            }
          ],
          "max":1,
          "min":0,
          "thresholds":{
            "mode":"percentage",
            "steps":[
              {
                "color":"blue",
                "value":null
              }
            ]
          },
          "unit":"decbytes"
        },
        "overrides":[

        ]
      },
      "gridPos":{
        "h":3,
        "w":4,
        "x":10,
        "y":1
      },
      "id":27,
      "links":[

      ],
      "maxDataPoints":100,
      "options":{
        "colorMode":"value",
        "graphMode":"area",
        "justifyMode":"auto",
        "orientation":"horizontal",
        "reduceOptions":{
          "calcs":[
            "mean"
          ],
          "fields":"",
          "values":false
        },
        "textMode":"auto"
      },
      "pluginVersion":"9.1.0",
      "targets":[
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[

          ],
          "format":"time_series",
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":true,
              "filter_dict":{

              },
              "functions":[

              ],
              "group_by":[

              ],
              "interval":60,
              "interval_unit":"s",
              "method":"sum_without_time",
              "metric_field":"kube_pod_container_resource_requests_memory_bytes",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"node",
                  "method":"eq",
                  "value":[
                    "$node"
                  ]
                }
              ]
            }
          ],
          "refId":"A",
          "source":"",
          "step":"",
          "type":"instant"
        }
      ],
      "title":"预分配内存(Requests)",
      "type":"stat"
    },
    {
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "description":"CPU Requests Commitment",
      "fieldConfig":{
        "defaults":{
          "color":{
            "mode":"thresholds"
          },
          "mappings":[
            {
              "options":{
                "match":"null",
                "result":{
                  "text":"N/A"
                }
              },
              "type":"special"
            }
          ],
          "min":0,
          "thresholds":{
            "mode":"percentage",
            "steps":[
              {
                "color":"blue",
                "value":null
              }
            ]
          },
          "unit":"short"
        },
        "overrides":[

        ]
      },
      "gridPos":{
        "h":3,
        "w":4,
        "x":14,
        "y":1
      },
      "id":33,
      "links":[

      ],
      "maxDataPoints":100,
      "options":{
        "colorMode":"value",
        "graphMode":"area",
        "justifyMode":"auto",
        "orientation":"auto",
        "reduceOptions":{
          "calcs":[
            "lastNotNull"
          ],
          "fields":"",
          "values":false
        },
        "textMode":"auto"
      },
      "pluginVersion":"9.1.0",
      "targets":[
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[

          ],
          "format":"time_series",
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":true,
              "filter_dict":{

              },
              "functions":[

              ],
              "group_by":[

              ],
              "interval":60,
              "interval_unit":"s",
              "method":"COUNT",
              "metric_field":"container_cpu_load_average_10s",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"container",
                  "method":"neq",
                  "value":[
                    "POD"
                  ]
                },
                {
                  "condition":"and",
                  "key":"job",
                  "method":"reg",
                  "value":[
                    "kubelet",
                    "cadvisor"
                  ]
                },
                {
                  "condition":"and",
                  "key":"container",
                  "method":"reg",
                  "value":[
                    "[a-z]",
                    "[A-Z]"
                  ]
                },
                {
                  "condition":"and",
                  "key":"node",
                  "method":"eq",
                  "value":[
                    "$node"
                  ]
                }
              ]
            }
          ],
          "refId":"A",
          "source":"sum by(container) (sum_over_time(container_cpu_load_average_10s{bcs_cluster_id=\"$cluster_id\",container!~\"^(POD|)$\",job=~\"^(kubelet|cadvisor)$\"}[1m]))",
          "step":"",
          "type":"instant"
        }
      ],
      "title":"容器数",
      "type":"stat"
    },
    {
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "description":"集群节点CPU15分钟负载使用",
      "fieldConfig":{
        "defaults":{
          "color":{
            "mode":"palette-classic"
          },
          "custom":{
            "axisCenteredZero":false,
            "axisColorMode":"text",
            "axisLabel":"",
            "axisPlacement":"auto",
            "barAlignment":0,
            "drawStyle":"line",
            "fillOpacity":0,
            "gradientMode":"none",
            "hideFrom":{
              "legend":false,
              "tooltip":false,
              "viz":false
            },
            "lineInterpolation":"linear",
            "lineWidth":1,
            "pointSize":5,
            "scaleDistribution":{
              "type":"linear"
            },
            "showPoints":"auto",
            "spanNulls":false,
            "stacking":{
              "group":"A",
              "mode":"none"
            },
            "thresholdsStyle":{
              "mode":"off"
            }
          },
          "mappings":[

          ],
          "min":0,
          "thresholds":{
            "mode":"percentage",
            "steps":[
              {
                "color":"blue",
                "value":null
              }
            ]
          },
          "unit":"short"
        },
        "overrides":[

        ]
      },
      "gridPos":{
        "h":6,
        "w":6,
        "x":18,
        "y":1
      },
      "id":29,
      "links":[

      ],
      "maxDataPoints":100,
      "options":{
        "legend":{
          "calcs":[

          ],
          "displayMode":"list",
          "placement":"bottom",
          "showLegend":true
        },
        "tooltip":{
          "mode":"single",
          "sort":"none"
        }
      },
      "pluginVersion":"9.1.0",
      "targets":[
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[

          ],
          "format":"time_series",
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"load15",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":true,
              "filter_dict":{

              },
              "functions":[

              ],
              "group_by":[

              ],
              "interval":60,
              "interval_unit":"s",
              "method":"avg_without_time",
              "metric_field":"node_load15",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"container",
                  "method":"neq",
                  "value":[
                    "POD"
                  ]
                },
                {
                  "condition":"and",
                  "key":"job",
                  "method":"reg",
                  "value":[
                    "node-exporter"
                  ]
                },
                {
                  "condition":"and",
                  "key":"instance",
                  "method":"eq",
                  "value":[
                    "$node:9101"
                  ]
                }
              ]
            }
          ],
          "refId":"A",
          "source":"",
          "step":"",
          "type":"range"
        }
      ],
      "title":"CPU负载",
      "type":"timeseries"
    },
    {
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "description":"节点CPU总核数",
      "fieldConfig":{
        "defaults":{
          "color":{
            "mode":"thresholds"
          },
          "decimals":0,
          "mappings":[
            {
              "options":{
                "match":"null",
                "result":{
                  "text":"N/A"
                }
              },
              "type":"special"
            }
          ],
          "max":1,
          "min":0,
          "thresholds":{
            "mode":"absolute",
            "steps":[
              {
                "color":"blue",
                "value":null
              }
            ]
          },
          "unit":"none"
        },
        "overrides":[
          {
            "matcher":{
              "id":"byName",
              "options":"Value"
            },
            "properties":[
              {
                "id":"unit",
                "value":"cores"
              }
            ]
          }
        ]
      },
      "gridPos":{
        "h":3,
        "w":4,
        "x":6,
        "y":4
      },
      "id":21,
      "links":[

      ],
      "maxDataPoints":100,
      "options":{
        "colorMode":"value",
        "graphMode":"none",
        "justifyMode":"auto",
        "orientation":"horizontal",
        "reduceOptions":{
          "calcs":[
            "mean"
          ],
          "fields":"",
          "values":false
        },
        "text":{

        },
        "textMode":"auto"
      },
      "pluginVersion":"9.1.0",
      "targets":[
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[

          ],
          "format":"time_series",
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":true,
              "filter_dict":{

              },
              "functions":[

              ],
              "group_by":[

              ],
              "interval":60,
              "interval_unit":"s",
              "method":"sum_without_time",
              "metric_field":"kube_node_status_allocatable_cpu_cores",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"node",
                  "method":"eq",
                  "value":[
                    "$node"
                  ]
                }
              ]
            }
          ],
          "refId":"A",
          "source":"sum(kube_pod_container_resource_requests_cpu_cores{bcs_cluster_id=\"$cluster_id\"}) / on() group_right() sum(kube_node_status_allocatable_cpu_cores{bcs_cluster_id=\"$cluster_id\"})",
          "step":"",
          "type":"instant"
        }
      ],
      "title":"CPU总核数",
      "type":"stat"
    },
    {
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "description":"Memory Utilisation",
      "fieldConfig":{
        "defaults":{
          "color":{
            "mode":"thresholds"
          },
          "mappings":[

          ],
          "max":1,
          "min":0,
          "thresholds":{
            "mode":"absolute",
            "steps":[
              {
                "color":"blue",
                "value":null
              }
            ]
          },
          "unit":"decbytes"
        },
        "overrides":[

        ]
      },
      "gridPos":{
        "h":3,
        "w":4,
        "x":10,
        "y":4
      },
      "id":23,
      "links":[

      ],
      "maxDataPoints":100,
      "options":{
        "colorMode":"value",
        "graphMode":"none",
        "justifyMode":"auto",
        "orientation":"horizontal",
        "reduceOptions":{
          "calcs":[
            "mean"
          ],
          "fields":"",
          "values":false
        },
        "text":{

        },
        "textMode":"auto"
      },
      "pluginVersion":"9.1.0",
      "targets":[
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[

          ],
          "format":"time_series",
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":true,
              "filter_dict":{

              },
              "functions":[

              ],
              "group_by":[

              ],
              "interval":60,
              "interval_unit":"s",
              "method":"sum_without_time",
              "metric_field":"node_memory_MemTotal_bytes",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"job",
                  "method":"reg",
                  "value":[
                    "node-exporter"
                  ]
                },
                {
                  "condition":"and",
                  "key":"bk_endpoint_url",
                  "method":"reg",
                  "value":[
                    "http://$node:9101/metrics"
                  ]
                }
              ]
            }
          ],
          "refId":"A",
          "source":"sum(node_memory_MemTotal_bytes{bcs_cluster_id=\"$cluster_id\",job=~\"node-exporter\"})",
          "step":"",
          "type":"instant"
        }
      ],
      "title":"内存总量",
      "type":"stat"
    },
    {
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "description":"POD数",
      "fieldConfig":{
        "defaults":{
          "color":{
            "mode":"thresholds"
          },
          "mappings":[
            {
              "options":{
                "match":"null",
                "result":{
                  "text":"N/A"
                }
              },
              "type":"special"
            }
          ],
          "min":0,
          "thresholds":{
            "mode":"absolute",
            "steps":[
              {
                "color":"blue",
                "value":null
              }
            ]
          },
          "unit":"short"
        },
        "overrides":[

        ]
      },
      "gridPos":{
        "h":3,
        "w":4,
        "x":14,
        "y":4
      },
      "id":31,
      "links":[

      ],
      "maxDataPoints":100,
      "options":{
        "colorMode":"value",
        "graphMode":"area",
        "justifyMode":"auto",
        "orientation":"auto",
        "reduceOptions":{
          "calcs":[
            "lastNotNull"
          ],
          "fields":"",
          "values":false
        },
        "textMode":"auto"
      },
      "pluginVersion":"9.1.0",
      "targets":[
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[

          ],
          "format":"time_series",
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":true,
              "filter_dict":{

              },
              "functions":[

              ],
              "group_by":[

              ],
              "interval":60,
              "interval_unit":"s",
              "method":"sum_without_time",
              "metric_field":"kubelet_running_pods",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"container",
                  "method":"neq",
                  "value":[
                    "POD"
                  ]
                },
                {
                  "condition":"and",
                  "key":"job",
                  "method":"reg",
                  "value":[
                    "kubelet",
                    "cadvisor",
                    "kube-state-metrics"
                  ]
                },
                {
                  "condition":"and",
                  "key":"node",
                  "method":"eq",
                  "value":[
                    "$node"
                  ]
                }
              ]
            }
          ],
          "refId":"A",
          "source":"sum by(container) (sum_over_time(container_cpu_load_average_10s{bcs_cluster_id=\"$cluster_id\",container!~\"^(POD|)$\",job=~\"^(kubelet|cadvisor)$\"}[1m]))",
          "step":"",
          "type":"instant"
        }
      ],
      "title":"POD数",
      "type":"stat"
    },
    {
      "collapsed":false,
      "gridPos":{
        "h":1,
        "w":24,
        "x":0,
        "y":7
      },
      "id":51,
      "panels":[

      ],
      "title":"Node的CPU&内存",
      "type":"row"
    },
    {
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "description":"",
      "fieldConfig":{
        "defaults":{
          "color":{
            "mode":"thresholds"
          },
          "links":[

          ],
          "mappings":[

          ],
          "min":0,
          "thresholds":{
            "mode":"absolute",
            "steps":[
              {
                "color":"green",
                "value":null
              },
              {
                "color":"red",
                "value":80
              }
            ]
          },
          "unit":"percentunit"
        },
        "overrides":[

        ]
      },
      "gridPos":{
        "h":6,
        "w":12,
        "x":0,
        "y":8
      },
      "id":17,
      "links":[

      ],
      "options":{
        "colorMode":"value",
        "graphMode":"area",
        "justifyMode":"auto",
        "orientation":"auto",
        "reduceOptions":{
          "calcs":[
            "lastNotNull"
          ],
          "fields":"",
          "values":false
        },
        "textMode":"auto"
      },
      "pluginVersion":"9.1.0",
      "targets":[
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[
            {
              "active":true,
              "alias":"CPU使用率",
              "expression":"1 - a",
              "functions":[

              ]
            }
          ],
          "format":"time_series",
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"$tag_pod_name",
          "query_configs":[
            {
              "alias":"",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":false,
              "filter_dict":{

              },
              "functions":[
                {
                  "id":"irate",
                  "params":[
                    {
                      "id":"window",
                      "value":"2m"
                    }
                  ]
                }
              ],
              "group_by":[

              ],
              "interval":60,
              "interval_unit":"s",
              "method":"avg_without_time",
              "metric_field":"node_cpu_seconds_total",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"bk_endpoint_url",
                  "method":"reg",
                  "value":[
                    "http://$node:9101/metrics"
                  ]
                },
                {
                  "condition":"and",
                  "key":"mode",
                  "method":"eq",
                  "value":[
                    "idle"
                  ]
                }
              ]
            }
          ],
          "refId":"A",
          "source":"1 - avg(irate(bkmonitor:node_cpu_seconds_total{bcs_cluster_id=\"$cluster_id\",bk_endpoint_url=~\"http://$node:9101/metrics\",mode=\"idle\"}[2m]))",
          "step":"",
          "type":"range"
        }
      ],
      "title":"CPU使用率",
      "type":"stat"
    },
    {
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "description":"Memory Utilisation",
      "fieldConfig":{
        "defaults":{
          "color":{
            "mode":"thresholds"
          },
          "mappings":[

          ],
          "max":1,
          "min":0,
          "thresholds":{
            "mode":"absolute",
            "steps":[
              {
                "color":"green",
                "value":null
              },
              {
                "color":"red",
                "value":80
              }
            ]
          },
          "unit":"percentunit"
        },
        "overrides":[

        ]
      },
      "gridPos":{
        "h":6,
        "w":12,
        "x":12,
        "y":8
      },
      "id":19,
      "links":[

      ],
      "maxDataPoints":100,
      "options":{
        "colorMode":"value",
        "graphMode":"area",
        "justifyMode":"auto",
        "orientation":"horizontal",
        "reduceOptions":{
          "calcs":[
            "mean"
          ],
          "fields":"",
          "values":false
        },
        "textMode":"auto"
      },
      "pluginVersion":"9.1.0",
      "targets":[
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[
            {
              "active":true,
              "alias":"",
              "expression":"(a -\nb -\nc -\nd) /\ne",
              "functions":[

              ]
            }
          ],
          "format":"time_series",
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":false,
              "filter_dict":{

              },
              "functions":[

              ],
              "group_by":[

              ],
              "interval":60,
              "interval_unit":"s",
              "method":"sum_without_time",
              "metric_field":"node_memory_MemTotal_bytes",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"job",
                  "method":"reg",
                  "value":[
                    "node-exporter"
                  ]
                },
                {
                  "condition":"and",
                  "key":"bk_endpoint_url",
                  "method":"reg",
                  "value":[
                    "http://$node:9101/metrics"
                  ]
                }
              ]
            },
            {
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":false,
              "filter_dict":{

              },
              "functions":[

              ],
              "group_by":[

              ],
              "interval":60,
              "interval_unit":"s",
              "method":"sum_without_time",
              "metric_field":"node_memory_MemFree_bytes",
              "refId":"b",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"job",
                  "method":"reg",
                  "value":[
                    "node-exporter"
                  ]
                },
                {
                  "condition":"and",
                  "key":"bk_endpoint_url",
                  "method":"reg",
                  "value":[
                    "http://$node:9101/metrics"
                  ]
                }
              ]
            },
            {
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":false,
              "filter_dict":{

              },
              "functions":[

              ],
              "group_by":[

              ],
              "interval":60,
              "interval_unit":"s",
              "method":"sum_without_time",
              "metric_field":"node_memory_Buffers_bytes",
              "refId":"c",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"job",
                  "method":"reg",
                  "value":[
                    "node-exporter"
                  ]
                },
                {
                  "condition":"and",
                  "key":"bk_endpoint_url",
                  "method":"reg",
                  "value":[
                    "http://$node:9101/metrics"
                  ]
                }
              ]
            },
            {
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":false,
              "filter_dict":{

              },
              "functions":[

              ],
              "group_by":[

              ],
              "interval":60,
              "interval_unit":"s",
              "method":"sum_without_time",
              "metric_field":"node_memory_Cached_bytes",
              "refId":"d",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"job",
                  "method":"reg",
                  "value":[
                    "node-exporter"
                  ]
                },
                {
                  "condition":"and",
                  "key":"bk_endpoint_url",
                  "method":"reg",
                  "value":[
                    "http://$node:9101/metrics"
                  ]
                }
              ]
            },
            {
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":false,
              "filter_dict":{

              },
              "functions":[

              ],
              "group_by":[

              ],
              "interval":60,
              "interval_unit":"s",
              "method":"sum_without_time",
              "metric_field":"node_memory_MemTotal_bytes",
              "refId":"e",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"job",
                  "method":"reg",
                  "value":[
                    "node-exporter"
                  ]
                },
                {
                  "condition":"and",
                  "key":"bk_endpoint_url",
                  "method":"reg",
                  "value":[
                    "http://$node:9101/metrics"
                  ]
                }
              ]
            }
          ],
          "refId":"A",
          "source":"",
          "step":"",
          "type":"range"
        }
      ],
      "title":"内存使用率",
      "type":"stat"
    },
    {
      "collapsed":true,
      "gridPos":{
        "h":1,
        "w":24,
        "x":0,
        "y":14
      },
      "id":53,
      "panels":[
        {
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "fieldConfig":{
            "defaults":{
              "color":{
                "mode":"palette-classic"
              },
              "custom":{
                "axisCenteredZero":false,
                "axisColorMode":"text",
                "axisLabel":"",
                "axisPlacement":"auto",
                "barAlignment":0,
                "drawStyle":"line",
                "fillOpacity":100,
                "gradientMode":"none",
                "hideFrom":{
                  "legend":false,
                  "tooltip":false,
                  "viz":false
                },
                "lineInterpolation":"linear",
                "lineWidth":0,
                "pointSize":5,
                "scaleDistribution":{
                  "type":"linear"
                },
                "showPoints":"never",
                "spanNulls":false,
                "stacking":{
                  "group":"A",
                  "mode":"normal"
                },
                "thresholdsStyle":{
                  "mode":"off"
                }
              },
              "links":[

              ],
              "mappings":[

              ],
              "min":0,
              "thresholds":{
                "mode":"absolute",
                "steps":[
                  {
                    "color":"green"
                  },
                  {
                    "color":"red",
                    "value":80
                  }
                ]
              },
              "unit":"Bps"
            },
            "overrides":[
              {
                "matcher":{
                  "id":"byName",
                  "options":"进流量"
                },
                "properties":[
                  {
                    "id":"color",
                    "value":{
                      "fixedColor":"blue",
                      "mode":"fixed"
                    }
                  }
                ]
              },
              {
                "matcher":{
                  "id":"byName",
                  "options":"出流量"
                },
                "properties":[
                  {
                    "id":"color",
                    "value":{
                      "fixedColor":"green",
                      "mode":"fixed"
                    }
                  }
                ]
              }
            ]
          },
          "gridPos":{
            "h":7,
            "w":12,
            "x":0,
            "y":1
          },
          "id":40,
          "links":[

          ],
          "options":{
            "legend":{
              "calcs":[
                "lastNotNull"
              ],
              "displayMode":"table",
              "placement":"right",
              "showLegend":true
            },
            "tooltip":{
              "mode":"multi",
              "sort":"desc"
            }
          },
          "pluginVersion":"9.1.0",
          "targets":[
            {
              "cluster":[

              ],
              "datasource":{
                "type":"bkmonitor-timeseries-datasource",
                "uid":"${DS_蓝鲸监控_-_指标数据}"
              },
              "expressionList":[

              ],
              "format":"time_series",
              "host":[

              ],
              "mode":"ui",
              "module":[

              ],
              "promqlAlias":"$tag_namespace",
              "query_configs":[
                {
                  "alias":"进流量",
                  "data_source_label":"bk_monitor",
                  "data_type_label":"time_series",
                  "display":true,
                  "filter_dict":{

                  },
                  "functions":[
                    {
                      "id":"irate",
                      "params":[
                        {
                          "id":"window",
                          "value":"2m"
                        }
                      ]
                    }
                  ],
                  "group_by":[

                  ],
                  "interval":60,
                  "interval_unit":"s",
                  "method":"SUM",
                  "metric_field":"node_network_receive_bytes_total",
                  "refId":"a",
                  "result_table_id":"",
                  "result_table_label":"kubernetes",
                  "time_field":"",
                  "where":[
                    {
                      "key":"bcs_cluster_id",
                      "method":"eq",
                      "value":[
                        "$cluster_id"
                      ]
                    },
                    {
                      "condition":"and",
                      "key":"bk_endpoint_url",
                      "method":"eq",
                      "value":[
                        "http://$node:9101/metrics"
                      ]
                    }
                  ]
                },
                {
                  "alias":"出流量",
                  "data_source_label":"bk_monitor",
                  "data_type_label":"time_series",
                  "display":true,
                  "filter_dict":{

                  },
                  "functions":[
                    {
                      "id":"irate",
                      "params":[
                        {
                          "id":"window",
                          "value":"2m"
                        }
                      ]
                    }
                  ],
                  "group_by":[

                  ],
                  "interval":60,
                  "interval_unit":"s",
                  "method":"SUM",
                  "metric_field":"node_network_transmit_bytes_total",
                  "refId":"b",
                  "result_table_id":"",
                  "result_table_label":"kubernetes",
                  "time_field":"",
                  "where":[
                    {
                      "key":"bcs_cluster_id",
                      "method":"eq",
                      "value":[
                        "$cluster_id"
                      ]
                    },
                    {
                      "condition":"and",
                      "key":"bk_endpoint_url",
                      "method":"eq",
                      "value":[
                        "http://$node:9101/metrics"
                      ]
                    }
                  ]
                }
              ],
              "refId":"A",
              "source":"sum(irate(bkmonitor:node_network_receive_bytes_total{bcs_cluster_id=\"$cluster_id\",bk_endpoint_url=\"http://$node:9101/metrics\"}[2m]))",
              "step":"",
              "type":"range"
            }
          ],
          "title":"网卡进出流量",
          "type":"timeseries"
        },
        {
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "fieldConfig":{
            "defaults":{
              "color":{
                "mode":"palette-classic"
              },
              "custom":{
                "axisCenteredZero":false,
                "axisColorMode":"text",
                "axisLabel":"",
                "axisPlacement":"auto",
                "barAlignment":0,
                "drawStyle":"line",
                "fillOpacity":100,
                "gradientMode":"none",
                "hideFrom":{
                  "legend":false,
                  "tooltip":false,
                  "viz":false
                },
                "lineInterpolation":"linear",
                "lineWidth":0,
                "pointSize":5,
                "scaleDistribution":{
                  "type":"linear"
                },
                "showPoints":"never",
                "spanNulls":false,
                "stacking":{
                  "group":"A",
                  "mode":"normal"
                },
                "thresholdsStyle":{
                  "mode":"off"
                }
              },
              "links":[

              ],
              "mappings":[

              ],
              "min":0,
              "thresholds":{
                "mode":"absolute",
                "steps":[
                  {
                    "color":"green"
                  },
                  {
                    "color":"red",
                    "value":80
                  }
                ]
              },
              "unit":"Bps"
            },
            "overrides":[
              {
                "matcher":{
                  "id":"byName",
                  "options":"收包"
                },
                "properties":[
                  {
                    "id":"color",
                    "value":{
                      "fixedColor":"orange",
                      "mode":"fixed"
                    }
                  }
                ]
              },
              {
                "matcher":{
                  "id":"byName",
                  "options":"发包"
                },
                "properties":[
                  {
                    "id":"color",
                    "value":{
                      "fixedColor":"blue",
                      "mode":"fixed"
                    }
                  }
                ]
              }
            ]
          },
          "gridPos":{
            "h":7,
            "w":12,
            "x":12,
            "y":1
          },
          "id":41,
          "links":[

          ],
          "options":{
            "legend":{
              "calcs":[
                "lastNotNull"
              ],
              "displayMode":"table",
              "placement":"right",
              "showLegend":true
            },
            "tooltip":{
              "mode":"multi",
              "sort":"desc"
            }
          },
          "pluginVersion":"9.1.0",
          "targets":[
            {
              "cluster":[

              ],
              "datasource":{
                "type":"bkmonitor-timeseries-datasource",
                "uid":"${DS_蓝鲸监控_-_指标数据}"
              },
              "expressionList":[

              ],
              "format":"time_series",
              "host":[

              ],
              "mode":"ui",
              "module":[

              ],
              "promqlAlias":"$tag_namespace",
              "query_configs":[
                {
                  "alias":"收包",
                  "data_source_label":"bk_monitor",
                  "data_type_label":"time_series",
                  "display":true,
                  "filter_dict":{

                  },
                  "functions":[
                    {
                      "id":"irate",
                      "params":[
                        {
                          "id":"window",
                          "value":"2m"
                        }
                      ]
                    }
                  ],
                  "group_by":[

                  ],
                  "interval":60,
                  "interval_unit":"s",
                  "method":"SUM",
                  "metric_field":"container_network_receive_packets_total",
                  "refId":"a",
                  "result_table_id":"",
                  "result_table_label":"kubernetes",
                  "time_field":"",
                  "where":[
                    {
                      "key":"bcs_cluster_id",
                      "method":"eq",
                      "value":[
                        "$cluster_id"
                      ]
                    },
                    {
                      "condition":"and",
                      "key":"node",
                      "method":"eq",
                      "value":[
                        "$node"
                      ]
                    }
                  ]
                },
                {
                  "alias":"发包",
                  "data_source_label":"bk_monitor",
                  "data_type_label":"time_series",
                  "display":true,
                  "filter_dict":{

                  },
                  "functions":[
                    {
                      "id":"irate",
                      "params":[
                        {
                          "id":"window",
                          "value":"2m"
                        }
                      ]
                    }
                  ],
                  "group_by":[

                  ],
                  "interval":60,
                  "interval_unit":"s",
                  "method":"SUM",
                  "metric_field":"container_network_transmit_packets_total",
                  "refId":"b",
                  "result_table_id":"",
                  "result_table_label":"kubernetes",
                  "time_field":"",
                  "where":[
                    {
                      "key":"bcs_cluster_id",
                      "method":"eq",
                      "value":[
                        "$cluster_id"
                      ]
                    },
                    {
                      "condition":"and",
                      "key":"node",
                      "method":"eq",
                      "value":[
                        "$node"
                      ]
                    }
                  ]
                }
              ],
              "refId":"A",
              "source":"sum(irate(bkmonitor:node_network_receive_bytes_total{bcs_cluster_id=\"$cluster_id\",bk_endpoint_url=\"http://$node:9101/metrics\"}[2m]))",
              "step":"",
              "type":"range"
            }
          ],
          "title":"网卡收发包速率",
          "type":"timeseries"
        }
      ],
      "title":"Node网卡使用情况",
      "type":"row"
    },
    {
      "collapsed":true,
      "gridPos":{
        "h":1,
        "w":24,
        "x":0,
        "y":15
      },
      "id":49,
      "panels":[
        {
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "description":"磁盘使用率",
          "fieldConfig":{
            "defaults":{
              "color":{
                "mode":"palette-classic"
              },
              "custom":{
                "axisCenteredZero":false,
                "axisColorMode":"text",
                "axisLabel":"",
                "axisPlacement":"auto",
                "barAlignment":0,
                "drawStyle":"line",
                "fillOpacity":0,
                "gradientMode":"none",
                "hideFrom":{
                  "legend":false,
                  "tooltip":false,
                  "viz":false
                },
                "lineInterpolation":"linear",
                "lineWidth":1,
                "pointSize":5,
                "scaleDistribution":{
                  "type":"linear"
                },
                "showPoints":"auto",
                "spanNulls":false,
                "stacking":{
                  "group":"A",
                  "mode":"none"
                },
                "thresholdsStyle":{
                  "mode":"off"
                }
              },
              "mappings":[
                {
                  "options":{
                    "match":"null",
                    "result":{
                      "text":"N/A"
                    }
                  },
                  "type":"special"
                }
              ],
              "min":0,
              "thresholds":{
                "mode":"absolute",
                "steps":[
                  {
                    "color":"blue"
                  }
                ]
              },
              "unit":"percentunit"
            },
            "overrides":[

            ]
          },
          "gridPos":{
            "h":9,
            "w":8,
            "x":0,
            "y":2
          },
          "id":38,
          "links":[

          ],
          "maxDataPoints":100,
          "options":{
            "legend":{
              "calcs":[
                "lastNotNull"
              ],
              "displayMode":"list",
              "placement":"bottom",
              "showLegend":true
            },
            "tooltip":{
              "mode":"single",
              "sort":"none"
            }
          },
          "pluginVersion":"9.1.0",
          "targets":[
            {
              "cluster":[

              ],
              "datasource":{
                "type":"bkmonitor-timeseries-datasource",
                "uid":"${DS_蓝鲸监控_-_指标数据}"
              },
              "expressionList":[
                {
                  "active":true,
                  "alias":"设备 $tag_device 挂载点:$tag_mountpoint",
                  "expression":"(a-b)/a",
                  "functions":[

                  ]
                }
              ],
              "format":"time_series",
              "host":[

              ],
              "mode":"ui",
              "module":[

              ],
              "promqlAlias":"",
              "query_configs":[
                {
                  "alias":"",
                  "data_source_label":"bk_monitor",
                  "data_type_label":"time_series",
                  "display":false,
                  "filter_dict":{

                  },
                  "functions":[

                  ],
                  "group_by":[
                    "mountpoint",
                    "bcs_cluster_id",
                    "instance",
                    "fstype",
                    "device"
                  ],
                  "interval":60,
                  "interval_unit":"s",
                  "method":"MAX",
                  "metric_field":"node_filesystem_size_bytes",
                  "refId":"a",
                  "result_table_id":"",
                  "result_table_label":"kubernetes",
                  "time_field":"",
                  "where":[
                    {
                      "key":"fstype",
                      "method":"reg",
                      "value":[
                        "ext[234]|btrfs|xfs|zfs"
                      ]
                    },
                    {
                      "condition":"and",
                      "key":"bk_endpoint_url",
                      "method":"eq",
                      "value":[
                        "http://$node:9101/metrics"
                      ]
                    }
                  ]
                },
                {
                  "alias":"",
                  "data_source_label":"bk_monitor",
                  "data_type_label":"time_series",
                  "filter_dict":{

                  },
                  "functions":[

                  ],
                  "group_by":[
                    "mountpoint",
                    "bcs_cluster_id",
                    "instance",
                    "fstype",
                    "device"
                  ],
                  "interval":60,
                  "interval_unit":"s",
                  "method":"MAX",
                  "metric_field":"node_filesystem_free_bytes",
                  "refId":"b",
                  "result_table_id":"",
                  "result_table_label":"kubernetes",
                  "time_field":"",
                  "where":[
                    {
                      "key":"fstype",
                      "method":"reg",
                      "value":[
                        "ext[234]|btrfs|xfs|zfs"
                      ]
                    },
                    {
                      "condition":"and",
                      "key":"bk_endpoint_url",
                      "method":"eq",
                      "value":[
                        "http://$node:9101/metrics"
                      ]
                    }
                  ]
                }
              ],
              "refId":"A",
              "source":"(max by(mountpoint, bcs_cluster_id, instance, fstype, device) (max_over_time(bkmonitor:node_filesystem_size_bytes{fstype=~\"ext[234]|btrfs|xfs|zfs\"}[1m])) - on(mountpoint, bcs_cluster_id, instance, fstype, device) group_right() max by(mountpoint, bcs_cluster_id, instance, fstype, device) (max_over_time(bkmonitor:node_filesystem_free_bytes{fstype=~\"ext[234]|btrfs|xfs|zfs\"}[1m]))) / on(mountpoint, bcs_cluster_id, instance, fstype, device) group_right() max by(mountpoint, bcs_cluster_id, instance, fstype, device) (max_over_time(bkmonitor:node_filesystem_size_bytes{fstype=~\"ext[234]|btrfs|xfs|zfs\"}[1m])) * 100",
              "step":"",
              "type":"range"
            }
          ],
          "title":"磁盘使用率",
          "type":"timeseries"
        },
        {
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "description":"Reads completed: 每个磁盘分区每秒读完成次数\n\nWrites completed: 每个磁盘分区每秒写完成次数\n\nIO now 每个磁盘分区每秒正在处理的输入/输出请求数",
          "fieldConfig":{
            "defaults":{
              "color":{
                "mode":"palette-classic"
              },
              "custom":{
                "axisCenteredZero":false,
                "axisColorMode":"text",
                "axisLabel":"读取（-）/写入（+）I/O ops/sec",
                "axisPlacement":"auto",
                "barAlignment":0,
                "drawStyle":"line",
                "fillOpacity":0,
                "gradientMode":"none",
                "hideFrom":{
                  "legend":false,
                  "tooltip":false,
                  "viz":false
                },
                "lineInterpolation":"linear",
                "lineWidth":1,
                "pointSize":5,
                "scaleDistribution":{
                  "type":"linear"
                },
                "showPoints":"never",
                "spanNulls":false,
                "stacking":{
                  "group":"A",
                  "mode":"none"
                },
                "thresholdsStyle":{
                  "mode":"off"
                }
              },
              "links":[

              ],
              "mappings":[

              ],
              "thresholds":{
                "mode":"absolute",
                "steps":[
                  {
                    "color":"green"
                  },
                  {
                    "color":"red",
                    "value":80
                  }
                ]
              },
              "unit":"iops"
            },
            "overrides":[
              {
                "matcher":{
                  "id":"byName",
                  "options":"vda_write"
                },
                "properties":[
                  {
                    "id":"color",
                    "value":{
                      "fixedColor":"#6ED0E0",
                      "mode":"fixed"
                    }
                  }
                ]
              },
              {
                "matcher":{
                  "id":"byRegexp",
                  "options":"/.*_读取$/"
                },
                "properties":[
                  {
                    "id":"custom.transform",
                    "value":"negative-Y"
                  }
                ]
              }
            ]
          },
          "gridPos":{
            "h":9,
            "w":8,
            "x":8,
            "y":2
          },
          "id":43,
          "links":[

          ],
          "options":{
            "legend":{
              "calcs":[
                "lastNotNull"
              ],
              "displayMode":"table",
              "placement":"bottom",
              "showLegend":true
            },
            "tooltip":{
              "mode":"multi",
              "sort":"desc"
            }
          },
          "pluginVersion":"9.1.0",
          "targets":[
            {
              "cluster":[

              ],
              "datasource":{
                "type":"bkmonitor-timeseries-datasource",
                "uid":"${DS_蓝鲸监控_-_指标数据}"
              },
              "expressionList":[

              ],
              "format":"time_series",
              "host":[

              ],
              "mode":"ui",
              "module":[

              ],
              "promqlAlias":"$tag_device_读取",
              "query_configs":[
                {
                  "alias":"$tag_device 读次数",
                  "data_source_label":"bk_monitor",
                  "data_type_label":"time_series",
                  "display":true,
                  "filter_dict":{

                  },
                  "functions":[
                    {
                      "id":"irate",
                      "params":[
                        {
                          "id":"window",
                          "value":"5m"
                        }
                      ]
                    }
                  ],
                  "group_by":[
                    "device"
                  ],
                  "interval":"auto",
                  "interval_unit":"s",
                  "method":"sum_without_time",
                  "metric_field":"node_disk_reads_completed_total",
                  "refId":"a",
                  "result_table_id":"",
                  "result_table_label":"kubernetes",
                  "time_field":"",
                  "where":[
                    {
                      "key":"bcs_cluster_id",
                      "method":"eq",
                      "value":[
                        "$cluster_id"
                      ]
                    },
                    {
                      "condition":"and",
                      "key":"instance",
                      "method":"eq",
                      "value":[
                        "$node:9101"
                      ]
                    },
                    {
                      "condition":"and",
                      "key":"device",
                      "method":"reg",
                      "value":[
                        "^[v|s]"
                      ]
                    }
                  ]
                }
              ],
              "refId":"A",
              "source":"irate(node_disk_reads_completed_total{bcs_cluster_id=~\"$bcs_cluster_id\",instance=~\"$node\"}[5m])",
              "step":"",
              "type":"range"
            },
            {
              "cluster":[

              ],
              "datasource":{
                "type":"bkmonitor-timeseries-datasource",
                "uid":"${DS_蓝鲸监控_-_指标数据}"
              },
              "expressionList":[

              ],
              "format":"time_series",
              "host":[

              ],
              "mode":"ui",
              "module":[

              ],
              "promqlAlias":"$tag_device_写入",
              "query_configs":[
                {
                  "alias":"$tag_device 写次数",
                  "data_source_label":"bk_monitor",
                  "data_type_label":"time_series",
                  "display":true,
                  "filter_dict":{

                  },
                  "functions":[
                    {
                      "id":"irate",
                      "params":[
                        {
                          "id":"window",
                          "value":"5m"
                        }
                      ]
                    }
                  ],
                  "group_by":[
                    "device"
                  ],
                  "interval":"auto",
                  "interval_unit":"s",
                  "method":"sum_without_time",
                  "metric_field":"node_disk_writes_completed_total",
                  "refId":"a",
                  "result_table_id":"",
                  "result_table_label":"kubernetes",
                  "time_field":"",
                  "where":[
                    {
                      "key":"bcs_cluster_id",
                      "method":"eq",
                      "value":[
                        "$cluster_id"
                      ]
                    },
                    {
                      "condition":"and",
                      "key":"instance",
                      "method":"eq",
                      "value":[
                        "$node:9101"
                      ]
                    },
                    {
                      "condition":"and",
                      "key":"device",
                      "method":"reg",
                      "value":[
                        "^[v|s]"
                      ]
                    }
                  ]
                }
              ],
              "refId":"B",
              "source":"irate(node_disk_writes_completed_total{bcs_cluster_id=~\"$bcs_cluster_id\",instance=~\"$node\"}[5m])",
              "step":"",
              "type":"range"
            }
          ],
          "title":"磁盘读写速率（IOPS）",
          "type":"timeseries"
        },
        {
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "description":"Read bytes 每个磁盘分区每秒读取的比特数\nWritten bytes 每个磁盘分区每秒写入的比特数",
          "fieldConfig":{
            "defaults":{
              "color":{
                "mode":"palette-classic"
              },
              "custom":{
                "axisCenteredZero":false,
                "axisColorMode":"text",
                "axisLabel":"读取（-）/写入（+）",
                "axisPlacement":"auto",
                "barAlignment":0,
                "drawStyle":"line",
                "fillOpacity":10,
                "gradientMode":"opacity",
                "hideFrom":{
                  "legend":false,
                  "tooltip":false,
                  "viz":false
                },
                "lineInterpolation":"linear",
                "lineWidth":2,
                "pointSize":5,
                "scaleDistribution":{
                  "type":"linear"
                },
                "showPoints":"never",
                "spanNulls":false,
                "stacking":{
                  "group":"A",
                  "mode":"none"
                },
                "thresholdsStyle":{
                  "mode":"off"
                }
              },
              "links":[

              ],
              "mappings":[

              ],
              "thresholds":{
                "mode":"absolute",
                "steps":[
                  {
                    "color":"green"
                  },
                  {
                    "color":"red",
                    "value":80
                  }
                ]
              },
              "unit":"Bps"
            },
            "overrides":[
              {
                "matcher":{
                  "id":"byName",
                  "options":"vda_write"
                },
                "properties":[
                  {
                    "id":"color",
                    "value":{
                      "fixedColor":"#6ED0E0",
                      "mode":"fixed"
                    }
                  }
                ]
              },
              {
                "matcher":{
                  "id":"byRegexp",
                  "options":"/.*_读取$/"
                },
                "properties":[
                  {
                    "id":"custom.transform",
                    "value":"negative-Y"
                  }
                ]
              }
            ]
          },
          "gridPos":{
            "h":9,
            "w":8,
            "x":16,
            "y":2
          },
          "id":45,
          "links":[

          ],
          "options":{
            "legend":{
              "calcs":[
                "mean",
                "lastNotNull",
                "max",
                "min"
              ],
              "displayMode":"table",
              "placement":"bottom",
              "showLegend":true
            },
            "tooltip":{
              "mode":"multi",
              "sort":"desc"
            }
          },
          "pluginVersion":"9.1.0",
          "targets":[
            {
              "cluster":[

              ],
              "datasource":{
                "type":"bkmonitor-timeseries-datasource",
                "uid":"${DS_蓝鲸监控_-_指标数据}"
              },
              "expressionList":[

              ],
              "format":"time_series",
              "host":[

              ],
              "mode":"ui",
              "module":[

              ],
              "promqlAlias":"$tag_device_读字节速率",
              "query_configs":[
                {
                  "alias":"$tag_device 读取字节速率",
                  "data_source_label":"bk_monitor",
                  "data_type_label":"time_series",
                  "display":true,
                  "filter_dict":{

                  },
                  "functions":[
                    {
                      "id":"irate",
                      "params":[
                        {
                          "id":"window",
                          "value":"5m"
                        }
                      ]
                    }
                  ],
                  "group_by":[
                    "device"
                  ],
                  "interval":150,
                  "interval_unit":"s",
                  "method":"AVG",
                  "metric_field":"node_disk_read_bytes_total",
                  "refId":"a",
                  "result_table_id":"",
                  "result_table_label":"kubernetes",
                  "time_field":"",
                  "where":[
                    {
                      "key":"bcs_cluster_id",
                      "method":"reg",
                      "value":[
                        "$cluster_id"
                      ]
                    },
                    {
                      "condition":"and",
                      "key":"instance",
                      "method":"reg",
                      "value":[
                        "$node"
                      ]
                    },
                    {
                      "condition":"and",
                      "key":"device",
                      "method":"reg",
                      "value":[
                        "^[s|v]"
                      ]
                    }
                  ]
                }
              ],
              "refId":"A",
              "source":"irate(node_disk_read_bytes_total{bcs_cluster_id=~\"$bcs_cluster_id\",instance=~\"$node\"}[5m])",
              "step":"",
              "type":"range"
            },
            {
              "cluster":[

              ],
              "datasource":{
                "type":"bkmonitor-timeseries-datasource",
                "uid":"${DS_蓝鲸监控_-_指标数据}"
              },
              "expressionList":[

              ],
              "format":"time_series",
              "host":[

              ],
              "mode":"ui",
              "module":[

              ],
              "promqlAlias":"$tag_device_写字节速率",
              "query_configs":[
                {
                  "alias":"$tag_device 写入字节速率",
                  "data_source_label":"bk_monitor",
                  "data_type_label":"time_series",
                  "display":true,
                  "filter_dict":{

                  },
                  "functions":[
                    {
                      "id":"irate",
                      "params":[
                        {
                          "id":"window",
                          "value":"5m"
                        }
                      ]
                    }
                  ],
                  "group_by":[
                    "device"
                  ],
                  "interval":150,
                  "interval_unit":"s",
                  "method":"AVG",
                  "metric_field":"node_disk_written_bytes_total",
                  "refId":"a",
                  "result_table_id":"",
                  "result_table_label":"kubernetes",
                  "time_field":"",
                  "where":[
                    {
                      "key":"bcs_cluster_id",
                      "method":"reg",
                      "value":[
                        "$cluster_id"
                      ]
                    },
                    {
                      "condition":"and",
                      "key":"instance",
                      "method":"reg",
                      "value":[
                        "$node"
                      ]
                    },
                    {
                      "condition":"and",
                      "key":"device",
                      "method":"reg",
                      "value":[
                        "^[s|v]"
                      ]
                    }
                  ]
                }
              ],
              "refId":"B",
              "source":"irate(node_disk_written_bytes_total{bcs_cluster_id=~\"$bcs_cluster_id\",instance=~\"$node\"}[5m])",
              "step":"",
              "type":"range"
            }
          ],
          "title":"每秒磁盘读写容量",
          "type":"timeseries"
        }
      ],
      "title":"node磁盘使用情况",
      "type":"row"
    },
    {
      "collapsed":false,
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "gridPos":{
        "h":1,
        "w":24,
        "x":0,
        "y":16
      },
      "id":5,
      "panels":[

      ],
      "targets":[
        {
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "refId":"A"
        }
      ],
      "title":"CPU使用量/pod",
      "type":"row"
    },
    {
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "description":"含义：每个CPU内核上的累积占用时间 (单位：秒)，使用rate函数可计算出CPU每分钟使用量\n单位：s",
      "fieldConfig":{
        "defaults":{
          "color":{
            "mode":"palette-classic"
          },
          "custom":{
            "axisCenteredZero":false,
            "axisColorMode":"text",
            "axisLabel":"",
            "axisPlacement":"auto",
            "barAlignment":0,
            "drawStyle":"line",
            "fillOpacity":100,
            "gradientMode":"none",
            "hideFrom":{
              "legend":false,
              "tooltip":false,
              "viz":false
            },
            "lineInterpolation":"linear",
            "lineWidth":0,
            "pointSize":5,
            "scaleDistribution":{
              "type":"linear"
            },
            "showPoints":"never",
            "spanNulls":false,
            "stacking":{
              "group":"A",
              "mode":"normal"
            },
            "thresholdsStyle":{
              "mode":"off"
            }
          },
          "links":[

          ],
          "mappings":[

          ],
          "min":0,
          "thresholds":{
            "mode":"absolute",
            "steps":[
              {
                "color":"green",
                "value":null
              },
              {
                "color":"red",
                "value":80
              }
            ]
          },
          "unit":"s"
        },
        "overrides":[

        ]
      },
      "gridPos":{
        "h":7,
        "w":24,
        "x":0,
        "y":17
      },
      "id":1,
      "links":[

      ],
      "options":{
        "legend":{
          "calcs":[
            "lastNotNull"
          ],
          "displayMode":"table",
          "placement":"right",
          "showLegend":true
        },
        "tooltip":{
          "mode":"multi",
          "sort":"desc"
        }
      },
      "pluginVersion":"9.1.0",
      "targets":[
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[

          ],
          "format":"time_series",
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"$tag_pod_name",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":true,
              "filter_dict":{

              },
              "functions":[
                {
                  "id":"rate",
                  "params":[
                    {
                      "id":"window",
                      "value":"5m"
                    }
                  ]
                },
                {
                  "id":"top",
                  "params":[
                    {
                      "id":"n",
                      "value":"$topN"
                    }
                  ]
                }
              ],
              "group_by":[
                "pod_name"
              ],
              "interval":150,
              "interval_unit":"s",
              "method":"SUM",
              "metric_field":"container_cpu_usage_seconds_total",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"node",
                  "method":"eq",
                  "value":[
                    "$node"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod_name",
                  "method":"neq",
                  "value":[
                    ""
                  ]
                }
              ]
            }
          ],
          "refId":"A",
          "source":"",
          "step":"",
          "type":"range"
        }
      ],
      "title":"CPU使用量top $topN（单位秒）",
      "type":"timeseries"
    },
    {
      "collapsed":false,
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "gridPos":{
        "h":1,
        "w":24,
        "x":0,
        "y":24
      },
      "id":6,
      "panels":[

      ],
      "targets":[
        {
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "refId":"A"
        }
      ],
      "title":"CPU使用率/pod",
      "type":"row"
    },
    {
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "fieldConfig":{
        "defaults":{
          "color":{
            "mode":"thresholds"
          },
          "custom":{
            "align":"auto",
            "displayMode":"auto",
            "inspect":false
          },
          "decimals":2,
          "displayName":"",
          "mappings":[

          ],
          "thresholds":{
            "mode":"absolute",
            "steps":[
              {
                "color":"green",
                "value":null
              },
              {
                "color":"red",
                "value":80
              }
            ]
          },
          "unit":"short"
        },
        "overrides":[
          {
            "matcher":{
              "id":"byName",
              "options":"pod 1"
            },
            "properties":[
              {
                "id":"displayName",
                "value":"pod名称"
              }
            ]
          },
          {
            "matcher":{
              "id":"byName",
              "options":"Value 1"
            },
            "properties":[
              {
                "id":"displayName",
                "value":"CPU Requests %"
              },
              {
                "id":"custom.displayMode",
                "value":"color-text"
              }
            ]
          },
          {
            "matcher":{
              "id":"byName",
              "options":"Value 2"
            },
            "properties":[
              {
                "id":"displayName",
                "value":"CPU Limits %"
              },
              {
                "id":"custom.displayMode",
                "value":"color-text"
              }
            ]
          },
          {
            "matcher":{
              "id":"byName",
              "options":"pod 2"
            },
            "properties":[
              {
                "id":"displayName",
                "value":"pod名称"
              },
              {
                "id":"custom.width",
                "value":290
              },
              {
                "id":"custom.hidden",
                "value":true
              }
            ]
          },
          {
            "matcher":{
              "id":"byName",
              "options":"Time"
            },
            "properties":[
              {
                "id":"custom.hidden",
                "value":true
              }
            ]
          }
        ]
      },
      "gridPos":{
        "h":13,
        "w":24,
        "x":0,
        "y":25
      },
      "id":10,
      "links":[

      ],
      "options":{
        "footer":{
          "fields":"",
          "reducer":[
            "sum"
          ],
          "show":false
        },
        "frameIndex":1,
        "showHeader":true,
        "sortBy":[

        ]
      },
      "pluginVersion":"9.1.0",
      "targets":[
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[
            {
              "active":true,
              "alias":"CPU Requests %",
              "expression":"b/c*100",
              "functions":[
                {
                  "id":"topk",
                  "params":[
                    {
                      "id":"k",
                      "value":"100"
                    }
                  ]
                }
              ]
            }
          ],
          "format":"table",
          "hide":false,
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":false,
              "filter_dict":{

              },
              "functions":[
                {
                  "id":"rate",
                  "params":[
                    {
                      "id":"window",
                      "value":"2m"
                    }
                  ]
                }
              ],
              "group_by":[
                "pod"
              ],
              "interval":"auto",
              "interval_unit":"s",
              "method":"AVG",
              "metric_field":"container_cpu_usage_seconds_total",
              "refId":"b",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"node",
                  "method":"eq",
                  "value":[
                    "$node"
                  ]
                }
              ]
            },
            {
              "alias":"",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":false,
              "filter_dict":{

              },
              "functions":[

              ],
              "group_by":[
                "pod"
              ],
              "interval":"auto",
              "interval_unit":"s",
              "method":"sum_without_time",
              "metric_field":"kube_pod_container_resource_requests_cpu_cores",
              "refId":"c",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"node",
                  "method":"eq",
                  "value":[
                    "$node"
                  ]
                }
              ]
            }
          ],
          "refId":"A",
          "source":"",
          "step":"",
          "type":"instant"
        },
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[
            {
              "active":true,
              "alias":"CPU Limits %",
              "expression":"b/a*100",
              "functions":[
                {
                  "id":"topk",
                  "params":[
                    {
                      "id":"k",
                      "value":"100"
                    }
                  ]
                }
              ]
            }
          ],
          "format":"table",
          "hide":false,
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":false,
              "filter_dict":{

              },
              "functions":[
                {
                  "id":"rate",
                  "params":[
                    {
                      "id":"window",
                      "value":"2m"
                    }
                  ]
                }
              ],
              "group_by":[
                "pod"
              ],
              "interval":"auto",
              "interval_unit":"s",
              "method":"AVG",
              "metric_field":"container_cpu_usage_seconds_total",
              "refId":"b",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"node",
                  "method":"eq",
                  "value":[
                    "$node"
                  ]
                }
              ]
            },
            {
              "alias":"",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":false,
              "filter_dict":{

              },
              "functions":[

              ],
              "group_by":[
                "pod"
              ],
              "interval":"auto",
              "interval_unit":"s",
              "method":"sum_without_time",
              "metric_field":"kube_pod_container_resource_limits_cpu_cores",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"node",
                  "method":"eq",
                  "value":[
                    "$node"
                  ]
                }
              ]
            }
          ],
          "refId":"B",
          "source":"",
          "step":"",
          "type":"instant"
        }
      ],
      "title":"CPU使用率top 100/pod ",
      "transformations":[
        {
          "id":"concatenate",
          "options":{
            "frameNameLabel":"frame",
            "frameNameMode":"field"
          }
        }
      ],
      "type":"table"
    },
    {
      "collapsed":true,
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "gridPos":{
        "h":1,
        "w":24,
        "x":0,
        "y":38
      },
      "id":7,
      "panels":[
        {
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "description":"",
          "fieldConfig":{
            "defaults":{
              "color":{
                "mode":"continuous-RdYlGr"
              },
              "custom":{
                "axisCenteredZero":false,
                "axisColorMode":"text",
                "axisLabel":"",
                "axisPlacement":"auto",
                "barAlignment":0,
                "drawStyle":"line",
                "fillOpacity":100,
                "gradientMode":"none",
                "hideFrom":{
                  "legend":false,
                  "tooltip":false,
                  "viz":false
                },
                "lineInterpolation":"linear",
                "lineWidth":0,
                "pointSize":5,
                "scaleDistribution":{
                  "type":"linear"
                },
                "showPoints":"never",
                "spanNulls":false,
                "stacking":{
                  "group":"A",
                  "mode":"normal"
                },
                "thresholdsStyle":{
                  "mode":"off"
                }
              },
              "links":[

              ],
              "mappings":[

              ],
              "min":0,
              "thresholds":{
                "mode":"absolute",
                "steps":[
                  {
                    "color":"green"
                  },
                  {
                    "color":"red",
                    "value":80
                  }
                ]
              },
              "unit":"bytes"
            },
            "overrides":[

            ]
          },
          "gridPos":{
            "h":7,
            "w":24,
            "x":0,
            "y":12
          },
          "id":12,
          "links":[

          ],
          "options":{
            "legend":{
              "calcs":[
                "lastNotNull"
              ],
              "displayMode":"table",
              "placement":"right",
              "showLegend":true
            },
            "tooltip":{
              "mode":"multi",
              "sort":"desc"
            }
          },
          "pluginVersion":"9.1.0",
          "targets":[
            {
              "cluster":[

              ],
              "datasource":{
                "type":"bkmonitor-timeseries-datasource",
                "uid":"${DS_蓝鲸监控_-_指标数据}"
              },
              "expressionList":[

              ],
              "format":"time_series",
              "hide":false,
              "host":[

              ],
              "mode":"ui",
              "module":[

              ],
              "promqlAlias":"",
              "query_configs":[
                {
                  "alias":"$tag_pod",
                  "data_source_label":"bk_monitor",
                  "data_type_label":"time_series",
                  "display":true,
                  "filter_dict":{

                  },
                  "functions":[
                    {
                      "id":"top",
                      "params":[
                        {
                          "id":"n",
                          "value":"$topN"
                        }
                      ]
                    }
                  ],
                  "group_by":[
                    "pod"
                  ],
                  "interval":60,
                  "interval_unit":"s",
                  "method":"sum_without_time",
                  "metric_field":"container_memory_rss",
                  "refId":"a",
                  "result_table_id":"",
                  "result_table_label":"kubernetes",
                  "time_field":"",
                  "where":[
                    {
                      "key":"bcs_cluster_id",
                      "method":"eq",
                      "value":[
                        "$cluster_id"
                      ]
                    },
                    {
                      "condition":"and",
                      "key":"container_name",
                      "method":"neq",
                      "value":[
                        ""
                      ]
                    },
                    {
                      "condition":"and",
                      "key":"node",
                      "method":"eq",
                      "value":[
                        "$node"
                      ]
                    }
                  ]
                }
              ],
              "refId":"A",
              "source":"",
              "step":"",
              "type":"range"
            }
          ],
          "title":"内存使用量(container_memory_rss)/pod",
          "type":"timeseries"
        },
        {
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "description":"",
          "fieldConfig":{
            "defaults":{
              "color":{
                "mode":"palette-classic"
              },
              "custom":{
                "axisCenteredZero":false,
                "axisColorMode":"text",
                "axisLabel":"",
                "axisPlacement":"auto",
                "barAlignment":0,
                "drawStyle":"line",
                "fillOpacity":100,
                "gradientMode":"none",
                "hideFrom":{
                  "legend":false,
                  "tooltip":false,
                  "viz":false
                },
                "lineInterpolation":"linear",
                "lineWidth":0,
                "pointSize":5,
                "scaleDistribution":{
                  "type":"linear"
                },
                "showPoints":"never",
                "spanNulls":false,
                "stacking":{
                  "group":"A",
                  "mode":"normal"
                },
                "thresholdsStyle":{
                  "mode":"off"
                }
              },
              "links":[

              ],
              "mappings":[

              ],
              "min":0,
              "thresholds":{
                "mode":"absolute",
                "steps":[
                  {
                    "color":"green"
                  }
                ]
              },
              "unit":"bytes"
            },
            "overrides":[

            ]
          },
          "gridPos":{
            "h":7,
            "w":24,
            "x":0,
            "y":19
          },
          "id":14,
          "links":[

          ],
          "options":{
            "legend":{
              "calcs":[
                "lastNotNull"
              ],
              "displayMode":"table",
              "placement":"right",
              "showLegend":true
            },
            "tooltip":{
              "mode":"multi",
              "sort":"desc"
            }
          },
          "pluginVersion":"9.1.0",
          "targets":[
            {
              "cluster":[

              ],
              "datasource":{
                "type":"bkmonitor-timeseries-datasource",
                "uid":"${DS_蓝鲸监控_-_指标数据}"
              },
              "expressionList":[

              ],
              "format":"time_series",
              "hide":false,
              "host":[

              ],
              "mode":"ui",
              "module":[

              ],
              "promqlAlias":"",
              "query_configs":[
                {
                  "alias":"$tag_pod",
                  "data_source_label":"bk_monitor",
                  "data_type_label":"time_series",
                  "display":true,
                  "filter_dict":{

                  },
                  "functions":[
                    {
                      "id":"top",
                      "params":[
                        {
                          "id":"n",
                          "value":"$topN"
                        }
                      ]
                    }
                  ],
                  "group_by":[
                    "pod"
                  ],
                  "interval":60,
                  "interval_unit":"s",
                  "method":"sum_without_time",
                  "metric_field":"container_memory_working_set_bytes",
                  "refId":"a",
                  "result_table_id":"",
                  "result_table_label":"kubernetes",
                  "time_field":"",
                  "where":[
                    {
                      "key":"bcs_cluster_id",
                      "method":"eq",
                      "value":[
                        "$cluster_id"
                      ]
                    },
                    {
                      "condition":"and",
                      "key":"container_name",
                      "method":"neq",
                      "value":[
                        ""
                      ]
                    },
                    {
                      "condition":"and",
                      "key":"node",
                      "method":"eq",
                      "value":[
                        "$node"
                      ]
                    }
                  ]
                }
              ],
              "refId":"A",
              "source":"",
              "step":"",
              "type":"range"
            }
          ],
          "title":"内存使用量(container_memory_working_set_bytes)/pod",
          "type":"timeseries"
        }
      ],
      "targets":[
        {
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "refId":"A"
        }
      ],
      "title":"内存使用量/pod",
      "type":"row"
    },
    {
      "collapsed":true,
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "gridPos":{
        "h":1,
        "w":24,
        "x":0,
        "y":39
      },
      "id":8,
      "panels":[
        {
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "description":"容器的实际内存使用%container_memory_working_set_bytes",
          "fieldConfig":{
            "defaults":{
              "color":{
                "mode":"thresholds"
              },
              "custom":{
                "align":"auto",
                "displayMode":"auto",
                "inspect":false
              },
              "decimals":2,
              "displayName":"",
              "mappings":[

              ],
              "thresholds":{
                "mode":"absolute",
                "steps":[
                  {
                    "color":"green"
                  },
                  {
                    "color":"red",
                    "value":80
                  }
                ]
              },
              "unit":"short"
            },
            "overrides":[
              {
                "matcher":{
                  "id":"byName",
                  "options":"Time"
                },
                "properties":[
                  {
                    "id":"custom.hidden",
                    "value":true
                  }
                ]
              },
              {
                "matcher":{
                  "id":"byName",
                  "options":"Value 1"
                },
                "properties":[
                  {
                    "id":"displayName",
                    "value":"内存使用量Requests %"
                  },
                  {
                    "id":"custom.align",
                    "value":"left"
                  },
                  {
                    "id":"custom.displayMode",
                    "value":"color-text"
                  },
                  {
                    "id":"thresholds",
                    "value":{
                      "mode":"absolute",
                      "steps":[
                        {
                          "color":"green"
                        }
                      ]
                    }
                  },
                  {
                    "id":"unit",
                    "value":"percent"
                  }
                ]
              },
              {
                "matcher":{
                  "id":"byName",
                  "options":"Value 2"
                },
                "properties":[
                  {
                    "id":"displayName",
                    "value":"内存使用量Limits %"
                  },
                  {
                    "id":"decimals",
                    "value":2
                  },
                  {
                    "id":"custom.align"
                  },
                  {
                    "id":"custom.displayMode",
                    "value":"color-text"
                  },
                  {
                    "id":"thresholds",
                    "value":{
                      "mode":"absolute",
                      "steps":[
                        {
                          "color":"green"
                        }
                      ]
                    }
                  },
                  {
                    "id":"unit",
                    "value":"percent"
                  }
                ]
              },
              {
                "matcher":{
                  "id":"byName",
                  "options":"pod 1"
                },
                "properties":[
                  {
                    "id":"displayName",
                    "value":"pod名称"
                  }
                ]
              },
              {
                "matcher":{
                  "id":"byName",
                  "options":"pod 2"
                },
                "properties":[
                  {
                    "id":"displayName",
                    "value":"pod名称"
                  }
                ]
              },
              {
                "matcher":{
                  "id":"byName",
                  "options":"namespace 4"
                },
                "properties":[
                  {
                    "id":"custom.hidden",
                    "value":true
                  }
                ]
              }
            ]
          },
          "gridPos":{
            "h":13,
            "w":24,
            "x":0,
            "y":13
          },
          "id":16,
          "links":[

          ],
          "options":{
            "footer":{
              "fields":"",
              "reducer":[
                "sum"
              ],
              "show":false
            },
            "showHeader":true,
            "sortBy":[
              {
                "desc":true,
                "displayName":"内存使用率(Limits)"
              }
            ]
          },
          "pluginVersion":"9.1.0",
          "targets":[
            {
              "cluster":[

              ],
              "datasource":{
                "type":"bkmonitor-timeseries-datasource",
                "uid":"${DS_蓝鲸监控_-_指标数据}"
              },
              "expressionList":[
                {
                  "active":true,
                  "alias":"",
                  "expression":"a /  b * 100",
                  "functions":[

                  ]
                }
              ],
              "format":"table",
              "hide":false,
              "host":[

              ],
              "mode":"ui",
              "module":[

              ],
              "promqlAlias":"",
              "query_configs":[
                {
                  "alias":"",
                  "data_source_label":"bk_monitor",
                  "data_type_label":"time_series",
                  "display":false,
                  "filter_dict":{

                  },
                  "functions":[

                  ],
                  "group_by":[
                    "pod"
                  ],
                  "interval":60,
                  "interval_unit":"s",
                  "method":"sum_without_time",
                  "metric_field":"container_memory_working_set_bytes",
                  "refId":"a",
                  "result_table_id":"",
                  "result_table_label":"kubernetes",
                  "time_field":"",
                  "where":[
                    {
                      "key":"bcs_cluster_id",
                      "method":"eq",
                      "value":[
                        "$cluster_id"
                      ]
                    },
                    {
                      "condition":"and",
                      "key":"container",
                      "method":"neq",
                      "value":[
                        ""
                      ]
                    },
                    {
                      "condition":"and",
                      "key":"node",
                      "method":"eq",
                      "value":[
                        "$node"
                      ]
                    }
                  ]
                },
                {
                  "alias":"内存使用量Requests %",
                  "data_source_label":"bk_monitor",
                  "data_type_label":"time_series",
                  "display":false,
                  "filter_dict":{

                  },
                  "functions":[
                    {
                      "id":"topk",
                      "params":[
                        {
                          "id":"k",
                          "value":"20"
                        }
                      ]
                    }
                  ],
                  "group_by":[
                    "pod"
                  ],
                  "interval":60,
                  "interval_unit":"s",
                  "method":"sum_without_time",
                  "metric_field":"kube_pod_container_resource_requests_memory_bytes",
                  "refId":"b",
                  "result_table_id":"",
                  "result_table_label":"kubernetes",
                  "time_field":"",
                  "where":[
                    {
                      "key":"bcs_cluster_id",
                      "method":"eq",
                      "value":[
                        "$cluster_id"
                      ]
                    },
                    {
                      "condition":"and",
                      "key":"node",
                      "method":"eq",
                      "value":[
                        "$node"
                      ]
                    }
                  ]
                }
              ],
              "refId":"A",
              "source":"sum by(namespace) (container_memory_working_set_bytes{bcs_cluster_id=\"$cluster_id\",container!=\"\"}) / on(namespace) group_right() sum by(namespace) (kube_pod_container_resource_requests_memory_bytes{bcs_cluster_id=\"$cluster_id\"}) * 100",
              "step":"",
              "type":"instant"
            },
            {
              "cluster":[

              ],
              "datasource":{
                "type":"bkmonitor-timeseries-datasource",
                "uid":"${DS_蓝鲸监控_-_指标数据}"
              },
              "expressionList":[
                {
                  "active":true,
                  "alias":"",
                  "expression":"a /  b * 100",
                  "functions":[
                    {
                      "id":"topk",
                      "params":[
                        {
                          "id":"k",
                          "value":"100"
                        }
                      ]
                    }
                  ]
                }
              ],
              "format":"table",
              "hide":false,
              "host":[

              ],
              "mode":"ui",
              "module":[

              ],
              "promqlAlias":"内存 limits",
              "query_configs":[
                {
                  "alias":"内存 limits",
                  "data_source_label":"bk_monitor",
                  "data_type_label":"time_series",
                  "display":false,
                  "filter_dict":{

                  },
                  "functions":[

                  ],
                  "group_by":[
                    "pod"
                  ],
                  "interval":60,
                  "interval_unit":"s",
                  "method":"sum_without_time",
                  "metric_field":"container_memory_working_set_bytes",
                  "refId":"a",
                  "result_table_id":"",
                  "result_table_label":"kubernetes",
                  "time_field":"",
                  "where":[
                    {
                      "key":"bcs_cluster_id",
                      "method":"eq",
                      "value":[
                        "$cluster_id"
                      ]
                    },
                    {
                      "condition":"and",
                      "key":"container",
                      "method":"neq",
                      "value":[
                        ""
                      ]
                    },
                    {
                      "condition":"and",
                      "key":"node",
                      "method":"eq",
                      "value":[
                        "$node"
                      ]
                    }
                  ]
                },
                {
                  "alias":"内存使用量Limits %",
                  "data_source_label":"bk_monitor",
                  "data_type_label":"time_series",
                  "filter_dict":{

                  },
                  "functions":[
                    {
                      "id":"topk",
                      "params":[
                        {
                          "id":"k",
                          "value":"20"
                        }
                      ]
                    }
                  ],
                  "group_by":[
                    "pod"
                  ],
                  "interval":60,
                  "interval_unit":"s",
                  "method":"sum_without_time",
                  "metric_field":"kube_pod_container_resource_limits_memory_bytes",
                  "refId":"b",
                  "result_table_id":"",
                  "result_table_label":"kubernetes",
                  "time_field":"",
                  "where":[
                    {
                      "key":"bcs_cluster_id",
                      "method":"eq",
                      "value":[
                        "$cluster_id"
                      ]
                    },
                    {
                      "condition":"and",
                      "key":"node",
                      "method":"eq",
                      "value":[
                        "$node"
                      ]
                    }
                  ]
                }
              ],
              "refId":"B",
              "source":"sum by(namespace) (container_memory_working_set_bytes{bcs_cluster_id=\"$cluster_id\",container!=\"\"}) / on(namespace) group_right() sum by(namespace) (kube_pod_container_resource_limits_memory_bytes{bcs_cluster_id=\"$cluster_id\"}) * 100",
              "step":"",
              "type":"instant"
            }
          ],
          "title":"内存 top 100/pod",
          "transformations":[
            {
              "id":"concatenate",
              "options":{

              }
            }
          ],
          "type":"table"
        }
      ],
      "targets":[
        {
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "refId":"A"
        }
      ],
      "title":"内存使用率/pod",
      "type":"row"
    }
  ],
  "refresh":"",
  "schemaVersion":37,
  "style":"dark",
  "tags":[
    "k8s",
    "bkmonitor"
  ],
  "templating":{
    "list":[
      {
        "current":{

        },
        "datasource":{
          "type":"bkmonitor-timeseries-datasource",
          "uid":"${DS_蓝鲸监控_-_指标数据}"
        },
        "definition":"- Blueking Monitor - 维度",
        "hide":0,
        "includeAll":false,
        "label":"ClusterID",
        "multi":false,
        "name":"cluster_id",
        "options":[

        ],
        "query":{
          "metricConfig":{
            "data_source_label":"bk_monitor",
            "data_type_label":"time_series",
            "group_by":"bcs_cluster_id",
            "metric_field":"node_load15",
            "result_table_id":"",
            "result_table_label":"kubernetes",
            "where":[

            ]
          },
          "queryType":"dimension",
          "variables":""
        },
        "refresh":1,
        "regex":"",
        "skipUrlSync":false,
        "sort":1,
        "tagValuesQuery":"",
        "tagsQuery":"",
        "type":"query",
        "useTags":false
      },
      {
        "current":{

        },
        "datasource":{
          "type":"bkmonitor-timeseries-datasource",
          "uid":"${DS_蓝鲸监控_-_指标数据}"
        },
        "definition":"- Blueking Monitor - 维度",
        "hide":0,
        "includeAll":false,
        "multi":true,
        "name":"node",
        "options":[

        ],
        "query":{
          "metricConfig":{
            "data_source_label":"bk_monitor",
            "data_type_label":"time_series",
            "group_by":"node",
            "metric_field":"container_cpu_usage_seconds_total",
            "result_table_id":"",
            "result_table_label":"kubernetes",
            "where":[
              {
                "key":"bcs_cluster_id",
                "method":"eq",
                "value":[
                  "$cluster_id"
                ]
              }
            ]
          },
          "queryType":"dimension",
          "variables":"$cluster_id"
        },
        "refresh":1,
        "regex":"",
        "skipUrlSync":false,
        "sort":1,
        "tagValuesQuery":"",
        "tagsQuery":"",
        "type":"query"
      },
      {
        "current":{

        },
        "hide":0,
        "includeAll":false,
        "multi":false,
        "name":"topN",
        "options":[

        ],
        "query":"5,10,20,50,100",
        "queryValue":"",
        "skipUrlSync":false,
        "type":"custom",
        "refresh":1
      }
    ]
  },
  "time":{
    "from":"now-1h",
    "to":"now"
  },
  "timepicker":{
    "refresh_intervals":[
      "5s",
      "10s",
      "30s",
      "1m",
      "5m",
      "15m",
      "30m",
      "1h",
      "2h",
      "1d"
    ],
    "time_options":[
      "5m",
      "15m",
      "1h",
      "6h",
      "12h",
      "24h",
      "2d",
      "7d",
      "30d"
    ]
  },
  "timezone":"browser",
  "title":"kubernetes/工作节点-Node",
  "version":53,
  "weekStart":"",
  "__inputs":[
    {
      "name":"DS_蓝鲸监控_-_指标数据",
      "label":"蓝鲸监控 - 指标数据",
      "description":"",
      "type":"datasource",
      "pluginId":"bkmonitor-timeseries-datasource",
      "pluginName":"Blueing Monitor TimeSeries"
    }
  ],
  "__requires":[
    {
      "type":"datasource",
      "id":"bkmonitor-timeseries-datasource",
      "name":"Blueing Monitor TimeSeries"
    }
  ]
}