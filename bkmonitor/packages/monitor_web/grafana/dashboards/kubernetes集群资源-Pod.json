{
  "annotations":{
    "list":[
      {
        "builtIn":1,
        "datasource":{
          "type":"datasource",
          "uid":"grafana"
        },
        "enable":true,
        "hide":true,
        "iconColor":"rgba(0, 211, 255, 1)",
        "name":"Annotations & Alerts",
        "target":{
          "limit":100,
          "matchAny":false,
          "tags":[

          ],
          "type":"dashboard"
        },
        "type":"dashboard"
      }
    ]
  },
  "editable":true,
  "fiscalYearStartMonth":0,
  "graphTooltip":0,
  "links":[

  ],
  "liveNow":false,
  "panels":[
    {
      "gridPos":{
        "h":1,
        "w":24,
        "x":0,
        "y":0
      },
      "id":28,
      "title":"CPU",
      "type":"row"
    },
    {
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "fieldConfig":{
        "defaults":{
          "color":{
            "mode":"thresholds"
          },
          "decimals":2,
          "displayName":"",
          "mappings":[

          ],
          "thresholds":{
            "mode":"absolute",
            "steps":[
              {
                "color":"green",
                "value":null
              },
              {
                "color":"yellow",
                "value":80
              },
              {
                "color":"red",
                "value":90
              }
            ]
          },
          "unit":"short"
        },
        "overrides":[

        ]
      },
      "gridPos":{
        "h":7,
        "w":8,
        "x":0,
        "y":1
      },
      "id":25,
      "links":[

      ],
      "options":{
        "colorMode":"value",
        "graphMode":"area",
        "justifyMode":"auto",
        "orientation":"auto",
        "reduceOptions":{
          "calcs":[
            "lastNotNull"
          ],
          "fields":"",
          "values":false
        },
        "textMode":"auto"
      },
      "pluginVersion":"9.1.0",
      "targets":[
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[
            {
              "active":true,
              "alias":"CPU Requests %",
              "expression":"a /  b * 100",
              "functions":[

              ]
            }
          ],
          "format":"time_series",
          "hide":false,
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":false,
              "filter_dict":{

              },
              "functions":[
                {
                  "id":"rate",
                  "params":[
                    {
                      "id":"window",
                      "value":"2m"
                    }
                  ]
                }
              ],
              "group_by":[
                "pod"
              ],
              "interval":60,
              "interval_unit":"s",
              "method":"SUM",
              "metric_field":"container_cpu_usage_seconds_total",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"time",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"namespace",
                  "method":"eq",
                  "value":[
                    "$namespace"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod",
                  "method":"eq",
                  "value":[
                    "$pod_name"
                  ]
                }
              ]
            },
            {
              "alias":"",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":false,
              "filter_dict":{

              },
              "functions":[

              ],
              "group_by":[
                "pod"
              ],
              "interval":60,
              "interval_unit":"s",
              "method":"sum_without_time",
              "metric_field":"kube_pod_container_resource_requests_cpu_cores",
              "refId":"b",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"time",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"namespace",
                  "method":"eq",
                  "value":[
                    "$namespace"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod",
                  "method":"eq",
                  "value":[
                    "$pod_name"
                  ]
                }
              ]
            }
          ],
          "refId":"A",
          "source":"avg by(pod) (rate(container_cpu_usage_seconds_total{bcs_cluster_id=\"$cluster_id\",namespace=\"$namespace\",pod=\"$pod_name\"}[2m])) / on(pod) group_right() sum by(pod) (kube_pod_container_resource_requests_cpu_cores{bcs_cluster_id=\"$cluster_id\",namespace=\"$namespace\",pod=\"$pod_name\"}) * 100",
          "step":"",
          "type":"range"
        },
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[
            {
              "active":true,
              "alias":"CPU Limits %",
              "expression":"a /  b * 100",
              "functions":[

              ]
            }
          ],
          "format":"time_series",
          "hide":false,
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":false,
              "filter_dict":{

              },
              "functions":[
                {
                  "id":"rate",
                  "params":[
                    {
                      "id":"window",
                      "value":"2m"
                    }
                  ]
                }
              ],
              "group_by":[
                "pod"
              ],
              "interval":60,
              "interval_unit":"s",
              "method":"SUM",
              "metric_field":"container_cpu_usage_seconds_total",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"time",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"namespace",
                  "method":"eq",
                  "value":[
                    "$namespace"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod",
                  "method":"eq",
                  "value":[
                    "$pod_name"
                  ]
                }
              ]
            },
            {
              "alias":"",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":false,
              "filter_dict":{

              },
              "functions":[

              ],
              "group_by":[
                "pod"
              ],
              "interval":60,
              "interval_unit":"s",
              "method":"sum_without_time",
              "metric_field":"kube_pod_container_resource_limits_cpu_cores",
              "refId":"b",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"namespace",
                  "method":"eq",
                  "value":[
                    "$namespace"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod",
                  "method":"eq",
                  "value":[
                    "$pod_name"
                  ]
                }
              ]
            }
          ],
          "refId":"B",
          "source":"avg by(pod) (rate(container_cpu_usage_seconds_total{bcs_cluster_id=\"$cluster_id\",namespace=\"$namespace\",pod=\"$pod_name\"}[2m])) / on(pod) group_right() sum by(pod) (kube_pod_container_resource_limits_cpu_cores{bcs_cluster_id=\"$cluster_id\",namespace=\"$namespace\",pod=\"$pod_name\"}) * 100",
          "step":"",
          "type":"range"
        }
      ],
      "title":"CPU使用率",
      "transformations":[
        {
          "id":"limit",
          "options":{
            "limitField":200
          }
        },
        {
          "id":"concatenate",
          "options":{
            "frameNameLabel":"frame",
            "frameNameMode":"drop"
          }
        }
      ],
      "type":"stat"
    },
    {
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "fieldConfig":{
        "defaults":{
          "color":{
            "mode":"palette-classic"
          },
          "custom":{
            "axisCenteredZero":false,
            "axisColorMode":"text",
            "axisLabel":"",
            "axisPlacement":"auto",
            "barAlignment":0,
            "drawStyle":"line",
            "fillOpacity":10,
            "gradientMode":"none",
            "hideFrom":{
              "legend":false,
              "tooltip":false,
              "viz":false
            },
            "lineInterpolation":"linear",
            "lineWidth":1,
            "pointSize":5,
            "scaleDistribution":{
              "type":"linear"
            },
            "showPoints":"never",
            "spanNulls":false,
            "stacking":{
              "group":"A",
              "mode":"none"
            },
            "thresholdsStyle":{
              "mode":"off"
            }
          },
          "links":[

          ],
          "mappings":[

          ],
          "min":0,
          "thresholds":{
            "mode":"absolute",
            "steps":[
              {
                "color":"green",
                "value":null
              },
              {
                "color":"red",
                "value":80
              }
            ]
          },
          "unit":"s"
        },
        "overrides":[
          {
            "matcher":{
              "id":"byFrameRefID",
              "options":"A"
            },
            "properties":[
              {
                "id":"custom.drawStyle",
                "value":"line"
              },
              {
                "id":"custom.lineWidth",
                "value":6
              }
            ]
          },
          {
            "matcher":{
              "id":"byFrameRefID",
              "options":"B"
            },
            "properties":[
              {
                "id":"custom.drawStyle",
                "value":"line"
              },
              {
                "id":"custom.lineWidth",
                "value":3
              },
              {
                "id":"custom.axisPlacement",
                "value":"right"
              }
            ]
          },
          {
            "matcher":{
              "id":"byFrameRefID",
              "options":"C"
            },
            "properties":[
              {
                "id":"custom.fillOpacity",
                "value":0
              },
              {
                "id":"custom.axisPlacement",
                "value":"right"
              }
            ]
          }
        ]
      },
      "gridPos":{
        "h":7,
        "w":8,
        "x":8,
        "y":1
      },
      "id":23,
      "links":[

      ],
      "options":{
        "legend":{
          "calcs":[
            "lastNotNull"
          ],
          "displayMode":"list",
          "placement":"bottom",
          "showLegend":true
        },
        "tooltip":{
          "mode":"multi",
          "sort":"none"
        }
      },
      "pluginVersion":"9.1.0",
      "targets":[
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[

          ],
          "format":"time_series",
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"使用量- $tag_container_name",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":true,
              "filter_dict":{

              },
              "functions":[
                {
                  "id":"rate",
                  "params":[
                    {
                      "id":"window",
                      "value":"2m"
                    }
                  ]
                }
              ],
              "group_by":[
                "container_name"
              ],
              "interval":60,
              "interval_unit":"s",
              "method":"SUM",
              "metric_field":"container_cpu_usage_seconds_total",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"job",
                  "method":"reg",
                  "value":[
                    "kubelet|cadvisor"
                  ]
                },
                {
                  "condition":"and",
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"namespace",
                  "method":"eq",
                  "value":[
                    "$namespace"
                  ]
                },
                {
                  "condition":"and",
                  "key":"image",
                  "method":"neq",
                  "value":[
                    ""
                  ]
                },
                {
                  "condition":"and",
                  "key":"container_name",
                  "method":"neq",
                  "value":[
                    "POD"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod_name",
                  "method":"eq",
                  "value":[
                    "$pod_name"
                  ]
                }
              ]
            }
          ],
          "refId":"A",
          "source":"",
          "step":"",
          "type":"range"
        },
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[

          ],
          "format":"time_series",
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"requests -$tag_container",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":true,
              "filter_dict":{

              },
              "functions":[

              ],
              "group_by":[
                "container"
              ],
              "interval":60,
              "interval_unit":"s",
              "method":"sum_without_time",
              "metric_field":"kube_pod_container_resource_requests_cpu_cores",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"namespace",
                  "method":"eq",
                  "value":[
                    "$namespace"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod",
                  "method":"eq",
                  "value":[
                    "$pod_name"
                  ]
                }
              ]
            }
          ],
          "refId":"B",
          "source":"",
          "step":"",
          "type":"range"
        },
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[
            {
              "active":true,
              "alias":"limit - $tag_container",
              "expression":"a / 100000",
              "functions":[

              ]
            }
          ],
          "format":"time_series",
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":false,
              "filter_dict":{

              },
              "functions":[

              ],
              "group_by":[
                "container"
              ],
              "interval":60,
              "interval_unit":"s",
              "method":"avg_without_time",
              "metric_field":"container_spec_cpu_quota",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"namespace",
                  "method":"eq",
                  "value":[
                    "$namespace"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod",
                  "method":"eq",
                  "value":[
                    "$pod_name"
                  ]
                },
                {
                  "condition":"and",
                  "key":"container_name",
                  "method":"neq",
                  "value":[
                    ""
                  ]
                }
              ]
            }
          ],
          "refId":"C",
          "source":"",
          "step":"",
          "type":"range"
        }
      ],
      "title":"CPU使用量（单位秒）",
      "type":"timeseries"
    },
    {
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "fieldConfig":{
        "defaults":{
          "color":{
            "mode":"palette-classic"
          },
          "custom":{
            "axisCenteredZero":false,
            "axisColorMode":"text",
            "axisLabel":"",
            "axisPlacement":"auto",
            "barAlignment":0,
            "drawStyle":"line",
            "fillOpacity":0,
            "gradientMode":"none",
            "hideFrom":{
              "legend":false,
              "tooltip":false,
              "viz":false
            },
            "lineInterpolation":"linear",
            "lineWidth":1,
            "pointSize":5,
            "scaleDistribution":{
              "type":"linear"
            },
            "showPoints":"auto",
            "spanNulls":false,
            "stacking":{
              "group":"A",
              "mode":"none"
            },
            "thresholdsStyle":{
              "mode":"off"
            }
          },
          "links":[

          ],
          "mappings":[

          ],
          "thresholds":{
            "mode":"absolute",
            "steps":[
              {
                "color":"transparent",
                "value":null
              },
              {
                "color":"red",
                "value":0.25
              }
            ]
          },
          "unit":"short"
        },
        "overrides":[

        ]
      },
      "gridPos":{
        "h":7,
        "w":4,
        "x":16,
        "y":1
      },
      "id":2,
      "links":[

      ],
      "options":{
        "legend":{
          "calcs":[

          ],
          "displayMode":"list",
          "placement":"bottom",
          "showLegend":true
        },
        "tooltip":{
          "mode":"single",
          "sort":"none"
        }
      },
      "pluginVersion":"9.1.0",
      "targets":[
        {
          "alias":"$tag_container",
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "display":true,
          "expression":"a /b",
          "host":[

          ],
          "module":[

          ],
          "query_configs":[
            {
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":false,
              "filter_dict":{

              },
              "functions":[
                {
                  "id":"increase",
                  "params":[
                    {
                      "id":"window",
                      "value":"5m"
                    }
                  ]
                }
              ],
              "group_by":[
                "container"
              ],
              "interval":150,
              "interval_unit":"s",
              "method":"SUM",
              "metric_field":"container_cpu_cfs_throttled_periods_total",
              "metric_id":"bk_monitor..container_cpu_cfs_throttled_periods_total",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"namespace",
                  "method":"eq",
                  "value":[
                    "$namespace"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod_name",
                  "method":"eq",
                  "value":[
                    "$pod_name"
                  ]
                },
                {
                  "condition":"and",
                  "key":"container",
                  "method":"neq",
                  "value":[
                    "POD"
                  ]
                },
                {
                  "condition":"and",
                  "key":"container",
                  "method":"neq",
                  "value":[
                    ""
                  ]
                },
                {
                  "condition":"and",
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                }
              ]
            },
            {
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":false,
              "filter_dict":{

              },
              "functions":[
                {
                  "id":"increase",
                  "params":[
                    {
                      "id":"window",
                      "value":"5m"
                    }
                  ]
                }
              ],
              "group_by":[
                "container"
              ],
              "interval":150,
              "interval_unit":"s",
              "method":"SUM",
              "metric_field":"container_cpu_cfs_periods_total",
              "metric_id":"bk_monitor..container_cpu_cfs_periods_total",
              "refId":"b",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"namespace",
                  "method":"eq",
                  "value":[
                    "$namespace"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod_name",
                  "method":"eq",
                  "value":[
                    "$pod_name"
                  ]
                },
                {
                  "condition":"and",
                  "key":"container",
                  "method":"neq",
                  "value":[
                    "POD"
                  ]
                },
                {
                  "condition":"and",
                  "key":"container",
                  "method":"neq",
                  "value":[
                    ""
                  ]
                },
                {
                  "condition":"and",
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                }
              ]
            }
          ],
          "refId":"A"
        }
      ],
      "title":"CPU Throttling",
      "type":"timeseries"
    },
    {
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "description":"集群容器内存每5分钟触顶总次数，健康应该为0",
      "fieldConfig":{
        "defaults":{
          "color":{
            "mode":"thresholds"
          },
          "mappings":[

          ],
          "max":1,
          "min":0,
          "thresholds":{
            "mode":"absolute",
            "steps":[
              {
                "color":"blue",
                "value":null
              },
              {
                "color":"orange",
                "value":0.000001
              }
            ]
          },
          "unit":"short"
        },
        "overrides":[

        ]
      },
      "gridPos":{
        "h":7,
        "w":4,
        "x":20,
        "y":1
      },
      "id":37,
      "links":[

      ],
      "maxDataPoints":100,
      "options":{
        "colorMode":"value",
        "graphMode":"area",
        "justifyMode":"auto",
        "orientation":"auto",
        "reduceOptions":{
          "calcs":[
            "lastNotNull"
          ],
          "fields":"",
          "values":false
        },
        "textMode":"auto"
      },
      "pluginVersion":"9.1.0",
      "targets":[
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[

          ],
          "format":"time_series",
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":true,
              "filter_dict":{

              },
              "functions":[
                {
                  "id":"irate",
                  "params":[
                    {
                      "id":"window",
                      "value":"5m"
                    }
                  ]
                }
              ],
              "group_by":[

              ],
              "interval":150,
              "interval_unit":"s",
              "method":"SUM",
              "metric_field":"container_memory_failcnt",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"container",
                  "method":"neq",
                  "value":[
                    "POD"
                  ]
                },
                {
                  "condition":"and",
                  "key":"job",
                  "method":"reg",
                  "value":[
                    "^(kubelet|cadvisor)$"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod",
                  "method":"eq",
                  "value":[
                    "$pod_name"
                  ]
                }
              ]
            }
          ],
          "refId":"A",
          "source":"sum(irate(container_memory_failcnt{bcs_cluster_id=\"$cluster_id\",container!=\"POD\",job=~\"^(kubelet|cadvisor)$\"}[5m]))",
          "step":"",
          "type":"instant"
        }
      ],
      "title":"容器内存触顶次数",
      "type":"stat"
    },
    {
      "collapsed":false,
      "gridPos":{
        "h":1,
        "w":24,
        "x":0,
        "y":8
      },
      "id":30,
      "panels":[

      ],
      "title":"内存",
      "type":"row"
    },
    {
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "fieldConfig":{
        "defaults":{
          "color":{
            "mode":"thresholds"
          },
          "decimals":2,
          "displayName":"",
          "mappings":[

          ],
          "thresholds":{
            "mode":"absolute",
            "steps":[
              {
                "color":"green",
                "value":null
              },
              {
                "color":"#EAB839",
                "value":80
              },
              {
                "color":"red",
                "value":90
              }
            ]
          },
          "unit":"short"
        },
        "overrides":[

        ]
      },
      "gridPos":{
        "h":7,
        "w":8,
        "x":0,
        "y":9
      },
      "id":32,
      "links":[

      ],
      "options":{
        "colorMode":"value",
        "graphMode":"area",
        "justifyMode":"auto",
        "orientation":"auto",
        "reduceOptions":{
          "calcs":[
            "lastNotNull"
          ],
          "fields":"",
          "values":false
        },
        "textMode":"auto"
      },
      "pluginVersion":"9.1.0",
      "targets":[
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[
            {
              "active":true,
              "alias":"内存Requests %",
              "expression":"a /  b * 100",
              "functions":[

              ]
            }
          ],
          "format":"time_series",
          "hide":false,
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":false,
              "filter_dict":{

              },
              "functions":[],
              "group_by":[
                "pod"
              ],
              "interval":60,
              "interval_unit":"s",
              "method":"SUM",
              "metric_field":"container_memory_working_set_bytes",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"namespace",
                  "method":"eq",
                  "value":[
                    "$namespace"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod",
                  "method":"eq",
                  "value":[
                    "$pod_name"
                  ]
                }
              ]
            },
            {
              "alias":"",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":false,
              "filter_dict":{

              },
              "functions":[

              ],
              "group_by":[
                "pod"
              ],
              "interval":60,
              "interval_unit":"s",
              "method":"sum_without_time",
              "metric_field":"kube_pod_container_resource_requests_memory_bytes",
              "refId":"b",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"namespace",
                  "method":"eq",
                  "value":[
                    "$namespace"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod",
                  "method":"eq",
                  "value":[
                    "$pod_name"
                  ]
                }
              ]
            }
          ],
          "refId":"A",
          "source":"avg by(pod) (rate(container_cpu_usage_seconds_total{bcs_cluster_id=\"$cluster_id\",namespace=\"$namespace\",pod=\"$pod_name\"}[2m])) / on(pod) group_right() sum by(pod) (kube_pod_container_resource_requests_cpu_cores{bcs_cluster_id=\"$cluster_id\",namespace=\"$namespace\",pod=\"$pod_name\"}) * 100",
          "step":"",
          "type":"range"
        },
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[
            {
              "active":true,
              "alias":"内存Limits %",
              "expression":"a /  b * 100",
              "functions":[

              ]
            }
          ],
          "format":"time_series",
          "hide":false,
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":false,
              "filter_dict":{

              },
              "functions":[],
              "group_by":[
                "pod"
              ],
              "interval":60,
              "interval_unit":"s",
              "method":"SUM",
              "metric_field":"container_memory_working_set_bytes",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"namespace",
                  "method":"eq",
                  "value":[
                    "$namespace"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod",
                  "method":"eq",
                  "value":[
                    "$pod_name"
                  ]
                }
              ]
            },
            {
              "alias":"",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":false,
              "filter_dict":{

              },
              "functions":[

              ],
              "group_by":[
                "pod"
              ],
              "interval":60,
              "interval_unit":"s",
              "method":"sum_without_time",
              "metric_field":"kube_pod_container_resource_limits_memory_bytes",
              "refId":"b",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"namespace",
                  "method":"eq",
                  "value":[
                    "$namespace"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod",
                  "method":"eq",
                  "value":[
                    "$pod_name"
                  ]
                }
              ]
            }
          ],
          "refId":"B",
          "source":"avg by(pod) (rate(container_cpu_usage_seconds_total{bcs_cluster_id=\"$cluster_id\",namespace=\"$namespace\",pod=\"$pod_name\"}[2m])) / on(pod) group_right() sum by(pod) (kube_pod_container_resource_limits_cpu_cores{bcs_cluster_id=\"$cluster_id\",namespace=\"$namespace\",pod=\"$pod_name\"}) * 100",
          "step":"",
          "type":"range"
        }
      ],
      "title":"内存使用率",
      "transformations":[
        {
          "id":"limit",
          "options":{
            "limitField":200
          }
        },
        {
          "id":"concatenate",
          "options":{
            "frameNameLabel":"frame",
            "frameNameMode":"drop"
          }
        }
      ],
      "type":"stat"
    },
    {
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "fieldConfig":{
        "defaults":{
          "color":{
            "mode":"palette-classic"
          },
          "custom":{
            "axisCenteredZero":false,
            "axisColorMode":"text",
            "axisLabel":"",
            "axisPlacement":"auto",
            "barAlignment":0,
            "drawStyle":"line",
            "fillOpacity":100,
            "gradientMode":"none",
            "hideFrom":{
              "legend":false,
              "tooltip":false,
              "viz":false
            },
            "lineInterpolation":"linear",
            "lineWidth":0,
            "pointSize":5,
            "scaleDistribution":{
              "type":"linear"
            },
            "showPoints":"never",
            "spanNulls":false,
            "stacking":{
              "group":"A",
              "mode":"normal"
            },
            "thresholdsStyle":{
              "mode":"off"
            }
          },
          "links":[

          ],
          "mappings":[

          ],
          "min":0,
          "thresholds":{
            "mode":"absolute",
            "steps":[
              {
                "color":"green",
                "value":null
              },
              {
                "color":"red",
                "value":80
              }
            ]
          },
          "unit":"bytes"
        },
        "overrides":[
          {
            "matcher":{
              "id":"byName",
              "options":"requests"
            },
            "properties":[
              {
                "id":"color",
                "value":{
                  "fixedColor":"blue",
                  "mode":"fixed"
                }
              },
              {
                "id":"custom.fillOpacity",
                "value":0
              },
              {
                "id":"custom.lineWidth",
                "value":2
              },
              {
                "id":"custom.stacking",
                "value":{
                  "group":false,
                  "mode":"normal"
                }
              },
              {
                "id":"custom.lineStyle",
                "value":{
                  "dash":[
                    10,
                    10
                  ],
                  "fill":"dash"
                }
              },
              {
                "id":"custom.axisPlacement",
                "value":"right"
              }
            ]
          },
          {
            "matcher":{
              "id":"byName",
              "options":"limits"
            },
            "properties":[
              {
                "id":"color",
                "value":{
                  "fixedColor":"red",
                  "mode":"fixed"
                }
              },
              {
                "id":"custom.fillOpacity",
                "value":0
              },
              {
                "id":"custom.lineWidth",
                "value":2
              },
              {
                "id":"custom.stacking",
                "value":{
                  "group":false,
                  "mode":"normal"
                }
              },
              {
                "id":"custom.lineStyle",
                "value":{
                  "dash":[
                    10,
                    10
                  ],
                  "fill":"dash"
                }
              },
              {
                "id":"custom.axisPlacement",
                "value":"right"
              }
            ]
          }
        ]
      },
      "gridPos":{
        "h":7,
        "w":8,
        "x":8,
        "y":9
      },
      "id":4,
      "links":[

      ],
      "options":{
        "legend":{
          "calcs":[
            "lastNotNull"
          ],
          "displayMode":"list",
          "placement":"bottom",
          "showLegend":true
        },
        "tooltip":{
          "mode":"multi",
          "sort":"desc"
        }
      },
      "pluginVersion":"9.1.0",
      "targets":[
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[

          ],
          "format":"time_series",
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"使用量 $tag_container_name",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":true,
              "filter_dict":{

              },
              "functions":[

              ],
              "group_by":[
                "container_name"
              ],
              "interval":60,
              "interval_unit":"s",
              "method":"sum_without_time",
              "metric_field":"container_memory_rss",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"namespace",
                  "method":"eq",
                  "value":[
                    "$namespace"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod_name",
                  "method":"eq",
                  "value":[
                    "$pod_name"
                  ]
                },
                {
                  "condition":"and",
                  "key":"container_name",
                  "method":"neq",
                  "value":[
                    "POD"
                  ]
                },
                {
                  "condition":"and",
                  "key":"container_name",
                  "method":"neq",
                  "value":[
                    ""
                  ]
                }
              ]
            }
          ],
          "refId":"A",
          "source":"",
          "step":"",
          "type":"range"
        },
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[

          ],
          "format":"time_series",
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"requests",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":true,
              "filter_dict":{

              },
              "functions":[

              ],
              "group_by":[

              ],
              "interval":60,
              "interval_unit":"s",
              "method":"sum_without_time",
              "metric_field":"kube_pod_container_resource_requests_memory_bytes",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"namespace",
                  "method":"eq",
                  "value":[
                    "$namespace"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod",
                  "method":"eq",
                  "value":[
                    "$pod_name"
                  ]
                }
              ]
            }
          ],
          "refId":"B",
          "source":"",
          "step":"",
          "type":"range"
        },
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[

          ],
          "format":"time_series",
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"limits",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":true,
              "filter_dict":{

              },
              "functions":[

              ],
              "group_by":[

              ],
              "interval":60,
              "interval_unit":"s",
              "method":"sum_without_time",
              "metric_field":"kube_pod_container_resource_limits_memory_bytes",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"namespace",
                  "method":"eq",
                  "value":[
                    "$namespace"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod",
                  "method":"eq",
                  "value":[
                    "$pod_name"
                  ]
                }
              ]
            }
          ],
          "refId":"C",
          "source":"",
          "step":"",
          "type":"range"
        }
      ],
      "title":"内存使用量(container_memory_rss)",
      "type":"timeseries"
    },
    {
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "fieldConfig":{
        "defaults":{
          "color":{
            "mode":"palette-classic"
          },
          "custom":{
            "axisCenteredZero":false,
            "axisColorMode":"text",
            "axisLabel":"",
            "axisPlacement":"auto",
            "barAlignment":0,
            "drawStyle":"line",
            "fillOpacity":100,
            "gradientMode":"none",
            "hideFrom":{
              "legend":false,
              "tooltip":false,
              "viz":false
            },
            "lineInterpolation":"linear",
            "lineWidth":0,
            "pointSize":5,
            "scaleDistribution":{
              "type":"linear"
            },
            "showPoints":"never",
            "spanNulls":false,
            "stacking":{
              "group":"A",
              "mode":"normal"
            },
            "thresholdsStyle":{
              "mode":"off"
            }
          },
          "links":[

          ],
          "mappings":[

          ],
          "min":0,
          "thresholds":{
            "mode":"absolute",
            "steps":[
              {
                "color":"green",
                "value":null
              },
              {
                "color":"red",
                "value":80
              }
            ]
          },
          "unit":"bytes"
        },
        "overrides":[
          {
            "matcher":{
              "id":"byName",
              "options":"requests"
            },
            "properties":[
              {
                "id":"color",
                "value":{
                  "fixedColor":"blue",
                  "mode":"fixed"
                }
              },
              {
                "id":"custom.fillOpacity",
                "value":0
              },
              {
                "id":"custom.lineWidth",
                "value":2
              },
              {
                "id":"custom.stacking",
                "value":{
                  "group":false,
                  "mode":"normal"
                }
              },
              {
                "id":"custom.lineStyle",
                "value":{
                  "dash":[
                    10,
                    10
                  ],
                  "fill":"dash"
                }
              },
              {
                "id":"custom.axisPlacement",
                "value":"right"
              }
            ]
          },
          {
            "matcher":{
              "id":"byName",
              "options":"limits"
            },
            "properties":[
              {
                "id":"color",
                "value":{
                  "fixedColor":"red",
                  "mode":"fixed"
                }
              },
              {
                "id":"custom.fillOpacity",
                "value":0
              },
              {
                "id":"custom.lineWidth",
                "value":2
              },
              {
                "id":"custom.stacking",
                "value":{
                  "group":false,
                  "mode":"normal"
                }
              },
              {
                "id":"custom.lineStyle",
                "value":{
                  "dash":[
                    10,
                    10
                  ],
                  "fill":"dash"
                }
              },
              {
                "id":"custom.axisPlacement",
                "value":"right"
              }
            ]
          }
        ]
      },
      "gridPos":{
        "h":7,
        "w":8,
        "x":16,
        "y":9
      },
      "id":26,
      "links":[

      ],
      "options":{
        "legend":{
          "calcs":[
            "lastNotNull"
          ],
          "displayMode":"list",
          "placement":"bottom",
          "showLegend":true
        },
        "tooltip":{
          "mode":"multi",
          "sort":"desc"
        }
      },
      "pluginVersion":"9.1.0",
      "targets":[
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[

          ],
          "format":"time_series",
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"使用量 $tag_container_name",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":true,
              "filter_dict":{

              },
              "functions":[

              ],
              "group_by":[
                "container_name"
              ],
              "interval":60,
              "interval_unit":"s",
              "method":"sum_without_time",
              "metric_field":"container_memory_working_set_bytes",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"namespace",
                  "method":"eq",
                  "value":[
                    "$namespace"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod_name",
                  "method":"eq",
                  "value":[
                    "$pod_name"
                  ]
                },
                {
                  "condition":"and",
                  "key":"container_name",
                  "method":"neq",
                  "value":[
                    "POD"
                  ]
                },
                {
                  "condition":"and",
                  "key":"container_name",
                  "method":"neq",
                  "value":[
                    ""
                  ]
                }
              ]
            }
          ],
          "refId":"A",
          "source":"",
          "step":"",
          "type":"range"
        },
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[

          ],
          "format":"time_series",
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"requests",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":true,
              "filter_dict":{

              },
              "functions":[

              ],
              "group_by":[

              ],
              "interval":60,
              "interval_unit":"s",
              "method":"sum_without_time",
              "metric_field":"kube_pod_container_resource_requests_memory_bytes",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"namespace",
                  "method":"eq",
                  "value":[
                    "$namespace"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod",
                  "method":"eq",
                  "value":[
                    "$pod_name"
                  ]
                }
              ]
            }
          ],
          "refId":"B",
          "source":"",
          "step":"",
          "type":"range"
        },
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[

          ],
          "format":"time_series",
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"limits",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":true,
              "filter_dict":{

              },
              "functions":[

              ],
              "group_by":[

              ],
              "interval":60,
              "interval_unit":"s",
              "method":"sum_without_time",
              "metric_field":"kube_pod_container_resource_limits_memory_bytes",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"namespace",
                  "method":"eq",
                  "value":[
                    "$namespace"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod",
                  "method":"eq",
                  "value":[
                    "$pod_name"
                  ]
                }
              ]
            }
          ],
          "refId":"C",
          "source":"",
          "step":"",
          "type":"range"
        }
      ],
      "title":"内存使用量(container_memory_working_set_bytes)",
      "type":"timeseries"
    },
    {
      "collapsed":false,
      "gridPos":{
        "h":1,
        "w":24,
        "x":0,
        "y":16
      },
      "id":35,
      "panels":[

      ],
      "title":"磁盘空间",
      "type":"row"
    },
    {
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "fieldConfig":{
        "defaults":{
          "color":{
            "mode":"palette-classic"
          },
          "custom":{
            "axisCenteredZero":false,
            "axisColorMode":"text",
            "axisLabel":"",
            "axisPlacement":"auto",
            "barAlignment":0,
            "drawStyle":"line",
            "fillOpacity":32,
            "gradientMode":"opacity",
            "hideFrom":{
              "legend":false,
              "tooltip":false,
              "viz":false
            },
            "lineInterpolation":"linear",
            "lineWidth":0,
            "pointSize":3,
            "scaleDistribution":{
              "type":"linear"
            },
            "showPoints":"always",
            "spanNulls":false,
            "stacking":{
              "group":"A",
              "mode":"normal"
            },
            "thresholdsStyle":{
              "mode":"off"
            }
          },
          "links":[

          ],
          "mappings":[

          ],
          "min":0,
          "thresholds":{
            "mode":"absolute",
            "steps":[
              {
                "color":"green",
                "value":null
              },
              {
                "color":"red",
                "value":80
              }
            ]
          },
          "unit":"bytes"
        },
        "overrides":[
          {
            "matcher":{
              "id":"byName",
              "options":"requests"
            },
            "properties":[
              {
                "id":"color",
                "value":{
                  "fixedColor":"blue",
                  "mode":"fixed"
                }
              },
              {
                "id":"custom.fillOpacity",
                "value":0
              },
              {
                "id":"custom.lineWidth",
                "value":2
              },
              {
                "id":"custom.stacking",
                "value":{
                  "group":false,
                  "mode":"normal"
                }
              },
              {
                "id":"custom.lineStyle",
                "value":{
                  "dash":[
                    10,
                    10
                  ],
                  "fill":"dash"
                }
              }
            ]
          },
          {
            "matcher":{
              "id":"byName",
              "options":"limits"
            },
            "properties":[
              {
                "id":"color",
                "value":{
                  "fixedColor":"red",
                  "mode":"fixed"
                }
              },
              {
                "id":"custom.fillOpacity",
                "value":0
              },
              {
                "id":"custom.lineWidth",
                "value":2
              },
              {
                "id":"custom.stacking",
                "value":{
                  "group":false,
                  "mode":"normal"
                }
              },
              {
                "id":"custom.lineStyle",
                "value":{
                  "dash":[
                    10,
                    10
                  ],
                  "fill":"dash"
                }
              }
            ]
          },
          {
            "matcher":{
              "id":"byName",
              "options":"bkmonitor-operator"
            },
            "properties":[
              {
                "id":"color",
                "value":{
                  "fixedColor":"blue",
                  "mode":"fixed"
                }
              }
            ]
          }
        ]
      },
      "gridPos":{
        "h":7,
        "w":24,
        "x":0,
        "y":17
      },
      "id":33,
      "links":[

      ],
      "options":{
        "legend":{
          "calcs":[
            "lastNotNull"
          ],
          "displayMode":"list",
          "placement":"bottom",
          "showLegend":true
        },
        "tooltip":{
          "mode":"multi",
          "sort":"desc"
        }
      },
      "pluginVersion":"9.1.0",
      "targets":[
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[

          ],
          "format":"time_series",
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"$tag_container_name",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":true,
              "filter_dict":{

              },
              "functions":[

              ],
              "group_by":[
                "container_name"
              ],
              "interval":60,
              "interval_unit":"s",
              "method":"sum_without_time",
              "metric_field":"container_fs_usage_bytes",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"bcs_cluster_id",
                  "method":"eq",
                  "value":[
                    "$cluster_id"
                  ]
                },
                {
                  "condition":"and",
                  "key":"namespace",
                  "method":"eq",
                  "value":[
                    "$namespace"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod_name",
                  "method":"eq",
                  "value":[
                    "$pod_name"
                  ]
                },
                {
                  "condition":"and",
                  "key":"container_name",
                  "method":"neq",
                  "value":[
                    "POD"
                  ]
                },
                {
                  "condition":"and",
                  "key":"container_name",
                  "method":"neq",
                  "value":[
                    ""
                  ]
                }
              ]
            }
          ],
          "refId":"A",
          "source":"",
          "step":"",
          "type":"range"
        }
      ],
      "title":"磁盘使用量",
      "type":"timeseries"
    },
    {
      "collapsed":false,
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "gridPos":{
        "h":1,
        "w":24,
        "x":0,
        "y":24
      },
      "id":17,
      "panels":[

      ],
      "targets":[
        {
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "refId":"A"
        }
      ],
      "title":"网络进出流量",
      "type":"row"
    },
    {
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "fieldConfig":{
        "defaults":{
          "color":{
            "mode":"palette-classic"
          },
          "custom":{
            "axisCenteredZero":false,
            "axisColorMode":"text",
            "axisLabel":"",
            "axisPlacement":"auto",
            "barAlignment":0,
            "drawStyle":"line",
            "fillOpacity":100,
            "gradientMode":"none",
            "hideFrom":{
              "legend":false,
              "tooltip":false,
              "viz":false
            },
            "lineInterpolation":"linear",
            "lineWidth":0,
            "pointSize":5,
            "scaleDistribution":{
              "type":"linear"
            },
            "showPoints":"never",
            "spanNulls":false,
            "stacking":{
              "group":"A",
              "mode":"normal"
            },
            "thresholdsStyle":{
              "mode":"off"
            }
          },
          "links":[

          ],
          "mappings":[

          ],
          "min":0,
          "thresholds":{
            "mode":"absolute",
            "steps":[
              {
                "color":"green",
                "value":null
              },
              {
                "color":"red",
                "value":80
              }
            ]
          },
          "unit":"Bps"
        },
        "overrides":[
          {
            "matcher":{
              "id":"byName",
              "options":"Value"
            },
            "properties":[
              {
                "id":"unit",
                "value":"Bps"
              }
            ]
          },
          {
            "matcher":{
              "id":"byName",
              "options":"出流量：bkm-daemonset-worker-2vw2d"
            },
            "properties":[
              {
                "id":"color",
                "value":{
                  "fixedColor":"blue",
                  "mode":"fixed"
                }
              }
            ]
          }
        ]
      },
      "gridPos":{
        "h":7,
        "w":24,
        "x":0,
        "y":25
      },
      "id":6,
      "interval":"1m",
      "links":[

      ],
      "options":{
        "legend":{
          "calcs":[
            "lastNotNull"
          ],
          "displayMode":"list",
          "placement":"bottom",
          "showLegend":true
        },
        "tooltip":{
          "mode":"single",
          "sort":"none"
        }
      },
      "pluginVersion":"9.1.0",
      "targets":[
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[

          ],
          "format":"time_series",
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"进流量：$tag_pod",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":true,
              "filter_dict":{

              },
              "functions":[
                {
                  "id":"irate",
                  "params":[
                    {
                      "id":"window",
                      "value":"2m"
                    }
                  ]
                }
              ],
              "group_by":[
                "pod",
                "pod_name"
              ],
              "interval":60,
              "interval_unit":"s",
              "method":"SUM",
              "metric_field":"container_network_receive_bytes_total",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"namespace",
                  "method":"reg",
                  "value":[
                    "$namespace"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod_name",
                  "method":"reg",
                  "value":[
                    "$pod_name"
                  ]
                }
              ]
            }
          ],
          "refId":"A",
          "source":"",
          "step":"",
          "type":"range"
        },
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[

          ],
          "format":"time_series",
          "hide":false,
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"出流量：$tag_pod",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":true,
              "filter_dict":{

              },
              "functions":[
                {
                  "id":"irate",
                  "params":[
                    {
                      "id":"window",
                      "value":"2m"
                    }
                  ]
                }
              ],
              "group_by":[
                "pod",
                "pod_name"
              ],
              "interval":60,
              "interval_unit":"s",
              "method":"SUM",
              "metric_field":"container_network_transmit_bytes_total",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"namespace",
                  "method":"reg",
                  "value":[
                    "$namespace"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod_name",
                  "method":"reg",
                  "value":[
                    "$pod_name"
                  ]
                }
              ]
            }
          ],
          "refId":"B",
          "source":"sum by(pod, pod_name) (irate(container_network_transmit_bytes_total{namespace=~\"$namespace\",pod_name=~\"$pod_name\"}[2m]))",
          "step":"",
          "type":"range"
        }
      ],
      "title":"进出流量",
      "type":"timeseries"
    },
    {
      "collapsed":false,
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "gridPos":{
        "h":1,
        "w":24,
        "x":0,
        "y":32
      },
      "id":19,
      "panels":[

      ],
      "targets":[
        {
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "refId":"A"
        }
      ],
      "title":"网络包收发速率",
      "type":"row"
    },
    {
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "fieldConfig":{
        "defaults":{
          "color":{
            "mode":"palette-classic"
          },
          "custom":{
            "axisCenteredZero":false,
            "axisColorMode":"text",
            "axisLabel":"",
            "axisPlacement":"auto",
            "barAlignment":0,
            "drawStyle":"line",
            "fillOpacity":100,
            "gradientMode":"none",
            "hideFrom":{
              "legend":false,
              "tooltip":false,
              "viz":false
            },
            "lineInterpolation":"linear",
            "lineWidth":0,
            "pointSize":5,
            "scaleDistribution":{
              "type":"linear"
            },
            "showPoints":"never",
            "spanNulls":false,
            "stacking":{
              "group":"A",
              "mode":"normal"
            },
            "thresholdsStyle":{
              "mode":"off"
            }
          },
          "links":[

          ],
          "mappings":[

          ],
          "min":0,
          "thresholds":{
            "mode":"absolute",
            "steps":[
              {
                "color":"green"
              },
              {
                "color":"red",
                "value":80
              }
            ]
          },
          "unit":"Bps"
        },
        "overrides":[
          {
            "matcher":{
              "id":"byName",
              "options":"发包速率：bkm-daemonset-worker-2vw2d"
            },
            "properties":[
              {
                "id":"color",
                "value":{
                  "fixedColor":"blue",
                  "mode":"fixed"
                }
              }
            ]
          }
        ]
      },
      "gridPos":{
        "h":7,
        "w":24,
        "x":0,
        "y":33
      },
      "id":8,
      "interval":"1m",
      "links":[

      ],
      "options":{
        "legend":{
          "calcs":[
            "lastNotNull"
          ],
          "displayMode":"list",
          "placement":"bottom",
          "showLegend":true
        },
        "tooltip":{
          "mode":"single",
          "sort":"none"
        }
      },
      "pluginVersion":"9.1.0",
      "targets":[
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[

          ],
          "format":"time_series",
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"收包速率：$tag_pod_name",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":true,
              "filter_dict":{

              },
              "functions":[
                {
                  "id":"irate",
                  "params":[
                    {
                      "id":"window",
                      "value":"2m"
                    }
                  ]
                }
              ],
              "group_by":[
                "pod_name"
              ],
              "interval":60,
              "interval_unit":"s",
              "method":"SUM",
              "metric_field":"container_network_receive_packets_total",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"namespace",
                  "method":"reg",
                  "value":[
                    "$namespace"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod_name",
                  "method":"reg",
                  "value":[
                    "$pod_name"
                  ]
                }
              ]
            }
          ],
          "refId":"A",
          "source":"",
          "step":"",
          "type":"range"
        },
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[

          ],
          "format":"time_series",
          "hide":false,
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"发包速率：$tag_pod_name",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":true,
              "filter_dict":{

              },
              "functions":[
                {
                  "id":"irate",
                  "params":[
                    {
                      "id":"window",
                      "value":"2m"
                    }
                  ]
                }
              ],
              "group_by":[
                "pod_name"
              ],
              "interval":60,
              "interval_unit":"s",
              "method":"SUM",
              "metric_field":"container_network_transmit_packets_total",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"namespace",
                  "method":"reg",
                  "value":[
                    "$namespace"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod_name",
                  "method":"reg",
                  "value":[
                    "$pod_name"
                  ]
                }
              ]
            }
          ],
          "refId":"B",
          "source":"sum by(pod_name) (irate(container_network_transmit_packets_total{namespace=~\"$namespace\",pod_name=~\"$pod_name\"}[2m]))",
          "step":"",
          "type":"range"
        }
      ],
      "title":"接收包速率",
      "type":"timeseries"
    },
    {
      "collapsed":false,
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "gridPos":{
        "h":1,
        "w":24,
        "x":0,
        "y":40
      },
      "id":21,
      "panels":[

      ],
      "targets":[
        {
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "refId":"A"
        }
      ],
      "title":"网络丢包",
      "type":"row"
    },
    {
      "datasource":{
        "type":"bkmonitor-timeseries-datasource",
        "uid":"${DS_蓝鲸监控_-_指标数据}"
      },
      "fieldConfig":{
        "defaults":{
          "color":{
            "mode":"palette-classic"
          },
          "custom":{
            "axisCenteredZero":false,
            "axisColorMode":"text",
            "axisLabel":"",
            "axisPlacement":"auto",
            "barAlignment":0,
            "drawStyle":"points",
            "fillOpacity":100,
            "gradientMode":"none",
            "hideFrom":{
              "legend":false,
              "tooltip":false,
              "viz":false
            },
            "lineInterpolation":"linear",
            "lineStyle":{
              "dash":[
                10,
                10
              ],
              "fill":"dash"
            },
            "lineWidth":0,
            "pointSize":5,
            "scaleDistribution":{
              "type":"linear"
            },
            "showPoints":"never",
            "spanNulls":false,
            "stacking":{
              "group":"A",
              "mode":"normal"
            },
            "thresholdsStyle":{
              "mode":"off"
            }
          },
          "links":[

          ],
          "mappings":[

          ],
          "min":0,
          "thresholds":{
            "mode":"absolute",
            "steps":[
              {
                "color":"green"
              },
              {
                "color":"red",
                "value":80
              }
            ]
          },
          "unit":"Bps"
        },
        "overrides":[

        ]
      },
      "gridPos":{
        "h":7,
        "w":24,
        "x":0,
        "y":41
      },
      "id":10,
      "interval":"1m",
      "links":[

      ],
      "options":{
        "legend":{
          "calcs":[
            "lastNotNull"
          ],
          "displayMode":"list",
          "placement":"bottom",
          "showLegend":true
        },
        "tooltip":{
          "mode":"single",
          "sort":"none"
        }
      },
      "pluginVersion":"9.1.0",
      "targets":[
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[

          ],
          "format":"time_series",
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"接收丢包：$tag_pod_name",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":true,
              "filter_dict":{

              },
              "functions":[
                {
                  "id":"irate",
                  "params":[
                    {
                      "id":"window",
                      "value":"2m"
                    }
                  ]
                }
              ],
              "group_by":[
                "pod_name"
              ],
              "interval":60,
              "interval_unit":"s",
              "method":"SUM",
              "metric_field":"container_network_receive_packets_dropped_total",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"namespace",
                  "method":"reg",
                  "value":[
                    "$namespace"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod_name",
                  "method":"reg",
                  "value":[
                    "$pod_name"
                  ]
                }
              ]
            }
          ],
          "refId":"A",
          "source":"",
          "step":"",
          "type":"range"
        },
        {
          "cluster":[

          ],
          "datasource":{
            "type":"bkmonitor-timeseries-datasource",
            "uid":"${DS_蓝鲸监控_-_指标数据}"
          },
          "expressionList":[

          ],
          "format":"time_series",
          "hide":false,
          "host":[

          ],
          "mode":"ui",
          "module":[

          ],
          "promqlAlias":"",
          "query_configs":[
            {
              "alias":"发送丢包：$tag_pod_name",
              "data_source_label":"bk_monitor",
              "data_type_label":"time_series",
              "display":true,
              "filter_dict":{

              },
              "functions":[
                {
                  "id":"irate",
                  "params":[
                    {
                      "id":"window",
                      "value":"2m"
                    }
                  ]
                }
              ],
              "group_by":[
                "pod_name"
              ],
              "interval":60,
              "interval_unit":"s",
              "method":"SUM",
              "metric_field":"container_network_transmit_packets_dropped_total",
              "refId":"a",
              "result_table_id":"",
              "result_table_label":"kubernetes",
              "time_field":"",
              "where":[
                {
                  "key":"namespace",
                  "method":"reg",
                  "value":[
                    "$namespace"
                  ]
                },
                {
                  "condition":"and",
                  "key":"pod_name",
                  "method":"reg",
                  "value":[
                    "$pod_name"
                  ]
                }
              ]
            }
          ],
          "refId":"B",
          "source":"sum by(pod_name) (irate(container_network_transmit_packets_dropped_total{namespace=~\"$namespace\",pod_name=~\"$pod_name\"}[1m]))",
          "step":"",
          "type":"range"
        }
      ],
      "title":"网络收发丢包",
      "type":"timeseries"
    }
  ],
  "refresh":false,
  "schemaVersion":37,
  "style":"dark",
  "tags":[
    "k8s",
    "bkmonitor"
  ],
  "templating":{
    "list":[
      {
        "current":{

        },
        "datasource":{
          "type":"bkmonitor-timeseries-datasource",
          "uid":"${DS_蓝鲸监控_-_指标数据}"
        },
        "definition":"- Blueking Monitor - 维度",
        "hide":0,
        "includeAll":false,
        "label":"",
        "multi":false,
        "name":"cluster_id",
        "options":[

        ],
        "query":{
          "metricConfig":{
            "data_source_label":"bk_monitor",
            "data_type_label":"time_series",
            "group_by":"bcs_cluster_id",
            "metric_field":"node_load15",
            "result_table_id":"",
            "result_table_label":"kubernetes",
            "where":[

            ]
          },
          "queryType":"dimension",
          "variables":""
        },
        "refresh":1,
        "regex":"",
        "skipUrlSync":false,
        "sort":1,
        "tagValuesQuery":"",
        "tagsQuery":"",
        "type":"query",
        "useTags":false
      },
      {
        "current":{

        },
        "datasource":{
          "type":"bkmonitor-timeseries-datasource",
          "uid":"${DS_蓝鲸监控_-_指标数据}"
        },
        "definition":"- Blueking Monitor - 维度",
        "hide":0,
        "includeAll":false,
        "multi":false,
        "name":"namespace",
        "options":[

        ],
        "query":{
          "metricConfig":{
            "data_source_label":"bk_monitor",
            "data_type_label":"time_series",
            "group_by":"namespace",
            "metric_field":"container_memory_rss",
            "result_table_id":"",
            "result_table_label":"kubernetes",
            "where":[
              {
                "key":"bcs_cluster_id",
                "method":"eq",
                "value":[
                  "$cluster_id"
                ]
              }
            ]
          },
          "queryType":"dimension",
          "variables":"$cluster_id"
        },
        "refresh":1,
        "regex":"",
        "skipUrlSync":false,
        "sort":1,
        "tagValuesQuery":"",
        "tagsQuery":"",
        "type":"query",
        "useTags":false
      },
      {
        "current":{

        },
        "datasource":{
          "type":"bkmonitor-timeseries-datasource",
          "uid":"${DS_蓝鲸监控_-_指标数据}"
        },
        "definition":"- Blueking Monitor - 维度",
        "hide":0,
        "includeAll":false,
        "label":"Pod",
        "multi":false,
        "name":"pod_name",
        "options":[

        ],
        "query":{
          "metricConfig":{
            "data_source_label":"bk_monitor",
            "data_type_label":"time_series",
            "group_by":"pod_name",
            "metric_field":"container_memory_rss",
            "result_table_id":"",
            "result_table_label":"kubernetes",
            "where":[
              {
                "key":"namespace",
                "method":"eq",
                "value":[
                  "$namespace"
                ]
              }
            ]
          },
          "queryType":"dimension",
          "variables":"$namespace"
        },
        "refresh":2,
        "regex":"",
        "skipUrlSync":false,
        "sort":1,
        "tagValuesQuery":"",
        "tagsQuery":"",
        "type":"query",
        "useTags":false
      }
    ]
  },
  "time":{
    "from":"now-1h",
    "to":"now"
  },
  "timepicker":{
    "refresh_intervals":[
      "5s",
      "10s",
      "30s",
      "1m",
      "5m",
      "15m",
      "30m",
      "1h",
      "2h",
      "1d"
    ],
    "time_options":[
      "5m",
      "15m",
      "1h",
      "6h",
      "12h",
      "24h",
      "2d",
      "7d",
      "30d"
    ]
  },
  "timezone":"browser",
  "title":"kubernetes集群资源-Pod",
  "version":36,
  "weekStart":"",
  "__inputs":[
    {
      "name":"DS_蓝鲸监控_-_指标数据",
      "label":"蓝鲸监控 - 指标数据",
      "description":"",
      "type":"datasource",
      "pluginId":"bkmonitor-timeseries-datasource",
      "pluginName":"Blueing Monitor TimeSeries"
    }
  ],
  "__requires":[
    {
      "type":"datasource",
      "id":"bkmonitor-timeseries-datasource",
      "name":"Blueing Monitor TimeSeries"
    }
  ]
}