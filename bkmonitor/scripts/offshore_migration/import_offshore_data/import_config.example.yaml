# ============================================================================
# 监控配置导入配置文件示例
# ============================================================================
# 
# 本配置文件用于配置监控平台的配置数据导入功能
# 支持从导出文件导入告警策略、仪表盘、采集配置等多种资源类型
#
# 使用方法:
#   python scripts/offshore_migration/import_config.py --export-file export_data/monitor_config_export_20250119_155709.json --config import_config.yaml
#   或
#   python manage.py shell < scripts/example_import_usage.py
#
# ============================================================================

# ----------------------------------------------------------------------------
# 导入配置 (import)
# ----------------------------------------------------------------------------
import:
  # 资源类型列表
  # 作用: 指定要导入哪些类型的资源
  # 类型: 字符串列表
  # 可选值:
  #   - strategy: 告警策略
  #   - user_group: 告警组
  #   - duty_rule: 轮值规则
  #   - action_config: 处理套餐
  #   - action_plugin: 响应动作插件
  #   - alert_assign_group: 告警分派组
  #   - shield: 告警屏蔽
  #   - dashboard: 仪表盘
  #   - collect_config: 数据采集配置
  #   - collector_plugin: 采集插件
  #   - custom_ts_table: 自定义时序表
  #   - custom_ts_group: 自定义时序分组
  # 示例:
  #   - 导入指定资源: ["strategy", "dashboard", "user_group"]
  #   - 导入所有资源: [] (空列表)
  # 注意: 空列表 [] 表示导入所有资源类型
  resources: []
  
  # 冲突处理策略
  # 作用: 当导入的对象已存在时，如何处理冲突
  # 类型: 字符串
  # 可选值:
  #   - skip: 跳过已存在的对象（默认，推荐）
  #   - overwrite: 覆盖已存在的对象
  #   - rename: 重命名新对象（添加后缀）
  # 示例:
  #   conflict_strategy: "skip"
  conflict_strategy: "skip"
  
  # 是否验证导入数据
  # 作用: 导入前是否验证数据格式和完整性
  # 类型: 布尔值
  # 默认: true
  validate: true

# ----------------------------------------------------------------------------
# 适配层配置 (adapters)
# ----------------------------------------------------------------------------
# 适配层用于在导入过程中对数据进行转换和适配，以适应目标环境
adapters:
  
  # 业务ID映射配置（必需）
  # 作用: 将源环境的业务ID映射到目标环境的业务ID
  # 类型: 字典
  # 配置项:
  #   - mapping: 手动映射关系（字典，必需）
  # 
  # mapping 参数说明:
  #   - 格式: "原业务ID": "目标业务ID"（字符串格式）
  #   - 如果导出时使用了 auto: true，则导入时必须提供此映射
  #   - 如果导出数据中有 _biz_id_mapping_required: true 标记，则必须提供映射
  #
  # 示例:
  biz_id_mapping:
    mapping:
      "100": "200"  # 原业务ID 100 → 目标业务ID 200
      "101": "201"  # 原业务ID 101 → 目标业务ID 201
      "102": "202"  # 原业务ID 102 → 目标业务ID 202
  
  # 用户信息处理配置（可选）
  # 作用: 处理导入数据中的用户字段（如创建人、更新人等）
  # 类型: 字典
  # 配置项:
  #   - strategy: 处理策略（字符串，可选值: keep/replace，默认: keep）
  #   - default_user: 默认用户（字符串，仅在 strategy=replace 时使用，默认: "admin"）
  #
  # strategy 参数说明:
  #   - keep: 保留原始用户信息（默认，推荐用于同环境迁移）
  #   - replace: 将所有用户字段替换为 default_user 指定的用户
  #              适用于跨环境迁移且目标环境用户体系不同的场景
  #
  # 处理的字段:
  #   - create_user, update_user, created_by, updated_by
  #
  # 示例 1: 保留原始用户（默认）
  user_mapping:
    strategy: "keep"
    # default_user: "admin"  # keep 策略下不需要此配置
  
  # 示例 2: 替换为默认用户
  # user_mapping:
  #   strategy: "replace"
  #   default_user: "admin"
  
  # 域名处理配置（通常不需要）
  # 作用: 如果需要反向替换域名（新域名 -> 旧域名）
  # 类型: 字典
  # 注意: 通常导入时不需要域名替换，此配置保留用于特殊场景
  # domain_mapping: {}
