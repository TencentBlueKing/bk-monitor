
### 特定业务配置识别

在数据迁移处理过程中，有时需要对特定业务的配置进行统一处理。首先需要对业务进行识别

1. 如果表中存在 `bk_biz_id` 字段或其他业务字段，则认为该数据属于该业务
2. 如果表中不存在业务字段，有两种可能性
   1. 该表是全局表，不属于任何业务
   2. 该表是业务表，但是需要通过其他有业务字段的关联表来确定归属

### 按模块整理的表业务归属分类

> **分类说明**：
> - **有业务ID**：表中直接包含 `bk_biz_id` 或 `cc_biz_id` 字段
> - **全局表**：无业务归属，属于系统级/平台级配置
> - **需关联推导**：无业务ID字段，但可通过关联字段推导业务归属

---

#### apm

##### 有业务ID的表

| 表名 | 业务ID字段 | 备注 |
|------|-----------|------|
| Endpoint | `bk_biz_id` | APM 端点表 |
| RootEndpoint | `bk_biz_id` | APM 根端点表 |
| TopoInstance | `bk_biz_id` | 继承 `TopoBase` |
| HostInstance | `bk_biz_id` | 继承 `TopoBase` |
| TopoRelation | `bk_biz_id` | 继承 `TopoBase` |
| TopoNode | `bk_biz_id` | 继承 `TopoBase` |
| ApdexConfig | `bk_biz_id` | 继承 `AppConfigBase` |
| SubscriptionConfig | `bk_biz_id` | 订阅配置 |
| ProfileService | `bk_biz_id` | profiling 服务 |
| ApmInstanceDiscover | `bk_biz_id` | 实例发现配置 |
| RemoteServiceRelation | `bk_biz_id` | 继承 `TopoBase` |
| ApmApplication | `bk_biz_id` | APM 应用主表，`id` 可作为 `application_id` |
| NormalTypeValueConfig | `bk_biz_id` | 继承 `AppConfigBase` |
| MetricDataSource | `bk_biz_id` | APM 指标数据源 |
| SamplerConfig | `bk_biz_id` | 继承 `AppConfigBase` |
| TraceDataSource | `bk_biz_id` | APM Trace 数据源 |
| QpsConfig | `bk_biz_id` | 继承 `AppConfigBase` |
| ApmMetricDimension | `bk_biz_id` | 指标维度配置 |
| BkdataFlowConfig | `bk_biz_id` | 计算平台流配置 |
| LogDataSource | `bk_biz_id` | APM 日志数据源 |
| ProfileDataSource | `bk_biz_id` | APM Profile 数据源 |
| ApmTopoDiscoverRule | `bk_biz_id` | topo 发现规则 |
| BcsClusterDefaultApplicationRelation | `bk_biz_id` | K8s 集群默认应用关联 |
| DataLink | `bk_biz_id` | APM 数据链路（注意与 metadata.DataLink 区分） |
| EbpfApplicationConfig | `bk_biz_id` | eBPF 应用配置 |
| RemoteServiceDiscover | `bk_biz_id` | 远程服务发现 |
| CustomServiceConfig | `bk_biz_id` | 继承 `AppConfigBase` |
| LicenseConfig | `bk_biz_id` | 继承 `AppConfigBase` |
| DbConfig | `bk_biz_id` | 继承 `AppConfigBase` |
| ProbeConfig | `bk_biz_id` | 继承 `AppConfigBase` |

##### 全局表

| 表名 | 备注 |
|------|------|
| FieldNormalizerConfig | 全局字段规范化规则 |

---

#### apm_web

##### 有业务ID的表

| 表名 | 业务ID字段 | 备注 |
|------|-----------|------|
| UserVisitRecord | `bk_biz_id` | 用户访问记录 |
| StrategyTemplate | `bk_biz_id` | 告警策略模板 |
| StrategyInstance | `bk_biz_id` | 策略实例 |
| Application | `bk_biz_id` | APM Web 应用主表 |
| ApdexServiceRelation | `bk_biz_id` | 继承 `ServiceBase` |
| EventServiceRelation | `bk_biz_id` | 继承 `ServiceBase` |
| LogServiceRelation | `bk_biz_id` | 继承 `ServiceBase` |
| CodeRedefinedConfigRelation | `bk_biz_id` | 继承 `ServiceBase` |
| ApplicationCustomService | `bk_biz_id` | 自定义服务 |
| ProfileUploadRecord | `bk_biz_id` | profiling 上传记录 |
| CMDBServiceRelation | `bk_biz_id` | 继承 `ServiceBase` |
| TraceComparison | `bk_biz_id` | Trace 对比 |
| AppServiceRelation | `bk_biz_id` | 服务关联 |
| UriServiceRelation | `bk_biz_id` | 继承 `ServiceBase` |

##### 需关联推导的表

| 表名 | 关联字段 | 推导链路 | 备注 |
|------|---------|---------|------|
| ApplicationRelationInfo | `application_id` | `application_id` → `Application.bk_biz_id` | 应用关联信息 |
| ApmMetaConfig | `config_level`, `level_key` | 依赖配置级别判定归属 | 通过配置级别映射 |

---

#### apm_ebpf

##### 有业务ID的表

| 表名 | 业务ID字段 | 备注 |
|------|-----------|------|
| ClusterRelation | `bk_biz_id` | 另有 `related_bk_biz_id` |
| DeepflowWorkload | `bk_biz_id` | deepflow 集群管理 |
| DeepflowDashboardRecord | `bk_biz_id` | 仪表盘安装记录 |

---

#### bmonitor

##### 有业务ID的表

| 表名 | 业务ID字段 | 备注 |
|------|-----------|------|
| Shield | `bk_biz_id` | 告警屏蔽 |
| ActionConfig | `bk_biz_id` | 自愈套餐 |
| StrategyModel | `bk_biz_id` | 策略主表 |
| StrategyLabel | `bk_biz_id` | 策略标签（`bk_biz_id=0` 时为全局标签） |
| UserGroup | `bk_biz_id` | 告警处理组 |
| AlertAssignRule | `bk_biz_id` | 告警分派规则 |
| BCSCluster | `bk_biz_id` | BCS 集群 |
| DefaultStrategyBizAccessModel | `bk_biz_id` | 默认策略业务接入 |
| AlertAssignGroup | `bk_biz_id` | 告警分派规则组 |
| AIFeatureSettings | `bk_biz_id` | AI 功能配置 |
| DutyRule | `bk_biz_id` | 轮值规则 |
| EventPluginInstance | `bk_biz_id` | 告警源插件安装实例 |
| DutyRuleRelation | `bk_biz_id` | 轮值用户组关系 |
| QueryTemplate | `bk_biz_id` | 查询模板 |
| Report | `bk_biz_id` | 邮件订阅 |
| HomeAlarmGraphConfig | `bk_biz_id` | 首页告警图配置 |
| NoticeSubscribe | `bk_biz_id` | 告警策略订阅 |

##### 全局表

| 表名 | 备注 |
|------|------|
| EventPluginV2 | 告警源插件定义 |
| ActionPlugin | 响应动作插件 |
| MonitorMigration | 迁移记录 |
| ApiAuthToken | API 鉴权令牌（租户级） |

##### 需关联推导的表

| 表名 | 关联字段 | 推导链路 | 备注 |
|------|---------|---------|------|
| ReportItems | `id` | 通过 `ReportContents` → `graphs` 字段推导  | 订阅报表项 |
| ReportContents | `graphs` | `graphs[*].split("-")[0]` → `bk_biz_id` | 报表内容，graphs 格式如 `19055-xxx-1` |
| StrategyHistoryModel | `strategy_id` | → `StrategyModel.bk_biz_id` | 策略变更历史 |
| QueryConfigModel | `strategy_id` | → `StrategyModel.bk_biz_id` | 策略查询配置 |
| ItemModel | `strategy_id` | → `StrategyModel.bk_biz_id` | 策略监控项 |
| DetectModel | `strategy_id` | → `StrategyModel.bk_biz_id` | 策略检测配置 |
| AlgorithmModel | `strategy_id` | → `StrategyModel.bk_biz_id` | 策略算法配置 |
| StrategyActionConfigRelation | `strategy_id`, `config_id` | → `StrategyModel.bk_biz_id` 或 `ActionConfig.bk_biz_id` | 可做归属一致性校验 |
| DutyArrange | `user_group_id` | → `UserGroup.bk_biz_id` | 值班安排 |
| DutyArrangeSnap | `user_group_id` | → `UserGroup.bk_biz_id` | 值班安排快照 |
| DutyRuleSnap | `duty_rule_id` | → `DutyRule.bk_biz_id` | 值班规则快照 |
| DutyPlan | `user_group_id` | → `UserGroup.bk_biz_id` | 值班计划 |
| DutyPlanSendRecord | `user_group_id` | → `UserGroup.bk_biz_id` | 值班计划发送记录 |
| ReportChannel | `report_id` | → `Report.bk_biz_id` | 报表订阅渠道 |
| AlertConfig | `plugin_instance_id` | → `EventPluginInstance.bk_biz_id` | 告警配置 |

---

#### calendars

##### 全局表

| 表名 | 备注 |
|------|------|
| CalendarModel | 日历信息（租户级） |
| CalendarItemModel | 日历事项（租户级） |

---

#### fta_web

##### 有业务ID的表

| 表名 | 业务ID字段 | 备注 |
|------|-----------|------|
| AlertSuggestion | `bk_biz_id` | 告警处理建议 |
| MetricRecommendationFeedback | `bk_biz_id` | 指标推荐反馈 |

##### 全局表

| 表名 | 备注 |
|------|------|
| SearchHistory | 检索历史（用户级） |
| SearchFavorite | 检索收藏（用户级） |
| AlertFeedback | 告警反馈（用户级） |

---

#### monitor

##### 有业务ID的表

| 表名 | 业务ID字段 | 备注 |
|------|-----------|------|
| ApplicationConfig | `cc_biz_id` | 业务配置 |
| UptimeCheckTaskSubscription | `bk_biz_id` | 拨测任务订阅 |

---

#### monitor_web

##### 有业务ID的表

| 表名 | 业务ID字段 | 备注 |
|------|-----------|------|
| UptimeCheckTask | `bk_biz_id` | 拨测任务 |
| CollectConfigMeta | `bk_biz_id` | 采集配置 |
| UptimeCheckNode | `bk_biz_id` | 拨测节点 |
| CollectorPluginMeta | `bk_biz_id` | 插件元信息（`bk_biz_id=0` 为全局插件） |
| QueryHistory | `bk_biz_id` | 数据检索收藏记录 |
| CustomEventGroup | `bk_biz_id` | 自定义事件组 |
| CustomTSTable | `bk_biz_id` | 自定义时序 |
| UptimeCheckGroup | `bk_biz_id` | 拨测任务分组 |
| FavoriteGroup | `bk_biz_id` | 数据检索收藏组 |
| AlertSolution | `bk_biz_id` | 处理建议 |

##### 全局表

| 表名 | 备注 |
|------|------|
| OperatorSystem | 操作系统 |
| UploadedFileInfo | 上传文件 |
| DataTargetMapping | 数据目标映射 |

##### 需关联推导的表

| 表名 | 关联字段 | 推导链路 | 备注 |
|------|---------|---------|------|
| CustomTSField | `time_series_group_id` | → `CustomTSTable.bk_biz_id` | 自定义时序字段 |
| CustomTSGroupingRule | `time_series_group_id` | → `CustomTSTable.bk_biz_id` | 自定义时序分组规则 |
| CustomEventItem | `bk_event_group_id` | → `CustomEventGroup.bk_biz_id` | 自定义事件项 |
| DeploymentConfigVersion | `config_meta_id` | → `CollectConfigMeta.bk_biz_id` | 采集部署配置版本 |
| UptimeCheckTaskCollectorLog | `task_id` | → `UptimeCheckTask.bk_biz_id` | 拨测任务采集日志 |
| PluginVersionHistory | `plugin_id` | → `CollectorPluginMeta.bk_biz_id` | 插件版本历史 |
| CollectorPluginInfo | 无直接外键 | 通过 `PluginVersionHistory.plugin_id` → `CollectorPluginMeta.bk_biz_id` | 需通过版本历史反查 |
| CollectorPluginConfig | 无直接外键 | 通过 `PluginVersionHistory.plugin_id` → `CollectorPluginMeta.bk_biz_id` | 需通过版本历史反查 |

---

#### metadata

##### 有业务ID的表

| 表名 | 业务ID字段 | 备注 |
|------|-----------|------|
| ResultTable | `bk_biz_id` | 结果表主表 |
| CustomReportSubscription | `bk_biz_id` | 自定义上报订阅 |
| TimeSeriesGroup | `bk_biz_id` | 自定义时序分组 |
| EventGroup | `bk_biz_id` | 事件分组 |
| BCSClusterInfo | `bk_biz_id` | BCS 集群信息 |
| ResultTableConfig | `bk_biz_id` | DataLink 结果表配置 |
| DataBusConfig | `bk_biz_id` | DataLink 清洗任务 |
| DataIdConfig | `bk_biz_id` | DataLink 数据源配置 |
| VMStorageBindingConfig | `bk_biz_id` | VM 存储绑定 |
| LogGroup | `bk_biz_id` | 日志分组 |
| CustomReportSubscriptionConfig | `bk_biz_id` | 旧版自定义上报订阅 |
| LogSubscriptionConfig | `bk_biz_id` | 自定义日志订阅 |
| ESStorageBindingConfig | `bk_biz_id` | ES 存储绑定 |
| DorisStorageBindingConfig | `bk_biz_id` | Doris 存储绑定 |
| ConditionalSinkConfig | `bk_biz_id` | 条件 sink 配置 |

##### 全局表

| 表名 | 备注 |
|------|------|
| Label | 标签配置 |
| SpaceType | 空间类型 |
| DataSource | 数据源（租户级） |
| ClusterInfo | 集群配置（租户级） |
| ClusterConfig | DataLink 集群注册（租户级） |
| PingServerSubscriptionConfig | ping server 订阅（租户级） |
| EsSnapshotRepository | 快照仓库（租户级） |
| SpaceStickyInfo | 空间置顶（用户级） |
| CustomRelationStatus | 自定义关联状态 |

##### 需关联推导的表

| 表名 | 关联字段 | 推导链路 | 备注 |
|------|---------|---------|------|
| ResultTableField | `table_id` | → `ResultTable.bk_biz_id` | 结果表字段 |
| ResultTableFieldOption | `table_id` | → `ResultTable.bk_biz_id` | 结果表字段选项 |
| ResultTableOption | `table_id` | → `ResultTable.bk_biz_id` | 结果表选项 |
| DataSourceOption | `bk_data_id` | → `TimeSeriesGroup/EventGroup/LogGroup.bk_biz_id` | 数据源选项 |
| DataSourceResultTable | `table_id` | → `ResultTable.bk_biz_id` | 数据源-结果表关系 |
| ESStorage | `table_id` | → `ResultTable.bk_biz_id` | ES 存储配置 |
| KafkaStorage | `table_id` | → `ResultTable.bk_biz_id` | Kafka 存储 |
| DorisStorage | `table_id` | → `ResultTable.bk_biz_id` | Doris 存储 |
| StorageClusterRecord | `table_id` | → `ResultTable.bk_biz_id` | 存储集群历史 |
| AccessVMRecord | `result_table_id` | → `ResultTable.bk_biz_id` | 接入 VM 记录 |
| EsSnapshotIndice | `table_id` | → `ResultTable.bk_biz_id` | 快照索引记录 |
| EsSnapshotRestore | `table_id` | → `ResultTable.bk_biz_id` | ES 回溯任务 |
| EsSnapshot | `table_id` | → `ResultTable.bk_biz_id` | ES 快照 |
| ESFieldQueryAliasOption | `table_id` | → `ResultTable.bk_biz_id` | ES 字段别名 |
| TimeSeriesMetric | `group_id` | → `TimeSeriesGroup.bk_biz_id` | 时序指标 |
| Event | `event_group_id` | → `EventGroup.bk_biz_id` | 事件定义 |
| KafkaTopicInfo | `bk_data_id` | → `TimeSeriesGroup/EventGroup/LogGroup.bk_biz_id` | Kafka Topic 配置 |
| ServiceMonitorInfo | `cluster_id` | → `BCSClusterInfo.bk_biz_id` | ServiceMonitor 配置 |
| PodMonitorInfo | `cluster_id` | → `BCSClusterInfo.bk_biz_id` | PodMonitor 配置 |
| LogCollectorInfo | `cluster_id` | → `BCSClusterInfo.bk_biz_id` | 日志采集配置 |
| BcsFederalClusterInfo | `*_cluster_id` | → `BCSClusterInfo.bk_biz_id` | 联邦集群拓扑 |
| BkBaseResultTable | `monitor_table_id` | → `ResultTable.bk_biz_id` | 计算平台结果表 |
| DataLink | `bk_data_id` | → `TimeSeriesGroup/EventGroup/LogGroup.bk_biz_id` | 数据链路 |
| Space | `space_type_id`, `space_id` | 当 `space_type_id=bkcc` 时，`space_id` 即 `bk_biz_id` | 空间信息 |
| SpaceDataSource | `space_type_id`, `space_id` | 同上 | 空间数据源 |
| SpaceResource | `space_type_id`, `space_id` | 同上 | 空间资源 |
| SpaceRelatedStorageInfo | `space_type_id`, `space_id` | 同上 | 空间-存储映射 |
| SpaceVMInfo | `space_type`, `space_id` | 同上 | 空间 VM 信息 |
| BkAppSpaceRecord | `space_uid` | 解析 `space_uid` 获取空间类型和ID | 应用空间记录 |

---

### 业务识别逻辑

本节是对上文"特定业务配置识别"在**当前导出表集合**上的落地说明：哪些表可以直接按业务过滤，哪些需要通过关联表推导业务归属，以及哪些更偏全局/租户/用户维度。

#### 总体规则（落地）
- **优先直接字段**：表中存在 `bk_biz_id`（或等价业务字段，如 `cc_biz_id`）时，直接认定归属该业务。
- **其次关联推导**：表中无业务字段但存在"可回溯到业务主表"的关联键时，通过关联表推导出业务归属（见下文"常见链路"）。
- **最后按全局/租户/用户判定**：既无业务字段、又无可回溯关联键时，通常认为是全局表；若仅有 `bk_tenant_id`，则更偏"租户级全局"；若仅与 `username`/用户操作相关，则更偏"用户级全局"。（是否需要对某业务处理，应在处理器中显式排除/纳入）

### 待识别表

下表汇总了在当前导出表集合中，**自身未包含业务ID（如 `bk_biz_id`），但又非全局表，需要通过其他包含业务字段的关联表推导业务归属**的典型表格。

#### bmonitor 模块

##### 策略配置链路

| 表名 | 关联字段 | 推导链路 | 备注 |
|------|---------|---------|------|
| StrategyHistoryModel | `strategy_id` | `strategy_id` → `StrategyModel.bk_biz_id` | 策略变更历史 |
| QueryConfigModel | `strategy_id` | `strategy_id` → `StrategyModel.bk_biz_id` | 策略查询配置 |
| ItemModel | `strategy_id` | `strategy_id` → `StrategyModel.bk_biz_id` | 策略监控项 |
| DetectModel | `strategy_id` | `strategy_id` → `StrategyModel.bk_biz_id` | 策略检测配置 |
| AlgorithmModel | `strategy_id`, `item_id` | `strategy_id` → `StrategyModel.bk_biz_id` | 策略算法配置 |
| StrategyActionConfigRelation | `strategy_id`, `config_id` | `strategy_id` → `StrategyModel.bk_biz_id`；`config_id` → `ActionConfig.bk_biz_id` | 可做归属一致性校验 |

##### 值班与用户组链路

| 表名 | 关联字段 | 推导链路 | 备注 |
|------|---------|---------|------|
| DutyArrange | `user_group_id`, `duty_rule_id` | `user_group_id` → `UserGroup.bk_biz_id` 或 `duty_rule_id` → `DutyRule.bk_biz_id` | 值班安排 |
| DutyArrangeSnap | `user_group_id`, `duty_arrange_id` | `user_group_id` → `UserGroup.bk_biz_id` | 值班安排快照 |
| DutyRuleSnap | `duty_rule_id`, `user_group_id` | `duty_rule_id` → `DutyRule.bk_biz_id` 或 `user_group_id` → `UserGroup.bk_biz_id` | 值班规则快照 |
| DutyPlan | `user_group_id`, `duty_rule_id` | `user_group_id` → `UserGroup.bk_biz_id` 或 `duty_rule_id` → `DutyRule.bk_biz_id` | 值班计划 |
| DutyPlanSendRecord | `user_group_id` | `user_group_id` → `UserGroup.bk_biz_id` | 值班计划发送记录 |

##### 报表订阅链路

| 表名 | 关联字段 | 推导链路 | 备注 |
|------|---------|---------|------|
| ReportChannel | `report_id` | `report_id` → `Report.bk_biz_id` | 报表订阅渠道 |

##### 报表内容链路

| 表名 | 关联字段 | 推导链路 | 备注 |
|------|---------|---------|------|
| ReportContents | `graphs` | `graphs[*].split("-")[0]` → `bk_biz_id` | 报表内容，`graphs` 字段为图表 ID 列表，格式如 `['19055-ef880wgbqgtmod-1', ...]`，前缀即为 `bk_biz_id`。线上数据验证：每个 `report_item` 仅关联单一业务 |
| ReportItems | `id` | `id` → `ReportContents.report_item` → `graphs` | 订阅报表项，通过关联的 `ReportContents` 间接推导 |

##### 插件实例链路

| 表名 | 关联字段 | 推导链路 | 备注 |
|------|---------|---------|------|
| AlertConfig | `plugin_id`, `plugin_instance_id` | `plugin_instance_id` → `EventPluginInstance.bk_biz_id` | 仅限插件实例关联场景 |

#### monitor_web 模块

##### 自定义上报链路

| 表名 | 关联字段 | 推导链路 | 备注 |
|------|---------|---------|------|
| CustomTSField | `time_series_group_id` | `time_series_group_id` → `CustomTSTable.bk_biz_id` | 自定义时序字段 |
| CustomTSGroupingRule | `time_series_group_id` | `time_series_group_id` → `CustomTSTable.bk_biz_id` | 自定义时序分组规则 |
| CustomEventItem | `bk_event_group_id` | `bk_event_group_id` → `CustomEventGroup.bk_biz_id` | 自定义事件项（外键关联） |

##### 采集配置链路

| 表名 | 关联字段 | 推导链路 | 备注 |
|------|---------|---------|------|
| DeploymentConfigVersion | `config_meta_id`, `plugin_version_id` | `config_meta_id` → `CollectConfigMeta.bk_biz_id` | 采集部署配置版本 |

##### 插件版本链路

| 表名 | 关联字段 | 推导链路 | 备注 |
|------|---------|---------|------|
| PluginVersionHistory | `plugin_id` | `plugin_id` → `CollectorPluginMeta.bk_biz_id` | 插件版本历史 |
| CollectorPluginInfo | 无直接外键 | 通过 `PluginVersionHistory.(plugin_id, bk_tenant_id)` → `CollectorPluginMeta.bk_biz_id` | 需通过版本历史反查 |
| CollectorPluginConfig | 无直接外键 | 通过 `PluginVersionHistory.(plugin_id, bk_tenant_id)` → `CollectorPluginMeta.bk_biz_id` | 需通过版本历史反查 |

##### 拨测链路

| 表名 | 关联字段 | 推导链路 | 备注 |
|------|---------|---------|------|
| UptimeCheckTaskCollectorLog | `task_id` | `task_id` → `UptimeCheckTask.bk_biz_id` | 拨测任务采集日志 |

#### apm_web 模块

##### APM 应用链路

| 表名 | 关联字段 | 推导链路 | 备注 |
|------|---------|---------|------|
| ApplicationRelationInfo | `application_id` | `application_id` → `Application.bk_biz_id` | 应用关联信息 |

#### metadata 模块

##### 自定义组链路

| 表名 | 关联字段 | 推导链路 | 备注 |
|------|---------|---------|------|
| TimeSeriesMetric | `group_id`, `table_id` | `group_id` → `TimeSeriesGroup.bk_biz_id` | 时序指标 |
| Event | `event_group_id` | `event_group_id` → `EventGroup.bk_biz_id` | 事件定义 |

##### BCS 资源链路

| 表名 | 关联字段 | 推导链路 | 备注 |
|------|---------|---------|------|
| ServiceMonitorInfo | `cluster_id` | `cluster_id` → `BCSClusterInfo.bk_biz_id` | ServiceMonitor 配置 |
| PodMonitorInfo | `cluster_id` | `cluster_id` → `BCSClusterInfo.bk_biz_id` | PodMonitor 配置 |
| LogCollectorInfo | `cluster_id` | `cluster_id` → `BCSClusterInfo.bk_biz_id` | 日志采集配置 |
| BcsFederalClusterInfo | `fed_cluster_id`, `host_cluster_id`, `sub_cluster_id` | `*_cluster_id` → `BCSClusterInfo.bk_biz_id` | 联邦集群拓扑 |

##### 数据源链路

| 表名 | 关联字段 | 推导链路 | 备注 |
|------|---------|---------|------|
| KafkaTopicInfo | `bk_data_id` | `bk_data_id` → `TimeSeriesGroup/EventGroup/LogGroup.bk_biz_id`（需通过自定义组关联） | Kafka Topic 配置 |

##### 空间链路

| 表名 | 关联字段 | 推导链路 | 备注 |
|------|---------|---------|------|
| SpaceVMInfo | `space_type`, `space_id` | `(space_type, space_id)` → `Space` → 业务空间映射 | 空间 VM 信息，需判断空间类型 |
| BkAppSpaceRecord | `space_uid` | `space_uid` → `Space` → 业务空间映射 | 应用空间记录，需判断空间类型 |

> **说明**：
> 1. 部分表存在多条推导路径时，优先选择主键/显式外键链路。
> 2. 空间链路的业务归属判定需要结合空间类型（`space_type_id`）：当空间类型为 `bkcc` 时，`space_id` 即为 `bk_biz_id`；其他空间类型需根据业务规则判定是否参与迁移。
> 3. 对于仅有 `bk_tenant_id` 而无 `bk_biz_id` 的表（如 `DataSource`、`ClusterInfo`），通常视为租户级资源而非业务级配置，按需纳入处理范围。
