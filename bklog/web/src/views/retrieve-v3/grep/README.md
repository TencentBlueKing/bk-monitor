# Grep è¯­æ³•é«˜äº®ç¼–è¾‘å™¨

åŸºäº CodeMirror 6 çš„ grep å‘½ä»¤è¯­æ³•é«˜äº®ç¼–è¾‘å™¨ï¼Œæ”¯æŒå®Œæ•´çš„ grep/egrep è¯­æ³•è§£æå’Œé«˜äº®æ˜¾ç¤ºã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ¨ è¯­æ³•é«˜äº®æ”¯æŒ

- **å‘½ä»¤å…³é”®å­—**: `grep`, `egrep` - è“è‰²ç²—ä½“æ˜¾ç¤º
- **å‚æ•°é€‰é¡¹**: `-i`, `-v`, `-E` ç­‰ - æ©™è‰²ç²—ä½“æ˜¾ç¤º  
- **å­—ç¬¦ä¸²**: åŒå¼•å·å’Œå•å¼•å·å­—ç¬¦ä¸² - ç»¿è‰²æ˜¾ç¤º
- **æ­£åˆ™æ¨¡å¼**: æœªåŠ å¼•å·çš„æ¨¡å¼ - ç´«è‰²æ˜¾ç¤º
- **ç®¡é“ç¬¦**: `|` - ç°è‰²ç²—ä½“æ˜¾ç¤º
- **è½¬ä¹‰å­—ç¬¦**: `\n`, `\t`, `\"`, `\'`, `\\` - æ©™è‰²ç²—ä½“æ˜¾ç¤º

### ğŸ”§ æ”¯æŒçš„è¯­æ³•

æ ¹æ® EBNF è¯­æ³•å®šä¹‰ï¼Œæ”¯æŒä»¥ä¸‹æ ¼å¼ï¼š

```ebnf
commands     = command ("|" command)* ;
command      = cmd_prefix (args_pattern) ;  
cmd_prefix   = [ ("grep" | "egrep") ] [ args ] ;
args_pattern = [ args ] pattern | pattern ;
args         = ("-"identifier)+ ;
pattern      = string | raw_pattern ;
string       = double_quoted | single_quoted ;
raw_pattern  = (escape_sequence | non_special_char)+ ;
```

### ğŸ“ ä½¿ç”¨ç¤ºä¾‹

| åœºæ™¯ | è¯­æ³•ç¤ºä¾‹ | è¯´æ˜ |
|------|----------|------|
| åŸºç¡€æœç´¢ | `grep "error"` | ç®€å•å­—ç¬¦ä¸²æœç´¢ |
| å¿½ç•¥å¤§å°å†™ | `grep -i "WARNING"` | ä¸åŒºåˆ†å¤§å°å†™ |
| åå‘åŒ¹é… | `grep -v "debug"` | æ’é™¤åŒ…å« debug çš„è¡Œ |
| ç®¡é“ç»„åˆ | `grep -i "error" \| grep -v "test"` | å¤šæ¡ä»¶è¿‡æ»¤ |
| è½¬ä¹‰å­—ç¬¦ | `grep "hello\\"world"` | å¤„ç†ç‰¹æ®Šå­—ç¬¦ |
| æ­£åˆ™è¡¨è¾¾å¼ | `egrep "[0-9]{3}-[A-Z]{2}"` | ä½¿ç”¨æ­£åˆ™æ¨¡å¼ |

## ä½¿ç”¨æ–¹æ³•

### åŸºç¡€ç”¨æ³•

```vue
<template>
  <GrepCliEditor 
    v-model:value="grepCommand"
    placeholder="è¾“å…¥ grep å‘½ä»¤..."
    height="40px"
    :enable-syntax-highlight="true"
  />
</template>

<script setup>
import { ref } from 'vue';
import GrepCliEditor from './grep-cli-editor';

const grepCommand = ref('grep -i "error" | grep -v "test"');
</script>
```

### å±æ€§é…ç½®

| å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `value` | String | `''` | ç¼–è¾‘å™¨å†…å®¹ |
| `placeholder` | String | `'-- INSERT --'` | å ä½ç¬¦æ–‡æœ¬ |
| `height` | String | `'36px'` | ç¼–è¾‘å™¨é«˜åº¦ |
| `autoHeight` | Boolean | `false` | è‡ªé€‚åº”é«˜åº¦ |
| `minHeight` | String | `'36px'` | æœ€å°é«˜åº¦ |
| `maxHeight` | String | `'200px'` | æœ€å¤§é«˜åº¦ |
| `enableSyntaxHighlight` | Boolean | `true` | å¯ç”¨è¯­æ³•é«˜äº® |
| `readOnly` | Boolean | `false` | åªè¯»æ¨¡å¼ |

### äº‹ä»¶ç›‘å¬

```vue
<GrepCliEditor 
  v-model:value="command"
  @change="handleChange"
  @update:value="handleUpdate"
/>
```

## é«˜äº®è§„åˆ™

### 1. å‘½ä»¤è‡ªåŠ¨è¡¥å…¨
- å¦‚æœæœªæ˜¾å¼æŒ‡å®š `grep` æˆ– `egrep`ï¼Œé»˜è®¤è¡¥å…¨ä¸º `grep`
- æ”¯æŒå‚æ•°åœ¨å‘½ä»¤å‰åçš„çµæ´»ä½ç½®

### 2. å‚æ•°è¯†åˆ«
æ”¯æŒå¸¸ç”¨çš„ grep å‚æ•°ï¼š
- `-i`: å¿½ç•¥å¤§å°å†™
- `-v`: åå‘åŒ¹é…ï¼ˆæ’é™¤ï¼‰
- `-E`: ä½¿ç”¨æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼

### 3. å­—ç¬¦ä¸²å¤„ç†
- **åŒå¼•å·å­—ç¬¦ä¸²**: æ”¯æŒå†…éƒ¨è½¬ä¹‰å­—ç¬¦
- **å•å¼•å·å­—ç¬¦ä¸²**: æ”¯æŒå†…éƒ¨è½¬ä¹‰å­—ç¬¦  
- **æœªåŠ å¼•å·æ¨¡å¼**: è‡ªåŠ¨è¯†åˆ«ä¸ºæ­£åˆ™æ¨¡å¼

### 4. è½¬ä¹‰å­—ç¬¦æ”¯æŒ
- æ ‡å‡†è½¬ä¹‰: `\"`, `\'`, `\\`, `\n`, `\t`, `\r`
- åå…­è¿›åˆ¶è½¬ä¹‰: `\x1b`, `\xff` ç­‰

### 5. ç®¡é“ç»„åˆ
- æ”¯æŒå¤šçº§ç®¡é“æ“ä½œ
- æ¯ä¸ªç®¡é“æ®µç‹¬ç«‹è§£æå’Œé«˜äº®

## æ–‡ä»¶ç»“æ„

```
grep/
â”œâ”€â”€ grep-cli-editor.tsx          # ä¸»ç¼–è¾‘å™¨ç»„ä»¶
â”œâ”€â”€ grep-highlighter.ts          # è¯­æ³•é«˜äº®å®ç°
â”œâ”€â”€ grep-demo.vue               # æ¼”ç¤ºç»„ä»¶
â”œâ”€â”€ grep-cli-editor.scss        # æ ·å¼æ–‡ä»¶
â””â”€â”€ README.md                   # ä½¿ç”¨è¯´æ˜
```

## æŠ€æœ¯å®ç°

- **ç¼–è¾‘å™¨å†…æ ¸**: CodeMirror 6
- **è¯­æ³•åˆ†æ**: åŸºäºæ­£åˆ™è¡¨è¾¾å¼çš„è¯æ³•åˆ†æ
- **é«˜äº®æ¸²æŸ“**: CodeMirror Decoration API
- **æ¡†æ¶æ”¯æŒ**: Vue 3 + TypeScript

## æ¼”ç¤ºæ•ˆæœ

è¿è¡Œæ¼”ç¤ºç»„ä»¶æŸ¥çœ‹å®Œæ•´çš„è¯­æ³•é«˜äº®æ•ˆæœï¼š

```vue
import GrepDemo from './grep-demo.vue';
```

æ¼”ç¤ºåŒ…å«äº†æ‰€æœ‰æ”¯æŒçš„è¯­æ³•ç‰¹æ€§å’Œé«˜äº®æ•ˆæœå¯¹æ¯”ã€‚ 